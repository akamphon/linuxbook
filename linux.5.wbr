\chapter{โปรแกรม\wbr{}คำ\wbr{}สั่ง\wbr{}พื้น\wbr{}ฐาน}
\begin{flushright}
{\it\latintext ``Write programs that do one thing and do it well.\\
Write programs to work together. \\
Write programs to handle text streams, \\
because that is a universal interface.''}\\
{{\bf\latintext  Doug McIlroy}}
\end{flushright}

ใน\wbr{}ลิ\wbr{}นุกซ์\wbr{}จะ\wbr{}เป็น\wbr{}เพียง\wbr{}แค่\wbr{}ระบบ\wbr{}ปฏิบัติ\wbr{}ที่\wbr{}ไร้\wbr{}ค่า\wbr{}ถ้า\wbr{}ไม่\wbr{}โปรแกรม\wbr{}ต่างๆ\wbr{}ใช้\wbr{}ร่วม\wbr{}กัน. โปรแกรม\wbr{}ต่างๆ\wbr{}ที่\wbr{}ว่า\wbr{}นี้\wbr{}ได้\wbr{}แก่\wbr{}โปรแกรม\wbr{}เสรี\wbr{}แบบ\wbr{}บรรทัด\wbr{}คำ\wbr{}สั่ง (command line) และ\wbr{}โปรแกรม\wbr{}แบบ GUI.

ตั้ง\wbr{}แต่\wbr{}เริ่ม\wbr{}ต้น\wbr{}ของ\wbr{}ระบบ\wbr{}ปฏิบัติ\wbr{}การ\wbr{}ยู\wbr{}นิกซ์\wbr{}ซึ่ง\wbr{}เป็น\wbr{}เวลา\wbr{}นาน\wbr{}กว่า 30 ปี\wbr{}แล้ว\wbr{}โปรแกรม\wbr{}คำ\wbr{}สั่ง\wbr{}ต่างๆ\wbr{}ที่\wbr{}ใช้\wbr{}ใน\wbr{}ตอน\wbr{}นั้น\wbr{}ก็\wbr{}ยัง\wbr{}ใช้\wbr{}กัน\wbr{}อยู่\wbr{}ใน\wbr{}ตอน\wbr{}นี้. โปรแกรม\wbr{}คำ\wbr{}สั่ง\wbr{}ชื่อ\wbr{}เดียว\wbr{}กัน\wbr{}ใน\wbr{}สมัย\wbr{}ใน\wbr{}อาจ\wbr{}จะ\wbr{}มี\wbr{}ส่วน\wbr{}ที่\wbr{}เหมือน\wbr{}กัน\wbr{}และ\wbr{}แตก\wbr{}ต่าง\wbr{}กัน\wbr{}กับ\wbr{}โปรแกรม\wbr{}คำ\wbr{}สั่ง\wbr{}สมัย\wbr{}นี้\wbr{}ที่\wbr{}มี\wbr{}ความ\wbr{}สามารถ\wbr{}เพิ่ม\wbr{}เติม\wbr{}ต่างๆ\wbr{}มาก\wbr{}ขึ้น, ทำ\wbr{}งาน\wbr{}ได้\wbr{}ดี\wbr{}ขึ้น. แต่\wbr{}สิ่ง\wbr{}ที่\wbr{}ยัง\wbr{}คง\wbr{}ไว้\wbr{}อยู่\wbr{}คือ\wbr{}โปรแกรม\wbr{}ส่วน\wbr{}ใหญ่\wbr{}ใช้\wbr{}ประมวล\wbr{}ผล\wbr{}ข้อ\wbr{}มูลเท็กซ์, แสดง\wbr{}ผล\wbr{}ให้\wbr{}ผู้\wbr{}ใช้\wbr{}เป็นเท็กซ์ และ\wbr{}ใช้\wbr{}อินเ\wbr{}ทอร์เฟส\wbr{}แบบ\wbr{}บรรทัด\wbr{}คำ\wbr{}สั่ง. แน่\wbr{}นอน\wbr{}ว่า\wbr{}การ\wbr{}แสดง\wbr{}ผล\wbr{}และ\wbr{}รับ\wbr{}ข้อ\wbr{}มูล\wbr{}เป็นเท็กซ์\wbr{}มี\wbr{}ขีด\wbr{}จำกัด, และ\wbr{}บาง\wbr{}กรณี\wbr{}ไม่\wbr{}สะดวก\wbr{}ต่อ\wbr{}การ\wbr{}ใช้\wbr{}จึง\wbr{}มี\wbr{}การ\wbr{}สร้าง\wbr{}อินเ\wbr{}ทอร์เฟส\wbr{}แบบ\wbr{}หน้า\wbr{}ต่าง\wbr{}ที่\wbr{}เรีย\wbr{}กว่า X วิน\wbr{}โดว์\wbr{}เสริม\wbr{}ขึ้น\wbr{}จน\wbr{}เป็น\wbr{}อินเ\wbr{}ทอร์เฟส\wbr{}กึ่ง\wbr{}มาตร\wbr{}ฐาน\wbr{}ที่\wbr{}ใช้\wbr{}กัน\wbr{}ใน\wbr{}ลิ\wbr{}นุกซ์.

ใน\wbr{}บท\wbr{}นี้\wbr{}จะ\wbr{}แนะ\wbr{}นำ\wbr{}โปรแกรม\wbr{}ต่างๆ\wbr{}ที่\wbr{}มี\wbr{}ใน\wbr{}ระบบ\wbr{}ลิ\wbr{}นุกซ์\wbr{}ซึ่ง\wbr{}ส่วน\wbr{}มาก\wbr{}จะ\wbr{}เป็น\wbr{}โปรแกรม\wbr{}บรรทัด\wbr{}คำ\wbr{}สั่ง, และ\wbr{}โปรแกรม GUI เป็น\wbr{}กรณี\wbr{}ไป.

\medskip
%\section{แพ็ก\wbr{}เกจ coreutils}
จาก\wbr{}ที่\wbr{}ได้\wbr{}แนะ\wbr{}นำ\wbr{}ไป\wbr{}แล้ว\wbr{}ใน\wbr{}บท\wbr{}ที่ 1 ว่า Free Software Foundation หรือ GNU เป็น\wbr{}องค์\wbr{}กรณ์\wbr{}ที่\wbr{}มี\wbr{}บท\wbr{}บาท\wbr{}สำคัญ\wbr{}อย่าง\wbr{}ยิ่ง\wbr{}ต่อ\wbr{}ลิ\wbr{}นุกซ์\wbr{}เพราะ\wbr{}เป็น\wbr{}องค์\wbr{}กรณ์\wbr{}ที่\wbr{}สร้าง\wbr{}หรือ\wbr{}เป็น\wbr{}ผู้\wbr{}สนับสนุน\wbr{}โครง\wbr{}การ\wbr{}โปรแกรม\wbr{}พื้น\wbr{}ฐาน\wbr{}หลัก\wbr{}ที่\wbr{}ใช้\wbr{}กัน\wbr{}ใน\wbr{}ระบบ\wbr{}ปฏิบัติ\wbr{}การ\wbr{}ยู\wbr{}นิกซ์\wbr{}ให้\wbr{}มี\wbr{}ใช้\wbr{}ใน\wbr{}ลิ\wbr{}นุกซ์\wbr{}อย่าง\wbr{}เสรี. แพ็ก\wbr{}เกจ\wbr{}ที่\wbr{}สำคัญ\wbr{}และ\wbr{}เป็น\wbr{}พื้น\wbr{}ฐาน\wbr{}ที่\wbr{}ลิ\wbr{}นุกซ์\wbr{}ทุก\wbr{}ค่าย\wbr{}ใช้\wbr{}ได้\wbr{}แก่ coreutils ซึ่ง\wbr{}ในแพ็ก\wbr{}เกจ\wbr{}นี้\wbr{}ยัง\wbr{}แบ่ง\wbr{}ย่อย\wbr{}ออก\wbr{}เป็น fileutils, shellutils และ textutils.

\section{แพ็ก\wbr{}เกจ fileutils}
แพ็ก\wbr{}เกจ fileutils เป็นแพ็ก\wbr{}เกจ\wbr{}ที่\wbr{}รวม\wbr{}โปรแกรม\wbr{}บรรทัด\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}เกี่ยว\wbr{}กับ\wbr{}การ\wbr{}จัด\wbr{}การ\wbr{}ไฟล์\wbr{}ซึ่ง\wbr{}ใน\wbr{}บท\wbr{}ที่\wbr{}ผ่าน\wbr{}มา\wbr{}ได้\wbr{}แนะ\wbr{}นำ\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}ใช้\wbr{}บ่อย\wbr{}และ\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}จำ\wbr{}เป็น\wbr{}ไป\wbr{}แล้ว\wbr{}พอ\wbr{}สม\wbr{}ควร. ใน\wbr{}ตา\wbr{}ราง\wbr{}ที่ \ref{tab:fileutils}

\begin{longtable}{lp{.55\textwidth}l}
\caption{โปรแกรม\wbr{}คำ\wbr{}สั่ง\wbr{}ในแพ็ก\wbr{}เกจ fileutils.}\label{tab:fileutils}\\
\toprule
\multicolumn{1}{c}{คำ\wbr{}สั่ง} & \multicolumn{1}{c}{คำ\wbr{}อธิบาย} & \multicolumn{1}{c}{อ้าง\wbr{}อิง}\\
\midrule
\cmd{chgrp} & เปลี่ยน\wbr{}กลุ่ม\wbr{}ของ\wbr{}ไฟล์. & หน้า \pageref{cmd:chgrp}\\
\cmd{chown} & เปลี่ยน\wbr{}เจ้า\wbr{}ของ\wbr{}ไฟล์. & หน้า \pageref{cmd:chown}\\
\cmd{chmod} & เปลี่ยน\wbr{}สิทธิ์\wbr{}การ\wbr{}ใช้\wbr{}ไฟล์. & หน้า \pageref{cmd:chmod}\\
\cmd{cp} & ก็\wbr{}อป\wbr{}ปี้\wbr{}ไฟล์. & หน้า \pageref{cmd:cp}\\
\cmd{dd} & ก็\wbr{}อป\wbr{}ปี้\wbr{}และ\wbr{}แปลง\wbr{}ข้อ\wbr{}มูล. & หน้า \pageref{cmd:dd}\\
\cmd{df} & แสดง\wbr{}พื้น\wbr{}ที่\wbr{}การ\wbr{}ใช้\wbr{}งาน\wbr{}ฮาร์ดดิสก์. & หน้า \pageref{cmd:df}\\
\cmd{dir} & แสดง\wbr{}ราย\wbr{}การ\wbr{}ไฟล์. & \\
\cmd{dircolors} & ตั้ง\wbr{}ค่า\wbr{}เริ่ม\wbr{}ต้น\wbr{}เพื่อ\wbr{}ให้\wbr{}คำ\wbr{}สั่ง \cmd{ls} แสดง\wbr{}สี\wbr{}ต่างๆ\wbr{}ได้. &\\
\cmd{du} & แสดง\wbr{}พื้น\wbr{}ที่\wbr{}การ\wbr{}ใช้\wbr{}งาน\wbr{}ฮาร์ดดิสก์. & หน้า \pageref{cmd:du}\\
\cmd{install} & ก็\wbr{}อป\wbr{}ปี้\wbr{}ไฟล์\wbr{}และ\wbr{}ตั้ง\wbr{}ค่า\wbr{}สิทธิ์\wbr{}การ\wbr{}ใช้\wbr{}ไฟล์.& หน้า \pageref{cmd:install}\\
\cmd{ln} & สร้าง\wbr{}ลิงค์. & หน้า \pageref{cmd:ln}\\
\cmd{ls} & แสดง\wbr{}ราย\wbr{}การ\wbr{}ไฟล์. & หน้า \pageref{cmd:ls}\\
\cmd{mkdir} & สร้าง\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี. & หน้า \pageref{cmd:mkdir}\\
\cmd{mkfifo} & สร้าง\wbr{}ไฟล์ fifo. & หน้า \pageref{cmd:mkfifo}\\
\cmd{mknod} & สร้าง\wbr{}ไฟล์\wbr{}พิเศษ. &\\
\cmd{mv} & ย้าย\wbr{}ไฟล์. & หน้า \pageref{cmd:mv}\\
\cmd{rm} & ลบ\wbr{}ไฟล์. & หน้า \pageref{cmd:rm}\\
\cmd{rmdir} & ลบ\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี\wbr{}ว่าง.& หน้า \pageref{cmd:rmdir}\\
\cmd{shred} & ทำลาย\wbr{}ข้อ\wbr{}มูล\wbr{}ใน\wbr{}ไฟล์.& หน้า \pageref{cmd:shred}\\
\cmd{sync} & เขียน\wbr{}ข้อ\wbr{}มูล\wbr{}ที่\wbr{}อยู่\wbr{}ใน buffer ลงดิสก์.& หน้า \pageref{cmd:sync}\\
\cmd{touch} & เปลี่ยน timestamp ของ\wbr{}ไฟล์.& หน้า \pageref{cmd:touch}\\
\cmd{vdir} & แสดง\wbr{}ราย\wbr{}การ\wbr{}ไฟล์.& \\
\bottomrule
\end{longtable}

\subsection{สำรวจ\wbr{}พื้น\wbr{}ที่\wbr{}ฮาร์ดดิสก์}
ถ้า\wbr{}อ่าน\wbr{}จาก\wbr{}คำ\wbr{}อธิบาย\wbr{}จาก\wbr{}ตา\wbr{}ราง\wbr{}ที่ \ref{tab:fileutils} จะ\wbr{}เห็น\wbr{}ว่า \cmd{du} และ \cmd{df} ทำ\wbr{}งาน\wbr{}คล้ายๆ\wbr{}กัน. คำ\wbr{}สั่ง \cmd{df} จะ\wbr{}แสดง\wbr{}พื้น\wbr{}ที่\wbr{}ฮาร์ดดิสก์\wbr{}แบ่ง\wbr{}ตา\wbr{}มดี\wbr{}ไวซ์\wbr{}ต่างๆ, ส่วน\wbr{}คำ\wbr{}สั่ง \cmd{du} จะ\wbr{}แสดง\wbr{}พื้น\wbr{}ที่\wbr{}ใช้\wbr{}งาน\wbr{}ของ\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี่\wbr{}ที่\wbr{}ต้องการ.

\begin{MyExample}[สำรวจ\wbr{}พื้น\wbr{}ที่\wbr{}ฮาร์ดดิสก์\wbr{}ด้วย \cmd{df} และ \cmd{du}.]
\begin{MyEx}
$ \cin{df -h}
Filesystem            Size  Used Avail Use% Mounted on
/dev/hdb1              19G   13G  4.6G  74% /
/dev/hdb2              18G   13G  4.7G  73% /home
none                  442M     0  442M   0% /dev/shm
/dev/cdrom            3.2G  3.2G     0 100% /mnt/cdrom
$ \cin{du -sh $HOME}
13G     /home/poonlap
\end{MyEx}
\end{MyExample}%$

\subsection{ก็\wbr{}อป\wbr{}ปี้\wbr{}ไฟล์}
คำ\wbr{}สั่ง\wbr{}สำหรับ\wbr{}ก็\wbr{}อป\wbr{}ปี้\wbr{}ไฟล์\wbr{}ที่\wbr{}ใช้\wbr{}ทั่ว\wbr{}ไป\wbr{}คือ \cmd{cp}. ส่วน\wbr{}คำ\wbr{}สั่ง \cmd{install} ก็\wbr{}ทำ\wbr{}งาน\wbr{}เหมือน\wbr{}กับ\wbr{}คำ\wbr{}สั่ง \cmd{cp} และ\wbr{}วิธี\wbr{}ใช้\wbr{}งาน\wbr{}เบื้อง\wbr{}ต้น\wbr{}ก็\wbr{}เหมือน\wbr{}กัน\wbr{}คือ\wbr{}ก็\wbr{}อป\wbr{}ปี้\wbr{}ไฟล์\wbr{}จาก\wbr{}ที่\wbr{}หนึ่ง\wbr{}ไป\wbr{}อีก\wbr{}ที่\wbr{}หนึ่ง. คำ\wbr{}สั่ง \cmd{install} มัก\wbr{}ใช้\wbr{}ใน\wbr{}การ\wbr{}ติด\wbr{}ตั้ง\wbr{}โปรแกรม\wbr{}ใน\wbr{}ระบบ.

การ\wbr{}ติด\wbr{}ตั้ง\wbr{}โปรแกรม\wbr{}แบบ\wbr{}ง่าย\wbr{}ที่\wbr{}สุด\wbr{}ใน\wbr{}ระบบ\wbr{}ยู\wbr{}นิกซ์\wbr{}และ\wbr{}ลิ\wbr{}นุกซ์\wbr{}คือ\wbr{}การ\wbr{}ก็\wbr{}อป\wbr{}ปี้\wbr{}ไฟล์\wbr{}ไป\wbr{}ไว้\wbr{}ใน\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี\wbr{}เดียว\wbr{}กัน\wbr{}กับ\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี\wbr{}ที่\wbr{}กำหนด\wbr{}ใน\wbr{}ตัวแปร\wbr{}สภาพ\wbr{}แวด\wbr{}ล้อม \cmd{PATH} เช่น \cmd{/usr/bin}. ดิสท\wbr{}ริ\wbr{}บิว\wbr{}ชัน\wbr{}แต่\wbr{}ละ\wbr{}ค่าย\wbr{}อาจ\wbr{}จะ\wbr{}มี\wbr{}โปรแกรม\wbr{}สำหรับ\wbr{}ติด\wbr{}ตั้ง\wbr{}โปรแกรม\wbr{}ที่\wbr{}มา\wbr{}เป็นแพ็ก\wbr{}เกจ\wbr{}ต่างๆ\wbr{}กัน\wbr{}เช่น \cmd{rpm}, \cmd{dpkg}, \cmd{emerge} ฯลฯ. โปรแกรม\wbr{}ติด\wbr{}ตั้งแพ็ก\wbr{}เกจ\wbr{}เหล่า\wbr{}นี้\wbr{}ก็\wbr{}ใช้\wbr{}การ\wbr{}ก็\wbr{}อป\wbr{}ปี้\wbr{}ไฟล์\wbr{}โปรแกรม\wbr{}และ\wbr{}ไฟล์\wbr{}ที่\wbr{}เกี่ยว\wbr{}ข้อง\wbr{}อื่นๆ\wbr{}ไป\wbr{}ไว้\wbr{}ที่\wbr{}ต้องการ\wbr{}เท่า\wbr{}นั้น\wbr{}เอง, และ\wbr{}มี\wbr{}การ\wbr{}สร้าง\wbr{}ฐาน\wbr{}ข้อ\wbr{}มูล\wbr{}สำหรับ\wbr{}ควบ\wbr{}คุม\wbr{}และ\wbr{}ติด\wbr{}ตาม\wbr{}การ\wbr{}ติด\wbr{}ตั้งแพ็ก\wbr{}เกจ\wbr{}ต่างๆ. การ\wbr{}ก็\wbr{}อป\wbr{}ปี้\wbr{}ไฟล์\wbr{}จะ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{cp} ก็\wbr{}ได้\wbr{}แต่\wbr{}ถ้า\wbr{}มี\wbr{}การ\wbr{}ตั้ง\wbr{}ค่า\wbr{}ต่างๆ\wbr{}เช่น\wbr{}สิทธิ์\wbr{}การ\wbr{}ใช้\wbr{}ไฟล์, เจ้า\wbr{}ของ\wbr{}ไฟล์\wbr{}ด้วย\wbr{}ก็\wbr{}ต้อง\wbr{}มา\wbr{}สั่ง\wbr{}คำ\wbr{}สั่ง \cmd{chmod}, \cmd{chown} ภาย\wbr{}หลัง. ดัง\wbr{}นั้น\wbr{}จึง\wbr{}มี\wbr{}คำ\wbr{}สั่ง \cmd{install} เพื่อ\wbr{}ตั้ง\wbr{}ค่า\wbr{}ต่างๆ\wbr{}เหล่า\wbr{}นี้\wbr{}พร้อม\wbr{}กับ\wbr{}การ\wbr{}ก็\wbr{}อป\wbr{}ปี้.

สำหรับ\wbr{}โปรแกรม\wbr{}ที่\wbr{}เป็น\wbr{}ไฟล์ไบ\wbr{}นารี, ไฟล์\wbr{}นั้น\wbr{}อาจ\wbr{}จะ\wbr{}มี\wbr{}ข้อ\wbr{}มูล\wbr{}ที่\wbr{}ไม่\wbr{}จำ\wbr{}เป็น\wbr{}ใน\wbr{}การ\wbr{}ใช้\wbr{}งาน\wbr{}เช่น\wbr{}ข้อ\wbr{}มูล\wbr{}ที่\wbr{}เกี่ยว\wbr{}กับ\wbr{}การ debug%
\myvocab{d}{debug}{การ\wbr{}กำจัดข้\wbr{}อม\wbr{}ผิด\wbr{}พลาด\wbr{}ของ\wbr{}โปรแกรม. ข้อ\wbr{}ผิด\wbr{}พลาด\wbr{}นี้\wbr{}มัก\wbr{}เป็น\wbr{}ข้อ\wbr{}ผิด\wbr{}พลาด\wbr{}ที่\wbr{}ไม่\wbr{}คาด\wbr{}คิด\wbr{}จน\wbr{}กระทั่ง\wbr{}ใช้\wbr{}งาน\wbr{}จริง\wbr{}ที่\wbr{}เรีย\wbr{}กว่า runtime error.}%
 ใน\wbr{}ไฟล์. ข้อ\wbr{}มูล\wbr{}เหล่า\wbr{}นี้\wbr{}สร้าง\wbr{}ขึ้น\wbr{}ตอน\wbr{}ที่\wbr{}คอมไพล์\wbr{}โปรแกรม\wbr{}นั้นๆ. คำ\wbr{}สั่ง \cmd{install}\cindex{install}\refcmd{install} ยัง\wbr{}ช่วย\wbr{}เอา\wbr{}ข้อ\wbr{}มูล\wbr{}ที่\wbr{}ไม่\wbr{}จำ\wbr{}เป็น\wbr{}เหล่า\wbr{}นี้\wbr{}ออก\wbr{}ด้วย\wbr{}เวลา\wbr{}ติด\wbr{}ตั้ง\wbr{}ด้วย\wbr{}ตัว\wbr{}เลือก \cmd{-s}.\mymemo{การ\wbr{}เอา\wbr{}ของ\wbr{}มูล\wbr{}ที่\wbr{}ไม่\wbr{}จำ\wbr{}เป็น\wbr{}สำหรับ\wbr{}การ\wbr{}รัน\wbr{}โปรแกรม\wbr{}นี้\wbr{}เรีย\wbr{}กว่า strip.} ถ้า\wbr{}ไม่\wbr{}ใช้\wbr{}ตัว\wbr{}เลือก\wbr{}นี้, ก็\wbr{}อาจ\wbr{}จะ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{strip}\cindex{strip} เอา\wbr{}ข้อ\wbr{}มูล\wbr{}ที่\wbr{}ไม่\wbr{}จำ\wbr{}เป็น\wbr{}ออก\wbr{}ไป\wbr{}ต่าง\wbr{}หาก.

สมมติ\wbr{}ว่า\wbr{}เรา\wbr{}มี\wbr{}ไฟล์\wbr{}โปรแกรมไบ\wbr{}นารี\wbr{}ที่\wbr{}คอมไพล์\wbr{}เอง\wbr{}และ\wbr{}ต้องการ\wbr{}ก็\wbr{}อป\wbr{}ปี้\wbr{}เป็น\wbr{}ชื่อ \cmd{myprogram} ไว้\wbr{}ที่ \cmd{\$HOME/bin} เพื่อ\wbr{}ใช้\wbr{}งาน. เรา\wbr{}สามารถ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{install} แทน\wbr{}คำ\wbr{}สั่ง \cmd{cp} ได้\wbr{}ตาม\wbr{}ตัว\wbr{}อย่าง\wbr{}ต่อ\wbr{}ไป\wbr{}นี้.
\begin{MyExample}[การ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{install}.]\label{ex:install}
\begin{MyEx}
$ \cin{ls -lF a.out}
-rwxr-xr-x    1 poonlap  users       14596 Sep  3 00:37 a.out*
$ \cin{install -vs -m 750 a.out ~/bin/myprogram}
`a.out' -> `/home/poonlap/bin/myprogram'
$ \cin{ls -lF a.out ~/bin/myprogram}
-rwxr-x---    1 poonlap  users        3116 Sep  3 00:41 /home/poonlap/bin/myprogram*
-rwxr-xr-x    1 poonlap  users       14596 Sep  3 00:38 a.out*
\end{MyEx}
\end{MyExample}%$
ตัว\wbr{}เลือก \cmd{-v} เป็น\wbr{}ตัว\wbr{}เลือก\wbr{}ที่\wbr{}ใช้\wbr{}ได้\wbr{}กับ\wbr{}คำ\wbr{}สั่ง \cmd{cp} คือ\wbr{}แสดง\wbr{}สถานะ\wbr{}การ\wbr{}ทำ\wbr{}งาน. ตัว\wbr{}เลือก \cmd{-m} เป็น\wbr{}การ\wbr{}ระบุ\wbr{}โหมด\wbr{}ของ\wbr{}ไฟล์\wbr{}ที่\wbr{}ต้องการ\wbr{}ติด\wbr{}ตั้ง. ให้\wbr{}สังเกต\wbr{}ขนาด\wbr{}ของ\wbr{}ไฟล์\wbr{}และ\wbr{}โหมด\wbr{}ของ\wbr{}ไฟล์\wbr{}ก่อน\wbr{}และ\wbr{}หลัง\wbr{}การ\wbr{}ก็\wbr{}อป\wbr{}ปี้.


\subsection{เปลี่ยน\wbr{}เจ้า\wbr{}ของ\wbr{}ไฟล์\wbr{}และ\wbr{}กลุ่ม}
การ\wbr{}เปลี่ยน\wbr{}เจ้า\wbr{}ของ\wbr{}ไฟล์\wbr{}จะ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{chown}. ส่วน\wbr{}การ\wbr{}เปลี่ยน\wbr{}กลุ่ม\wbr{}ของ\wbr{}ไฟล์\wbr{}จะ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{chgrp}. ถ้า\wbr{}ต้องการ\wbr{}เปลี่ยน\wbr{}ทั้ง\wbr{}เจ้า\wbr{}ของ\wbr{}ไฟล์\wbr{}และ\wbr{}กลุ่ม\wbr{}ไฟล์, สามารถ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{chown} เปลี่ยน\wbr{}ค่าที่\wbr{}ต้องการ\wbr{}ใน\wbr{}รวด\wbr{}เดียว\wbr{}โดย\wbr{}ระบุ\wbr{}เจ้า\wbr{}ของ\wbr{}ไฟล์\wbr{}และ\wbr{}ชื่อ\wbr{}กลุ่ม\wbr{}โดย\wbr{}ใช้\wbr{}เครื่อง\wbr{}หมาย colon คั่น\wbr{}เช่น\wbr{}ถ้า\wbr{}ต้องการ\wbr{}ให้\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี \cmd{/var/www} เป็น\wbr{}ที่\wbr{}เก็บ\wbr{}ไฟล์\wbr{}สำหรับเว็บเ\wbr{}ซิฟร์\wbr{}เวอร์\wbr{}ให้\wbr{}มี\wbr{}เจ้า\wbr{}ของ\wbr{}เป็น apache และ\wbr{}อยู่\wbr{}ใน\wbr{}กลุ่ม users ให้\wbr{}ทำ\wbr{}ดัง\wbr{}นี้.
\begin{MyExample}[การ\wbr{}เปลี่ยน\wbr{}เจ้า\wbr{}ของ\wbr{}ไฟล์\wbr{}และ\wbr{}กลุ่ม\wbr{}ใน\wbr{}คราว\wbr{}เดียว\wbr{}กัน.]
\begin{MyEx}
# \cin{chown -R apache:users /var/www}
\end{MyEx}
\end{MyExample}

\subsection{สร้าง\wbr{}ไฟล์\wbr{}พิเศษ}
เรา\wbr{}ได้\wbr{}รู้\wbr{}จัก\wbr{}กับ\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}สร้าง\wbr{}ไฟล์\wbr{}พิเศษ\wbr{}จาก\wbr{}บท\wbr{}ที่\wbr{}ผ่าน\wbr{}มา\wbr{}เช่น\wbr{}ถ้า\wbr{}ต้องการ\wbr{}สร้าง\wbr{}ไฟล์ fifo จะ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{mkfifo}. ถ้า\wbr{}ต้องการ\wbr{}สร้าง\wbr{}ลิงค์\wbr{}จะ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{ln}. คำ\wbr{}สั่ง \cmd{mknod}\cindex{mknod}\refcmd{mknod} เป็น\wbr{}อีก\wbr{}คำ\wbr{}สั่ง\wbr{}หนึ่ง\wbr{}ที่\wbr{}ใช้\wbr{}สร้าง\wbr{}ไฟล์\wbr{}พิเศษ\wbr{}ได้\wbr{}แก่ ไฟล์ fifo, ไฟล์\wbr{}ดี\wbr{}ไวซ์\wbr{}แบบ character และ\wbr{}แบบ block. ผู้\wbr{}ใช้\wbr{}ทั่ว\wbr{}ไป\wbr{}สามารถ\wbr{}สร้าง\wbr{}ไฟล์ fifo ได้\wbr{}ด้วย\wbr{}คำ\wbr{}สั่ง \cmd{mkfifo} หรือ \cmd{mknod} ก็\wbr{}ได้. ส่วน\wbr{}การ\wbr{}สร้าง\wbr{}ไฟล์\wbr{}ดี\wbr{}ไวซ์\wbr{}ทำ\wbr{}ได้\wbr{}โดย root เท่า\wbr{}นั้น.

\subsection{ทำลาย\wbr{}ข้อ\wbr{}มูล}
ใน\wbr{}ระบบ\wbr{}ปฏิบัติ\wbr{}การ\wbr{}ตระกูล\wbr{}ยู\wbr{}นิกซ์, การ\wbr{}ลบ\wbr{}ไฟล์\wbr{}ด้วย\wbr{}คำ\wbr{}สั่ง \cmd{rm} นั้น\wbr{}เป็น\wbr{}เพียง\wbr{}แค่\wbr{}การ\wbr{}ลบ\wbr{}ฮาร์ด\wbr{}ลิงค์\wbr{}ออก\wbr{}จาก\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี\wbr{}เท่า\wbr{}นั้น. เนื้อ\wbr{}หา\wbr{}ใน\wbr{}ไฟล์\wbr{}นั้น\wbr{}ยัง\wbr{}คง\wbr{}ใน\wbr{}ที่\wbr{}ใด\wbr{}ที่\wbr{}หนึ่ง\wbr{}ใน\wbr{}ฮาร์ดดิสก์\wbr{}จน\wbr{}กว่า\wbr{}พื้น\wbr{}ที่\wbr{}นั้น\wbr{}จะ\wbr{}ถูก\wbr{}ใช้\wbr{}เก็บ\wbr{}ข้อ\wbr{}มูล\wbr{}ใหม่. และ\wbr{}ใน\wbr{}ตอน\wbr{}นั้น\wbr{}ข้อ\wbr{}มูล\wbr{}ตรง\wbr{}นั้น\wbr{}ก็\wbr{}จะ\wbr{}ถูก\wbr{}แทน\wbr{}ที่\wbr{}ด้วย\wbr{}ข้อ\wbr{}มูล\wbr{}ใหม่. คำ\wbr{}สั่ง \cmd{shred}\cindex{shred}\refcmd{shred}\mymemo{\cmd{shred} มา\wbr{}จาก\wbr{}คำ\wbr{}ว่า shredder คือ\wbr{}เครื่อง\wbr{}ทำลาย\wbr{}เอก\wbr{}สาร.} เป็น\wbr{}คำ\wbr{}สั่ง\wbr{}ทำลาย\wbr{}ข้อ\wbr{}มูล\wbr{}ใน\wbr{}ไฟล์\wbr{}โดย\wbr{}ที่\wbr{}เขียน\wbr{}ข้อ\wbr{}มูล\wbr{}ปลอมๆ\wbr{}ซ้ำ\wbr{}กัน\wbr{}หลาย\wbr{}ครั้ง\wbr{}ลง\wbr{}ใน\wbr{}ไฟล์\wbr{}ที่\wbr{}ต้องการ. ถ้า\wbr{}ใช้\wbr{}ตัว\wbr{}เลือก \cmd{-u} ประกอบ\wbr{}ด้วย\wbr{}จะ\wbr{}ทำ\wbr{}การ\wbr{}ลบ\wbr{}ไฟล์\wbr{}นั้น\wbr{}หลัง\wbr{}จาก\wbr{}ที่\wbr{}ทำลาย\wbr{}ข้อ\wbr{}มูล\wbr{}เรียบ\wbr{}ร้อย\wbr{}แล้ว.

\subsection{\cmd{sync}}
การ\wbr{}อ่าน\wbr{}หรือ\wbr{}เขียน\wbr{}ข้อ\wbr{}มูล\wbr{}ลง\wbr{}ดิกส์\wbr{}จะ\wbr{}ช้า\wbr{}กว่า\wbr{}การ\wbr{}อ่าน\wbr{}หรือ\wbr{}เขียน\wbr{}ข้อ\wbr{}มูล\wbr{}ลง\wbr{}หน่วย\wbr{}ความ\wbr{}จำ. ดัง\wbr{}นั้น\wbr{}ระบบ\wbr{}ปฏิบัติ\wbr{}การ\wbr{}สมัย\wbr{}ใหม่\wbr{}จะ\wbr{}ใช้\wbr{}หน่วย\wbr{}ความ\wbr{}จำ\wbr{}บาง\wbr{}ส่วน\wbr{}เก็บ\wbr{}ข้อ\wbr{}มูล\wbr{}ชั่ว\wbr{}คราว\wbr{}เวลา\wbr{}เขียน\wbr{}ข้อ\wbr{}มูล\wbr{}ลง\wbr{}ไฟล์\wbr{}หรือ\wbr{}อ่าน\wbr{}ข้อ\wbr{}มูล\wbr{}ลง\wbr{}ไฟล์. เรา\wbr{}เรียก\wbr{}หน่วย\wbr{}ความ\wbr{}จำ\wbr{}ที่\wbr{}ใช้\wbr{}ใน\wbr{}ลักษณะ\wbr{}นี้\wbr{}ว่า \emph{buffer cache}\gindex{buffer cache}. การ\wbr{}ทำ\wbr{}งาน\wbr{}ของ buffer cache จะ\wbr{}เห็น\wbr{}ชัด\wbr{}มาก\wbr{}ใน\wbr{}กรณี\wbr{}ที่\wbr{}ใช้ฟล็\wbr{}อป\wbr{}ปี้. บาง\wbr{}ครั้ง\wbr{}เรา\wbr{}เขียน\wbr{}ข้อ\wbr{}มูล\wbr{}ลง\wbr{}ในฟล็\wbr{}อป\wbr{}ปี้, ระบบ\wbr{}จะ\wbr{}ไม่\wbr{}บันทึก\wbr{}ข้อ\wbr{}มูล\wbr{}ที่\wbr{}เขียน\wbr{}ลง\wbr{}ใน\wbr{}แผ่นฟล็\wbr{}อป\wbr{}ปี้\wbr{}ทัน\wbr{}ที\wbr{}แต่\wbr{}จะ\wbr{}เก็บ\wbr{}ไว้\wbr{}ใน buffer cache. เวลา\wbr{}สั่ง\wbr{}คำ\wbr{}สั่ง \cmd{umount} แล้ว\wbr{}จึง\wbr{}จะ\wbr{}ย้าย\wbr{}ข้อ\wbr{}มูล\wbr{}ที่\wbr{}อยู่\wbr{}ใน\wbr{}หน่วย\wbr{}ความ\wbr{}จำ\wbr{}ที่\wbr{}ต้อง\wbr{}บันทึก\wbr{}ลง\wbr{}ใน\wbr{}แผ่นฟล็\wbr{}อป\wbr{}ปี้. การ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{sync} เป็น\wbr{}การ\wbr{}บังคับ\wbr{}เขียน\wbr{}ข้อ\wbr{}มูล\wbr{}ที่\wbr{}อยู่\wbr{}ใน\wbr{}หน่วย\wbr{}ความ\wbr{}จำ\wbr{}ลง\wbr{}ในดิสก์. โดย\wbr{}ปรกติ\wbr{}ผู้\wbr{}ใช้\wbr{}ไม่\wbr{}จำ\wbr{}เป็น\wbr{}ต้อง\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง\wbr{}นี้\wbr{}เพราะ\wbr{}ลิ\wbr{}นุกซ์\wbr{}จะ\wbr{}จัด\wbr{}การ\wbr{}ให้\wbr{}โดย\wbr{}อัตโนมัติ\wbr{}อยู่\wbr{}แล้ว.





\section{แพ็ก\wbr{}เกจ shellutils}
จาก\wbr{}บท\wbr{}ที่\wbr{}ผ่าน\wbr{}มา\wbr{}เรา\wbr{}ทราบ\wbr{}แล้ว\wbr{}ว่า\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}ใช้\wbr{}ใน\wbr{}เชลล์\wbr{}แบ่ง\wbr{}เป็น\wbr{}คำ\wbr{}สั่ง\wbr{}ประกอบ\wbr{}ภาย\wbr{}ใน (builtin command) และ\wbr{}โปรแกรม\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}มี\wbr{}อยู่\wbr{}ใน\wbr{}ระบบ. แพ็ก\wbr{}เกจ shellutils เป็นแพ็ก\wbr{}เกจ\wbr{}ที่\wbr{}รวม\wbr{}โปรแกรม\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}ช่วย\wbr{}เสริม\wbr{}การ\wbr{}ทำ\wbr{}งาน\wbr{}ของ\wbr{}เชลล์\wbr{}ให้\wbr{}ใช้\wbr{}งาน\wbr{}สะดวก\wbr{}ยิ่ง\wbr{}ขึ้น, และ\wbr{}คำ\wbr{}สั่ง\wbr{}หลาย\wbr{}ตัว\wbr{}มัก\wbr{}ใช้\wbr{}ประกอบ\wbr{}ใน\wbr{}การ\wbr{}เขียน\wbr{}เชลล์สค\wbr{}ริปต์.

โปรแกรม\wbr{}คำ\wbr{}สั่ง\wbr{}หลาย\wbr{}ตัว\wbr{}ในแพ็ก\wbr{}เกจ\wbr{}นี้\wbr{}ถู\wbr{}กรวม\wbr{}อยู่\wbr{}ใน\wbr{}คำ\wbr{}สั่ง\wbr{}ประกอบ\wbr{}ภาย\wbr{}ใน\wbr{}เชลล์ bash ด้วย\wbr{}เช่น \cmd{test}, \cmd{echo} ฯลฯ. หมาย\wbr{}ความ\wbr{}ว่า\wbr{}ถ้า\wbr{}เรา\wbr{}สั่ง\wbr{}คำ\wbr{}สั่ง \cmd{echo}, เชลล์\wbr{}จะ\wbr{}เป็น\wbr{}ตัว\wbr{}ดำเนิน\wbr{}งาน\wbr{}เอง, ไม่\wbr{}ได้\wbr{}ใช้\wbr{}ไฟล์\wbr{}โปรแกรม \cmd{/bin/echo}. เดิม\wbr{}ที\wbr{}คำ\wbr{}สั่ง\wbr{}เหล่า\wbr{}นี้\wbr{}ไม่\wbr{}ได้\wbr{}เป็น\wbr{}คำ\wbr{}สั่ง\wbr{}ประกอบ\wbr{}ภาย\wbr{}ใน\wbr{}เชลล์\wbr{}แต่\wbr{}มี\wbr{}การ\wbr{}ปรับ\wbr{}ปรุง\wbr{}เชลล์ bash ให้\wbr{}เอา\wbr{}คำ\wbr{}สั่ง\wbr{}เหล่า\wbr{}นี้\wbr{}เป็น\wbr{}คำ\wbr{}สั่ง\wbr{}ประกอบ\wbr{}ภาย\wbr{}ใน\wbr{}ด้วย. ในแพ็ก\wbr{}เกจ shellutils ยัง\wbr{}คง\wbr{}ต้อง\wbr{}เก็บ\wbr{}โปรแกรม\wbr{}คำ\wbr{}สั่ง\wbr{}เหล่า\wbr{}นี้\wbr{}ไว้\wbr{}เพื่อ\wbr{}ให้\wbr{}เข้า\wbr{}กัน\wbr{}ได้\wbr{}กับ\wbr{}เชลล์\wbr{}อื่น\wbr{}และ\wbr{}เชลล์ bash รุ่น\wbr{}เก่าๆ.

\begin{longtable}{lp{.55\textwidth}l}
\caption{โปรแกรม\wbr{}คำ\wbr{}สั่ง\wbr{}ในแพ็ก\wbr{}เกจ shellutils.}\label{tab:shellutils}\\
\toprule
\multicolumn{1}{c}{คำ\wbr{}สั่ง} & \multicolumn{1}{c}{คำ\wbr{}อธิบาย} & \multicolumn{1}{c}{อ้าง\wbr{}อิง}\\
\midrule
\cmd{[} & ตรวจ\wbr{}สอบ\wbr{}ชนิด\wbr{}ของ\wbr{}ไฟล์\wbr{}และ\wbr{}เปรียบ\wbr{}เทียบ\wbr{}ค่า. & หน้า \pageref{cmd:test}\\
\cmd{basename} & ลบ\wbr{}ส่วน\wbr{}ที่\wbr{}อยู่\wbr{}หน้า\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}ออก\wbr{}และ\wbr{}ให้\wbr{}ผล\wbr{}ลัพธ์\wbr{}เฉพาะ\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}อย่าง\wbr{}เดียว. & หน้า \pageref{cmd:basename}\\
\cmd{chroot} & เปลี่ยน\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี\wbr{}รูท.&\\
\cmd{date} & แสดง\wbr{}หรือ\wbr{}ตั้ง\wbr{}เวลา, วัน\wbr{}ที่.& หน้า \pageref{cmd:date}\\
\cmd{dirname} & ตัด\wbr{}ส่วน\wbr{}ที่\wbr{}เป็น\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}ออก\wbr{}และ\wbr{}แสดง\wbr{}เฉพาะ\wbr{}ส่วน\wbr{}ที่\wbr{}อยู่\wbr{}หน้า\wbr{}ชื่อ\wbr{}ไฟล์.& หน้า \pageref{cmd:dirname}\\
\cmd{echo} & แสดง\wbr{}บรรทัด\wbr{}ข้อ\wbr{}ความ.& หน้า \pageref{cmd:echo}\\
\cmd{env} & แสดง\wbr{}หรือ\wbr{}แก้\wbr{}ไข\wbr{}ตัวแปร\wbr{}สภาพ\wbr{}แวด\wbr{}ล้อม.& หน้า \pageref{cmd:env}\\
\cmd{expr} & ตี\wbr{}ความ\wbr{}นิพจน์ (expression).& หน้า \pageref{cmd:expr}\\
\cmd{factor} & หา\wbr{}ตัว\wbr{}ประกอบ\wbr{}ของ\wbr{}จำนวน\wbr{}เต็ม.& หน้า \pageref{cmd:factor}\\
\cmd{false} & คืน\wbr{}ค่า\wbr{}สถานะ\wbr{}การ\wbr{}จบ\wbr{}การ\wbr{}ทำ\wbr{}งาน\wbr{}ไม่\wbr{}สมบูรณ์ (false).& หน้า \pageref{cmd:false}\\
\cmd{groups} & แสดง\wbr{}กลุ่ม\wbr{}ที่\wbr{}ผู้\wbr{}ใช้\wbr{}อยู่.& หน้า \pageref{cmd:groups}\\
\cmd{hostid} & แสดง\wbr{}ค่า\wbr{}เฉพาะ\wbr{}ของ\wbr{}โฮส, เครื่อง\wbr{}คอมพิวเตอร์.&\\
\cmd{hostname} & แสดง\wbr{}ชื่อ\wbr{}โฮส.& หน้า \pageref{cmd:hostname}\\
\cmd{id} & แสดง uid และ gid.& หน้า \pageref{cmd:id}\\
\cmd{logname} & แสดง\wbr{}ชื่อล็\wbr{}อก\wbr{}อิน.& \\
\cmd{nice} & แก้\wbr{}ไข\wbr{}ลำดับ\wbr{}ความ\wbr{}สำคัญ\wbr{}ของ\wbr{}การ\wbr{}ทำ\wbr{}งาน\wbr{}โปร\wbr{}เซส (scheduling).& หน้า \pageref{nice}\\
\cmd{nohup} & อนุ\wbr{}ญาติ\wbr{}ให้\wbr{}โปรแกรม\wbr{}ที่\wbr{}ระบุ\wbr{}ทำ\wbr{}งาน\wbr{}ต่อ\wbr{}ถึง\wbr{}แม้\wbr{}ผู้\wbr{}ใช้\wbr{}จะล็\wbr{}อก\wbr{}เอาท์\wbr{}ไป\wbr{}แล้ว\wbr{}ก็\wbr{}ตาม.& หน้า \pageref{cmd:nohup}\\
\cmd{pathchk} & ตรวจ\wbr{}สอบ\wbr{}ว่า\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}สามารถ\wbr{}ใช้\wbr{}ใน\wbr{}ระบบ\wbr{}อื่นๆ (พอร์ต) ได้\wbr{}หรือ\wbr{}ไม่.&\\
\cmd{pinky} & โปรแกรม finger.&\\
\cmd{printenv} & แสดง\wbr{}ตัวแปร\wbr{}สภาพ\wbr{}แวด\wbr{}ล้อม\wbr{}และ\wbr{}ค่า\wbr{}ของ\wbr{}ตัวแปร.& หน้า \pageref{cmd:printenv}\\
\cmd{printf} & จัด\wbr{}รูป\wbr{}ข้อ\wbr{}มูล\wbr{}แล้ว\wbr{}แสดง\wbr{}ผล\wbr{}ข้อ\wbr{}มูล\wbr{}นั้น.&\\
\cmd{pwd} & แสดง\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี\wbr{}ที่\wbr{}ทำ\wbr{}งาน\wbr{}อยู่.& หน้า \pageref{cmd:pwd}\\
\cmd{seq} & แสดง\wbr{}ลำดับ\wbr{}จำนวน\wbr{}ที่\wbr{}ระบุ.& หน้า \pageref{cmd:seq}\\
\cmd{sleep} & หยุด\wbr{}การ\wbr{}ทำ\wbr{}งาน\wbr{}ชั่ว\wbr{}คราว\wbr{}ตาม\wbr{}ระยะ\wbr{}เวลา\wbr{}ที่\wbr{}กำหนด.&\\
\cmd{stty} & แสดง\wbr{}และ\wbr{}ตั้ง\wbr{}ค่า\wbr{}ของเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล.& หน้า \pageref{cmd:stty}\\
\cmd{su} & เปลี่ยน\wbr{}ผู้\wbr{}ใช้\wbr{}เป็น\wbr{}ผู้\wbr{}ใช้\wbr{}คน\wbr{}อื่น.& หน้า \pageref{cmd:su}\\
\cmd{tee} & ส่ง\wbr{}ข้อ\wbr{}มูล\wbr{}ออก\wbr{}ไป\wbr{}บันทึก\wbr{}ใน\wbr{}ไฟล์\wbr{}ที่\wbr{}ต้องการ.&\\
\cmd{test} & ทด\wbr{}สอบ\wbr{}นิพจน์.& หน้า \pageref{cmd:test}\\
\cmd{true} &  คืน\wbr{}ค่า\wbr{}สถานะ\wbr{}การ\wbr{}จบ\wbr{}การ\wbr{}ทำ\wbr{}งาน\wbr{}สมบูรณ์ (true).& หน้า \pageref{cmd:true}\\
\cmd{tty} & แสดง\wbr{}ชื่อเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล.& หน้า \pageref{cmd:tty}\\
\cmd{uname} & แสดง\wbr{}ข้อ\wbr{}มูล\wbr{}ของ\wbr{}ระบบ\wbr{}ปฏิบัติ\wbr{}การ.& หน้า \pageref{cmd:uname}\\
\cmd{users} & แสดง\wbr{}ชื่อ\wbr{}ผู้\wbr{}ใช้\wbr{}ที่ล็\wbr{}อก\wbr{}อิน\wbr{}อยู่\wbr{}ใน\wbr{}ระบบ.& หน้า \pageref{cmd:users}\\
\cmd{who} & แสดง\wbr{}ชื่อ\wbr{}ผู้\wbr{}ใช้\wbr{}ที่ล็\wbr{}อก\wbr{}อิน\wbr{}อยู่\wbr{}ใน\wbr{}ระบบ.& หน้า \pageref{cmd:who}\\
\cmd{whoami} & แสดง id ที่\wbr{}ให้\wbr{}ผล\wbr{}จริง.& หน้า \pageref{cmd:whoami}\\
\cmd{yes} & แสดง\wbr{}สาย\wbr{}อักขระ\wbr{}ที่\wbr{}ต้องการ\wbr{}ไป\wbr{}เรื่อยๆ. &\\
\bottomrule
\end{longtable}



\subsection{ตรวจ\wbr{}สอบ\wbr{}ไฟล์\wbr{}และ\wbr{}ค่า\wbr{}ต่างๆ}
คำ\wbr{}สั่ง\wbr{}ที่\wbr{}ใช้\wbr{}ตรวจ\wbr{}สอบ\wbr{}ไฟล์\wbr{}และ\wbr{}ค่า\wbr{}ต่างๆ\wbr{}ได้\wbr{}แก่\wbr{}คำ\wbr{}สั่ง \cmd{test}\refcmd{test} และ\wbr{}คำ\wbr{}สั่ง \cmd{[}. คำ\wbr{}สั่ง\wbr{}ทั้ง\wbr{}สอง\wbr{}ตัว\wbr{}เหมือน\wbr{}กัน\wbr{}เพียง\wbr{}แต่\wbr{}มี\wbr{}ไวย\wbr{}กรณ์\wbr{}ต่าง\wbr{}กัน\wbr{}ตรง\wbr{}ที่\wbr{}คำ\wbr{}สั่ง \cmd{[} ต้องการ\wbr{}เครื่อง\wbr{}หมาย \cmd{]} ปิด\wbr{}ท้าย\wbr{}เสมอ. โดย\wbr{}ปรกติ\wbr{}คำ\wbr{}สั่ง \cmd{test} มัก\wbr{}จะ\wbr{}ใช้\wbr{}ร่วม\wbr{}กับ\wbr{}ไวย\wbr{}กรณ์ \cmd{if} ของ\wbr{}เชลล์\wbr{}เพื่อ\wbr{}ตรวจ\wbr{}สอบ\wbr{}ไฟล์\wbr{}หรือ\wbr{}ค่า\wbr{}ต่างๆ.

ตัว\wbr{}อย่าง\wbr{}ต่อ\wbr{}ไป\wbr{}นี้\wbr{}เป็น\wbr{}ตัว\wbr{}อย่าง\wbr{}การ\wbr{}ตรวจ\wbr{}สอบ\wbr{}ไฟล์\wbr{}ว่า\wbr{}มี\wbr{}จริง\wbr{}หรือ\wbr{}ไม่\wbr{}ด้วย\wbr{}ตัว\wbr{}เลือก \cmd{-e}.
\begin{MyExample}[ตรวจ\wbr{}สอบ\wbr{}ว่า\wbr{}มี\wbr{}ไฟล์\wbr{}หรือ\wbr{}ไม่.]
\begin{MyEx}
$ \cin{test -e /etc/passwd}
$ \cin{[ -e /etc/passwd ]}
\end{MyEx}
\end{MyExample}
เรา\wbr{}จะ\wbr{}เรียก ``\cmd{-e /etc/passwd}'' ว่า\wbr{}เป็น\emph{นิพจน์ (expression)}\myvocab{e}{expression}{\emph{นิพจน์}. ประโยค\wbr{}ที่\wbr{}แสดง\wbr{}ความ\wbr{}หมาย\wbr{}อย่าง\wbr{}ใด\wbr{}อย่าง\wbr{}หนึ่ง.} และ\wbr{}คำ\wbr{}สั่ง \cmd{test} จะ\wbr{}ตรวจ\wbr{}สอบ\wbr{}ว่า\wbr{}นิพจน์\wbr{}นั้น\wbr{}จริง\wbr{}หรือ\wbr{}เท็จ. คำ\wbr{}สั่ง \cmd{test} จะ\wbr{}ไม่\wbr{}แสดง\wbr{}ผล\wbr{}ออก\wbr{}ทาง\wbr{}หน้า\wbr{}จอ\wbr{}ไม่\wbr{}ว่า\wbr{}จะ\wbr{}จริง\wbr{}หรือ\wbr{}เท็จ, แต่\wbr{}จะ\wbr{}ใช้\wbr{}ตัวแปร\wbr{}สถานะ\wbr{}จบ\wbr{}การ\wbr{}ทำ\wbr{}งาน ``\cmd{\$?}'' บอ\wbr{}กว่า\wbr{}จริง\wbr{}หรือ\wbr{}เท็จ. ถ้า\wbr{}การ\wbr{}ตรวจ\wbr{}สอบ\wbr{}เป็น\wbr{}จริง\wbr{}จะ\wbr{}มี\wbr{}ค่า\wbr{}เป็น 0, ถ้า\wbr{}เป็น\wbr{}เท็จ\wbr{}จะ\wbr{}มี\wbr{}ค่า\wbr{}เป็น\wbr{}ค่า\wbr{}อื่นๆ\wbr{}ที่\wbr{}ไม่\wbr{}ใช่ 0.

ตัว\wbr{}อย่าง\wbr{}ต่อ\wbr{}ไป\wbr{}นี้\wbr{}เป็น\wbr{}การ\wbr{}ตรวจ\wbr{}สอบ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{test} ร่วม\wbr{}กับ \cmd{if}.
\begin{MyExample}[การ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{test} ร่วม\wbr{}กับ \cmd{if}.]
\begin{MyEx}
$ \cin{if}
> \cin{[ -f /etc/shadow -a `whoami` == root ]}
> \cin{then}
> \cin{echo You are root and file /etc/shadow existed.}
> \cin{else}
> \cin{echo You are not root or file /etc/shadow does not exist.}
> \cin{fi}
You are not root or file /etc/shadow does not exist.
\end{MyEx}
\end{MyExample}%$

คำ\wbr{}สั่ง \cmd{if} จะ\wbr{}ตรวจ\wbr{}สอบ\wbr{}ตัวแปร\wbr{}สถานะ\wbr{}จบ\wbr{}การ\wbr{}ทำ\wbr{}งาน\wbr{}ถ้า\wbr{}เป็น\wbr{}จริง\wbr{}ก็\wbr{}จะ\wbr{}กระทำ\wbr{}ส่วน\wbr{}ที่\wbr{}ต่อ\wbr{}จาก \cmd{then} ถ้า\wbr{}เป็น\wbr{}เท็จ\wbr{}ก็\wbr{}จะ\wbr{}กระทำ\wbr{}ส่วน\wbr{}ที่\wbr{}ต่อ\wbr{}จาก \cmd{else}. จาก\wbr{}ตัว\wbr{}อย่าง\wbr{}มี\wbr{}การ\wbr{}เชื่อม\wbr{}นิพจน์\wbr{}ด้วย \cmd{-a} ซึ่ง\wbr{}นิพจน์\wbr{}ทั้ง\wbr{}สอง\wbr{}ที่\wbr{}ถูก\wbr{}เชื่อม\wbr{}ต้อง\wbr{}เป็น\wbr{}จริง\wbr{}แล้ว\wbr{}นิพจน์\wbr{}โดย\wbr{}รวม\wbr{}จะ\wbr{}เป็น\wbr{}จริง.

คำ\wbr{}สั่ง \cmd{test} สามารถ\wbr{}ตรวจ\wbr{}สอบ\wbr{}ประเภท\wbr{}ไฟล์, สิทธิ์\wbr{}การ\wbr{}ใช้\wbr{}ไฟล์\wbr{}เบื้อง\wbr{}ต้น, เปรียบ\wbr{}เทียบ\wbr{}ค่า\wbr{}สาย\wbr{}อักขระ, และ\wbr{}เปรียบ\wbr{}เทียบ\wbr{}จำนวน\wbr{}เต็ม. ราย\wbr{}ละเอียด\wbr{}เหล่า\wbr{}นี้\wbr{}ดู\wbr{}ได้\wbr{}จาก\wbr{}สรุป\wbr{}การ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง\wbr{}หน้า \pageref{cmd:test}.



\subsection{สกัด\wbr{}ส่วน\wbr{}ของ\wbr{}ชื่อ\wbr{}ไฟล์}
เวลา\wbr{}ใช้\wbr{}เชลล์\wbr{}จะ\wbr{}มี\wbr{}บาง\wbr{}กรณี\wbr{}ที่\wbr{}เรา\wbr{}ต้องการ\wbr{}สกัด\wbr{}ส่วน\wbr{}ของ\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}มา\wbr{}เพื่อ\wbr{}กระทำ\wbr{}การ\wbr{}อย่าง\wbr{}ใด\wbr{}อย่าง\wbr{}หนึ่ง. คำ\wbr{}สั่ง\wbr{}ที่\wbr{}ช่วย\wbr{}แยก\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}หรือ\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี\wbr{}จริงๆ\wbr{}ออก\wbr{}จาก\wbr{}ส่วน\wbr{}เป็น\wbr{}พาท (path) ของ\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}คือ\wbr{}คำ\wbr{}สั่ง \cmd{basename}\cindex{basename}\refcmd{basename} และ \cmd{dirname}\cindex{dirname}\refcmd{dirname}. คำ\wbr{}สั่ง\wbr{}สอง\wbr{}คำ\wbr{}สั่ง\wbr{}นี้\wbr{}ไม่\wbr{}ได้\wbr{}ทำ\wbr{}อะไร\wbr{}มาก\wbr{}เพียง\wbr{}แต่\wbr{}สกัด\wbr{}ส่วน\wbr{}ที่\wbr{}ต้องการ\wbr{}ให้\wbr{}เท่า\wbr{}นั้น. มี\wbr{}ประโยชน์\wbr{}เมื่อ\wbr{}ใช้\wbr{}เขียน\wbr{}เชลล์สค\wbr{}ริปต์.

\begin{MyExample}[การ\wbr{}สกัด\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}หรือ\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี\wbr{}จาก\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}แบบ full path.]
\begin{MyEx}
$ \cin{basename /usr/local/bin/test.pl}
test.pl
$ \cin{basename /usr/local/bin/test.pl .pl} \mycomment{\cmd{.pl} คือ\wbr{}ส่วน\wbr{}ที่\wbr{}ต้องการ\wbr{}ตัด\wbr{}ออก\wbr{}จาก\wbr{}ชื่อ\wbr{}ไฟล์.}
test
$ \cin{dirname /usr/local/bin/test.pl}
/usr/local/bin
$ \cin{basename /home/}
home \mycomment{ผล\wbr{}ลัพธ์\wbr{}จะ\wbr{}ตัด\wbr{}เครื่อง\wbr{}หมาย \cmd{\bs} ให้\wbr{}ด้วย.}
$ \cin{dirname /home/}
/
\end{MyEx}
\end{MyExample}%$

จาก\wbr{}ตัว\wbr{}อย่าง\wbr{}จะ\wbr{}เห็น\wbr{}ว่า\wbr{}คำ\wbr{}สั่ง \cmd{basename} สามารถ\wbr{}สกัด\wbr{}เอา\wbr{}ส่วน\wbr{}ขยาย\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}ออก\wbr{}ได้\wbr{}ด้วย\wbr{}ถ้า\wbr{}ระบุ\wbr{}ตาม\wbr{}หลัง\wbr{}ชื่อ\wbr{}ไฟล์. คำ\wbr{}สั่ง\wbr{}ที่\wbr{}เกี่ยว\wbr{}กับ\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}อีก\wbr{}ตัว\wbr{}คือ \cmd{pathchk}\cindex{pathchk} ใช้\wbr{}สำหรับ\wbr{}ตรวจ\wbr{}ดู\wbr{}ว่า\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}นั้น\wbr{}มี\wbr{}รูป\wbr{}แบบ\wbr{}ถูก\wbr{}ต้อง\wbr{}หรือ\wbr{}ไม่\wbr{}เช่น\wbr{}จำนวน\wbr{}อักษร\wbr{}ที่\wbr{}ใช้\wbr{}ใน\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}เกิน\wbr{}ขีด\wbr{}จำกัด\wbr{}หรือ\wbr{}ไม่\wbr{}เป็นต้น. คำ\wbr{}สั่ง \cmd{pathchk} เป็น\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}ไม่\wbr{}ค่อย\wbr{}ใช้.

\subsection{ถูก\wbr{}ผิด}
คำ\wbr{}สั่ง \cmd{true}\cindex{true}\refcmd{true} และ \cmd{false}\cindex{false}\refcmd{false} ไม่\wbr{}ได้\wbr{}ทำ\wbr{}อะไร\wbr{}เป็น\wbr{}พิเศษ\wbr{}เพียง\wbr{}แต่\wbr{}ตั่ง\wbr{}ค่า\wbr{}สถานะ\wbr{}จบ\wbr{}การ\wbr{}ทำ\wbr{}งาน\wbr{}เป็น 0 (\cmd{true}) หรือ 1 \cmd{false} ตาม\wbr{}ต้องการ. มัก\wbr{}จะ\wbr{}ใช้\wbr{}ใน\wbr{}การ\wbr{}เขียน\wbr{}เชลล์สค\wbr{}ริปต์\wbr{}ใช้\wbr{}ใน\wbr{}การ\wbr{}ตั้ง\wbr{}ค่า\wbr{}ตัวแปร\wbr{}สถานะ\wbr{}จบ\wbr{}การ\wbr{}ทำ\wbr{}งาน. ถ้า\wbr{}การ\wbr{}ทำ\wbr{}งาน\wbr{}จบ\wbr{}บริบูรณ์\wbr{}ถูก\wbr{}ต้อง\wbr{}ก็\wbr{}สั่ง\wbr{}คำ\wbr{}สั่ง \cmd{true} เป็น\wbr{}คำ\wbr{}สั่ง\wbr{}สุด\wbr{}ท้าย. ถ้า\wbr{}มี\wbr{}ข้อ\wbr{}ผิด\wbr{}พลาด\wbr{}ก็\wbr{}สั่ง\wbr{}คำ\wbr{}สั่ง \cmd{false}.

\subsection{คำ\wbr{}สั่ง\wbr{}เกี่ยว\wbr{}กับ\wbr{}ข้อ\wbr{}มูล\wbr{}ของ\wbr{}ระบบ}
ใน\wbr{}ระบบ\wbr{}ปฏิบัติ\wbr{}การ\wbr{}ลิ\wbr{}นุกซ์\wbr{}จะ\wbr{}มี\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}แสดง\wbr{}ข้อ\wbr{}มูล\wbr{}เบื้อง\wbr{}ต้น\wbr{}เกี่ยว\wbr{}กับ\wbr{}ระบบ\wbr{}และ\wbr{}ผู้\wbr{}ใช้\wbr{}ใน\wbr{}ระบบ\wbr{}หลาย\wbr{}ตัว. คำ\wbr{}สั่ง\wbr{}ที่\wbr{}บอ\wbr{}กว่า\wbr{}ผู้\wbr{}ใช้\wbr{}ตอน\wbr{}นี้\wbr{}คือ\wbr{}ใคร\wbr{}ได้\wbr{}แก่ \cmd{id}, \cmd{whoami} และ \cmd{logname}\cindex{logname}. คำ\wbr{}สั่ง \cmd{whoami} จะ\wbr{}เหมือน\wbr{}กับ\wbr{}การ\wbr{}สั่ง\wbr{}คำ\wbr{}สั่ง ``\cmd{id -un}''. คำ\wbr{}สั่ง \cmd{id} จะ\wbr{}ให้\wbr{}ข้อ\wbr{}มูล\wbr{}เกี่ยว\wbr{}กับ\wbr{}กลุ่ม\wbr{}ด้วย, ส่วน\wbr{}คำ\wbr{}สั่ง \cmd{logname} จะ\wbr{}แสดง\wbr{}เฉพาะ\wbr{}ชื่อล็\wbr{}อก\wbr{}อิน\wbr{}เท่า\wbr{}นั้น. ถ้า\wbr{}ต้องการ\wbr{}ดู\wbr{}แค่\wbr{}กลุ่ม\wbr{}ที่\wbr{}ตัว\wbr{}เอง\wbr{}อยู่\wbr{}ก็\wbr{}ให้\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{groups}\cindex{groups}\refcmd{groups}.

คำ\wbr{}สั่ง \cmd{hostid}\cindex{hostid} เป็น\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}แสดง\wbr{}หมาย\wbr{}เลข\wbr{}เฉพาะ\wbr{}ประจำ\wbr{}เครื่อง. หมาย\wbr{}เลข\wbr{}นี้\wbr{}จะ\wbr{}ไม่\wbr{}ซ้ำ\wbr{}กับ\wbr{}เครื่อง\wbr{}อื่นๆ\wbr{}และ\wbr{}สามารถ\wbr{}ใช้\wbr{}ใน\wbr{}การ\wbr{}ควบ\wbr{}คุม\wbr{}การ\wbr{}ติด\wbr{}ตั้ง\wbr{}ซอฟต์แวร์\wbr{}ที่\wbr{}ต้องการ\wbr{}ยึด\wbr{}ติด\wbr{}กับ\wbr{}เครื่อง. ซอฟต์แวร์\wbr{}บาง\wbr{}ตัว\wbr{}สามารถ\wbr{}ตรวจ\wbr{}สอบ \cmd{hostid} เพื่อ\wbr{}ดู\wbr{}ว่า\wbr{}เครื่อง\wbr{}นั้น\wbr{}มี\wbr{}สิทธิ์\wbr{}รัน\wbr{}ซอฟต์แวร์\wbr{}นั้น\wbr{}ได้\wbr{}หรือ\wbr{}ไม่. แต่\wbr{}ปัจจุบัน\wbr{}ไม่\wbr{}ค่อย\wbr{}ใช้\wbr{}วิธี\wbr{}การ\wbr{}ตรวจ\wbr{}สอบ \cmd{hostid} แล้ว\wbr{}เพราะ\wbr{}ค่า\wbr{}เหล่า\wbr{}สามารถ\wbr{}ปลอม\wbr{}กัน\wbr{}ได้. คำ\wbr{}สั่ง\wbr{}ที่\wbr{}เกี่ยว\wbr{}กับ\wbr{}คอมพิวเตอร์\wbr{}อีก\wbr{}ตัว\wbr{}คือ \cmd{hostname}\refcmd{hostname}\cindex{hostname} ใช้\wbr{}แสดง\wbr{}ชื่อ\wbr{}เครื่อง\wbr{}หรือ\wbr{}ตั้ง\wbr{}ชื่อ\wbr{}เครื่อง\wbr{}คอมพิวเตอร์. ชื่อ\wbr{}โฮส\wbr{}ดัง\wbr{}กล่า\wbr{}วจะ\wbr{}ใช้\wbr{}กับ\wbr{}โปรแกรม\wbr{}ที่\wbr{}เกี่ยว\wbr{}กับเน็ตเ\wbr{}วิร์ก\wbr{}ต่างๆ\wbr{}เพื่อ\wbr{}ระบุ\wbr{}ตัว\wbr{}เครื่อง.

คำ\wbr{}สั่ง\wbr{}ที่\wbr{}ใช้\wbr{}แสดง\wbr{}ข้อ\wbr{}มูล\wbr{}เบื้อง\wbr{}ต้น\wbr{}เกี่ยว\wbr{}กับเ\wbr{}คอร์เนล\wbr{}ได้\wbr{}แก่ \cmd{uname}\cindex{uname}\refcmd{uname}. โดย\wbr{}ปรกติ\wbr{}จะ\wbr{}ใช้\wbr{}กับ\wbr{}ตัว\wbr{}เลือก \cmd{-a} เพื่อ\wbr{}แสดง\wbr{}ข้อ\wbr{}มูล\wbr{}ทั้ง\wbr{}หมด\wbr{}เช่น รุ่น\wbr{}ของเ\wbr{}คอร์เนล, สถาปัตยกรรม\wbr{}ของ\wbr{}เครื่อง, ข้อ\wbr{}มูล\wbr{}เบื้อง\wbr{}ต้น\wbr{}ของ\wbr{}หน่วย\wbr{}ประมวล\wbr{}ผล ฯลฯ. ข้อ\wbr{}มูล\wbr{}เหล่า\wbr{}นี้\wbr{}มี\wbr{}ความ\wbr{}สำคัญ\wbr{}เวลา\wbr{}ใช้\wbr{}โปรแกรม\wbr{}หรือ\wbr{}ไดร์\wbr{}เวอร์\wbr{}ที่\wbr{}ขึ้น\wbr{}อยู่\wbr{}กับ\wbr{}รุ่น\wbr{}ของเ\wbr{}คอร์เนล, เป็น\wbr{}วิธี\wbr{}ที่\wbr{}ตรวจ\wbr{}สอบ\wbr{}ว่า\wbr{}ลิ\wbr{}นุกซ์\wbr{}ที่\wbr{}เรา\wbr{}ใช้\wbr{}อยู่\wbr{}นั้น\wbr{}ใช้เ\wbr{}คอร์เนล\wbr{}รุ่น\wbr{}ไหน\wbr{}อยู่.

\subsection{สำรวจ\wbr{}ผู้\wbr{}ใช้\wbr{}ที่ล็\wbr{}อก\wbr{}อิน}
คำ\wbr{}สั่ง\wbr{}ที่\wbr{}ใช้\wbr{}ตรวจ\wbr{}สอบ\wbr{}ดู\wbr{}ว่า\wbr{}ขณะ\wbr{}นี้\wbr{}มี\wbr{}ใคร\wbr{}บ้าง\wbr{}ที่ล็\wbr{}อก\wbr{}อิน\wbr{}อยู่\wbr{}ใน\wbr{}ระบบ\wbr{}ได้\wbr{}แก่\wbr{}คำ\wbr{}สั่ง \cmd{users} และ \cmd{who}. คำ\wbr{}สั่ง \cmd{users} จะ\wbr{}อาศัย\wbr{}ข้อ\wbr{}มูล\wbr{}จาก\wbr{}ไฟล์ \cmd{/var/run/utmp}\gindex{utmp@ไฟล์ \cmd{/var/run/utmp}} โดย\wbr{}ปริยาย\wbr{}หรือ\wbr{}อาศัย\wbr{}ข้อ\wbr{}มูล\wbr{}จาก\wbr{}ไฟล์ \cmd{/var/log/wtmp}\gindex{wtmp@ไฟล์ \cmd{/var/log/wtmp}}. ไฟล์ \cmd{utmp} เป็น\wbr{}ไฟล์ไบ\wbr{}นารี\wbr{}ที่\wbr{}เก็บ\wbr{}ข้อ\wbr{}มูล\wbr{}ผู้\wbr{}ใช้\wbr{}ที่\wbr{}กำลัง\wbr{}อยู่\wbr{}ใน\wbr{}ระบบ. ส่วน\wbr{}ไฟล์ \cmd{wtmp} เป็น\wbr{}ไฟล์\wbr{}เก็บ\wbr{}ข้อ\wbr{}มูลล็\wbr{}อก\wbr{}อิน\wbr{}และล็\wbr{}อก\wbr{}เอาท์\wbr{}ของ\wbr{}ผู้\wbr{}ใช้, เวลา\wbr{}ที่\wbr{}ระบบ\wbr{}เริ่ม\wbr{}ทำ\wbr{}งาน (startup) และ\wbr{}จบ\wbr{}การ\wbr{}ทำ\wbr{}งาน (shutdown) ด้วย. คำ\wbr{}สั่ง \cmd{users} จะ\wbr{}แสดง\wbr{}แค่\wbr{}ชื่อล็\wbr{}อก\wbr{}อิน\wbr{}ของ\wbr{}ผู้\wbr{}ที่ล็\wbr{}อก\wbr{}อิน\wbr{}อยู่\wbr{}ใน\wbr{}ระบบ\wbr{}ไม่\wbr{}มี\wbr{}ข้อ\wbr{}มูล\wbr{}อื่น\wbr{}เพิ่ม\wbr{}เติม. เมื่อ\wbr{}เทียบ\wbr{}กับ\wbr{}คำ\wbr{}สั่ง \cmd{who}\cindex{who}\refcmd{who} จะ\wbr{}ให้\wbr{}ข้อ\wbr{}มูล\wbr{}มาก\wbr{}กว่า\wbr{}คำ\wbr{}สั่ง \cmd{users}.


\begin{MyExample}[สำรวจ\wbr{}ผู้\wbr{}ใช้\wbr{}ที่ล็\wbr{}อก\wbr{}อิน\wbr{}อยู่\wbr{}ใน\wbr{}ระบบ\wbr{}ด้วย \cmd{who}.]
\begin{MyEx}
$ \cin{who -Hu}
NAME     LINE         TIME         IDLE          PID COMMENT
poonlap  :0           Sep 13 19:53   ?          8395
poonlap  pts/2        Sep 13 19:54   .         10444 (:0.0)
poonlap  pts/3        Sep 13 21:05 00:24       10444 (:0.0)
poonlap  pts/4        Sep 13 21:05   .         10444 (:0.0)
root     pts/5        Sep 13 21:29   .         26565 (10.0.0.196)
\end{MyEx}
\end{MyExample}%$

เรา\wbr{}สามารถ\wbr{}รู้\wbr{}ได้\wbr{}ว่า\wbr{}ผู้\wbr{}ใช้ล็\wbr{}อก\wbr{}อิน\wbr{}เข้า\wbr{}มา\wbr{}ทาง\wbr{}ไหน\wbr{}ได้\wbr{}จาก\wbr{}คอลัมน์ LINE และ COMMENT. คอลัมน์ LINE จะ\wbr{}แสดงเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}ที่\wbr{}ผู้\wbr{}ใช้\wbr{}ใช้\wbr{}อยู่. \cmd{pts}\gindex{pts} หมาย\wbr{}ถึง pseudo-terminal\gindex{pseudo-terminal}\mymemo{อ่าน \cmd{man pts} เกี่ยว\wbr{}กับ\wbr{}ราย\wbr{}ละเอียด\wbr{}ของ \cmd{pts}.} คือเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}เสมือน\wbr{}ที่\wbr{}ใช้\wbr{}อยู่\wbr{}ในเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}เอ\wbr{}มิวเล\wbr{}เตอร์. \cmd{:0} แสดง\wbr{}ว่า\wbr{}ผู้\wbr{}ใช้ล็\wbr{}อก\wbr{}อิน\wbr{}ผ่าน\wbr{}ทาง X Display Manager. ใน\wbr{}คอลัมน์ COMMENT จะ\wbr{}แสดง IP address ถ้า\wbr{}ผู้\wbr{}ใช้ล็\wbr{}อก\wbr{}อิน\wbr{}ผ่าน\wbr{}ทางเน็ตเ\wbr{}วิร์ก. ใน\wbr{}คอลัมน์ TIME จะ\wbr{}แสดง\wbr{}วัน\wbr{}และ\wbr{}เวลา\wbr{}ที่\wbr{}ผู้\wbr{}ใช้ล็\wbr{}อก\wbr{}อิน. IDLE จะ\wbr{}แสดง\wbr{}เวลา\wbr{}ที่\wbr{}ว่าง\wbr{}เฉย. เวลา IDLE นี้\wbr{}บอก\wbr{}ให้\wbr{}เรา\wbr{}ทราบ\wbr{}เวลา\wbr{}ที่\wbr{}ผู้\wbr{}ใช้\wbr{}นั้นล็\wbr{}อก\wbr{}อิน\wbr{}อยู่\wbr{}แต่\wbr{}ไม่\wbr{}ได้\wbr{}กระทำ\wbr{}การ\wbr{}ใดๆ\wbr{}ใน\wbr{}ระบบ. PID จะ\wbr{}แสดง\wbr{}หมาย\wbr{}เลข\wbr{}โปร\wbr{}เซส\wbr{}ของ\wbr{}โปรแกรม\wbr{}ที่\wbr{}ใช้\wbr{}หลังล็\wbr{}อก\wbr{}อิน.

คำ\wbr{}สั่ง\wbr{}ที่\wbr{}คล้าย\wbr{}กับ \cmd{who} คือ \cmd{w}\cindex{w}\refcmd{w} แต่\wbr{}จะ\wbr{}แสดง\wbr{}ราย\wbr{}ละเอียด\wbr{}เน้น\wbr{}การ\wbr{}ใช้\wbr{}งาน\wbr{}ของ\wbr{}หน่วย\wbr{}ประมวล\wbr{}ผล\wbr{}และ\wbr{}อ่าน\wbr{}เข้า\wbr{}ใจ\wbr{}ง่าย\wbr{}กว่า\wbr{}คำ\wbr{}สั่ง \cmd{who}.

\begin{MyExample}[ใช้\wbr{}คำ\wbr{}สั่ง \cmd{w} ดู\wbr{}ผู้\wbr{}ใช้\wbr{}ที่ล็\wbr{}อก\wbr{}อิน\wbr{}และ\wbr{}โปรแกรม\wbr{}ที่\wbr{}ใช้.]
\begin{MyEx}
$ \cin{w}
 21:53:17 up  2:02,  5 users,  load average: 0.15, 0.28, 0.32
USER     TTY        LOGIN@   IDLE   JCPU   PCPU WHAT
poonlap  :0        19:53   ?xdm?  15:28   0.60s gnome-session
poonlap  pts/2     19:54    0.00s  2:11   0.00s w
poonlap  pts/3     21:05    2:35   0.00s  0.00s -bash
poonlap  pts/4     21:05   23:04  32.25s  0.67s xmms
root     pts/5     21:29   23:53   0.00s  0.00s -bash
\end{MyEx}
\end{MyExample}%$

ใน\wbr{}บรรทัด\wbr{}แรก\wbr{}ของ\wbr{}คำ\wbr{}สั่ง \cmd{w} จะ\wbr{}แสดง\wbr{}เวลา\wbr{}ปัจจุบัน, ระยะ\wbr{}เวลา\wbr{}ที่\wbr{}ระบบ\wbr{}ทำ\wbr{}งาน\wbr{}ตั้ง\wbr{}แต่\wbr{}เปิด\wbr{}เครื่อง, จำนวน\wbr{}ผู้\wbr{}ใช้\wbr{}ที่ล็\wbr{}อก\wbr{}อิน\wbr{}ใน\wbr{}ระะบ, และ\emph{โ\wbr{}หลด\wbr{}โดย\wbr{}เฉลี่ย (load average)}\myvocab{l}{load average}{\emph{โ\wbr{}หลด\wbr{}โดย\wbr{}เฉลี่ย}. ค่า\wbr{}เฉลี่ย\wbr{}ของ\wbr{}จำนวน\wbr{}โปร\wbr{}เซส\wbr{}ที่ active อยู่\wbr{}ใน\wbr{}ระบบ. ค่า\wbr{}นี้\wbr{}จะ\wbr{}แสดง\wbr{}ให้\wbr{}ทราบ\wbr{}ว่า\wbr{}ระบบ\wbr{}ยุ่ง\wbr{}หรือ\wbr{}ไม่. ค่า\wbr{}นี้\wbr{}ไม่\wbr{}จำ\wbr{}เป็น\wbr{}ต้อง\wbr{}สัมพันธ์\wbr{}กับ\wbr{}เปอร์เซ็นต์\wbr{}การ\wbr{}ใช้\wbr{}งาน\wbr{}ของ\wbr{}หน่วย\wbr{}ประมวล\wbr{}ผล.}\gindex{load average} ใน\wbr{}ช่วง\wbr{}เวลา 1, 5 และ 15 นาที\wbr{}ที่\wbr{}ผ่าน\wbr{}มา. บรรทัด\wbr{}ถัด\wbr{}จาก\wbr{}นั้น\wbr{}จะ\wbr{}แสดง\wbr{}ชื่อ\wbr{}ผู้\wbr{}ใช้\wbr{}ที่ล็\wbr{}อก\wbr{}อิน\wbr{}และ\wbr{}ราย\wbr{}ละเอียด\wbr{}ต่างๆ\wbr{}คล้าย\wbr{}กับ\wbr{}คำ\wbr{}สั่ง \cmd{who}. JCPU\gindex{jcpu@JCPU} คือ\wbr{}ระยะ\wbr{}เวลา\wbr{}หน่วย\wbr{}ประมวล\wbr{}ใช้\wbr{}ไป\wbr{}กับ\wbr{}โปรแกรม\wbr{}ที่\wbr{}กระทำ\wbr{}อยู่\wbr{}ในเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}นั้น\wbr{}ไม่\wbr{}ว่า\wbr{}จะ\wbr{}เป็น\wbr{}โปร\wbr{}เซส foreground หรือ background. PCPU\gindex{pcpu@PCPU} คือ\wbr{}ระยะ\wbr{}เวลา\wbr{}หน่วย\wbr{}ประมวล\wbr{}ใช้\wbr{}ไป\wbr{}กับ\wbr{}โปรแกรม\wbr{}ที่\wbr{}กระทำ\wbr{}อยู่\wbr{}ขณะ\wbr{}นั้น\wbr{}ในเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล, ได้\wbr{}แก่\wbr{}โปรแกรม\wbr{}ที่\wbr{}แสดง\wbr{}ใน\wbr{}คอลัมน์ WHAT.

บรรทัด\wbr{}แรก\wbr{}ของ\wbr{}คำ\wbr{}สั่ง \cmd{w} เป็น\wbr{}ข้อ\wbr{}มูล\wbr{}สถิติ\wbr{}การ\wbr{}ทำ\wbr{}งาน\wbr{}ระบบ\wbr{}โดย\wbr{}ทั่ว\wbr{}ไป\wbr{}ซึ่ง\wbr{}สามารถ\wbr{}แสดง\wbr{}ได้\wbr{}ด้วย\wbr{}คำ\wbr{}สั่ง\wbr{}ต่าง\wbr{}หาก\wbr{}คือ \cmd{uptime}\cindex{uptime}\refcmd{uptime} ซึ่ง\wbr{}จะ\wbr{}ให้\wbr{}ผล\wbr{}เหมือน\wbr{}กัน.

คำ\wbr{}สั่ง\wbr{}ที่\wbr{}เกี่ยว\wbr{}ข้อง\wbr{}แต่\wbr{}ไม่\wbr{}ได้\wbr{}อยู่\wbr{}ในแพ็ก\wbr{}เกจ shellutils อีก\wbr{}คำ\wbr{}สั่ง\wbr{}คือ \cmd{last}\cindex{last}\refcmd{last}.
\begin{MyExample}[ดู\wbr{}สถิติ\wbr{}การล็\wbr{}อก\wbr{}อิน\wbr{}ด้วย \cmd{last}.]
\begin{MyEx}
$ \cin{last -n 5}
poonlap  pts/3        yahoobb219037040 Mon Sep 13 22:28   still logged in
xxxxx    pts/3        yahoobb219215060 Mon Sep 13 22:02 - 22:04  (00:01)
xxxxx    pts/1        yahoobb219215060 Mon Sep 13 21:59   still logged in
poonlap  pts/1        yahoobb219037040 Sun Sep 12 15:10 - 15:17  (00:07)
xxxxx    pts/1        yahoobb219215060 Sun Sep 12 12:15 - 12:21  (00:06)

wtmp begins Wed Sep  1 13:46:59 2004
\end{MyEx}
\end{MyExample}%$

คำ\wbr{}สั่ง \cmd{last} จะ\wbr{}แสดงเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}ที่\wbr{}ใช้, IP address หรือ\wbr{}ชื่อ\wbr{}โฮส\wbr{}ที่\wbr{}ใช้ล็\wbr{}อก\wbr{}อิน\wbr{}เข้า\wbr{}มา (ถ้า\wbr{}มี), และ\wbr{}ข้อ\wbr{}มูล\wbr{}เวลาล็\wbr{}อก\wbr{}อิน\wbr{}และล็\wbr{}อก\wbr{}เอาท์\wbr{}ของ\wbr{}ผู้\wbr{}ใช้\wbr{}แต่\wbr{}ละ\wbr{}คน. เนื่อง\wbr{}จาก\wbr{}คำ\wbr{}สั่ง \cmd{last} ใช้\wbr{}ข้อ\wbr{}มูล\wbr{}จาก\wbr{}ไฟล์ \cmd{/var/log/wtmp} ดัง\wbr{}นั้น\wbr{}จะ\wbr{}มี\wbr{}ข้อ\wbr{}มูล\wbr{}เวลา\wbr{}เกี่ยว\wbr{}กับ\wbr{}การ\wbr{}รีบูต, เปิด\wbr{}เครื่อง, และ\wbr{}ปิด\wbr{}เครื่อง\wbr{}ด้วย\wbr{}ถ้า\wbr{}ใช้\wbr{}ร่วม\wbr{}กับ\wbr{}ตัว\wbr{}เลือก \cmd{-x}.

คำ\wbr{}สั่ง\wbr{}นี้\wbr{}ยัง\wbr{}สามารถ\wbr{}ดู\wbr{}ผู้\wbr{}ใช้\wbr{}ที่\wbr{}ใช้เ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}ที่\wbr{}ระบุ\wbr{}ได้\wbr{}ด้วย. ตัว\wbr{}อย่าง\wbr{}เช่น\wbr{}เรา\wbr{}มีเ\wbr{}ซิฟร์\wbr{}เวอร์\wbr{}อยู่\wbr{}ใน\wbr{}ห้อง\wbr{}ที่\wbr{}แยก\wbr{}ต่าง\wbr{}หาก\wbr{}คน\wbr{}โดย\wbr{}ทั่ว\wbr{}ไป\wbr{}ไม่\wbr{}สามารถ\wbr{}ใช้\wbr{}คอน\wbr{}โซล\wbr{}ได้\wbr{}ง่ายๆ. ถ้า\wbr{}ต้องการ\wbr{}ดู\wbr{}ชื่อ\wbr{}ผู้\wbr{}ใช้\wbr{}และ\wbr{}เวลา\wbr{}ของ\wbr{}คน\wbr{}ที่\wbr{}ใช้\wbr{}คอน\wbr{}โซล\wbr{}ก็\wbr{}สามารถ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง ``\cmd{last vc/1}''\mymemo{ชื่อเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}ของ\wbr{}คอน\wbr{}โซล\wbr{}ใน\wbr{}บาง\wbr{}ระบบ\wbr{}อาจ\wbr{}จะ\wbr{}ไม่\wbr{}ใช่ \cmd{vc/1} เช่น\wbr{}ใน Debian จะ\wbr{}เป็น \cmd{tty1}.} ระบุเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}เสมือน (คอน\wbr{}โซล) อัน\wbr{}แรก (\cmd{Ctrl+Alt+F1}) ดู\wbr{}คน\wbr{}ที่\wbr{}ใช้\wbr{}คอน\wbr{}โซล\wbr{}และ\wbr{}เวลา\wbr{}ได้.

ใน\wbr{}กรณี\wbr{}ที่\wbr{}ผู้\wbr{}ใช้ล็\wbr{}อก\wbr{}อิน\wbr{}ผิด\wbr{}พลาด\wbr{}เช่น\wbr{}พิมพ์\wbr{}ชื่อ\wbr{}หรือ\wbr{}รหัส\wbr{}ผ่าน\wbr{}ผิด. ถ้า\wbr{}ใน\wbr{}ระบบ\wbr{}มี\wbr{}ไฟล์ \cmd{/var/{\wbr}log/{\wbr}btmp}\mymemo{บาง\wbr{}ระบบ\wbr{}ไม่\wbr{}มี\wbr{}ไฟล์ \cmd{btmp} อาจ\wbr{}จะ\wbr{}ใช้ \cmd{touch} สร้าง\wbr{}ไฟล์\wbr{}นี้\wbr{}ให้\wbr{}ทำ\wbr{}งาน\wbr{}ได้.}\gindex{btmp@ไฟล์ btmp}, ก็\wbr{}จะ\wbr{}บันทึก\wbr{}ความ\wbr{}ผิด\wbr{}พลาด\wbr{}ที่\wbr{}เกี่ยว\wbr{}กับ\wbr{}การล็\wbr{}อก\wbr{}อิน\wbr{}ไว้\wbr{}ด้วย\wbr{}ใน\wbr{}ไฟล์\wbr{}นี้. ไฟล์ \cmd{btmp} เป็น\wbr{}ไฟล์\wbr{}ประเภท\wbr{}เดียว\wbr{}กับ \cmd{utmp} และ \cmd{wtmp} คือ\wbr{}เก็บ\wbr{}ข้อ\wbr{}มูล\wbr{}เวลา\wbr{}เกี่ยว\wbr{}กับ\wbr{}การล็\wbr{}อก\wbr{}อินล็\wbr{}อก\wbr{}เอาท์. ใน\wbr{}ระบบ\wbr{}จะ\wbr{}มี\wbr{}คำ\wbr{}สั่ง \cmd{lastb}\mymemo{``b'' ย่อ\wbr{}มา\wbr{}จาก bad.}\cindex{lastb} สำหรับ\wbr{}ดู\wbr{}ว่า\wbr{}ใครล็\wbr{}อก\wbr{}อิน\wbr{}พลาด\wbr{}บ้าง.

\begin{MyExample}[ดู\wbr{}บันทึกล็\wbr{}อก\wbr{}อิน\wbr{}ที่\wbr{}ผิด\wbr{}พลาด\wbr{}ด้วย \cmd{lastb}.]
\begin{MyEx}
$ \cin{lastb vc/1}
UNKNOWN  vc/1                          Mon Sep 13 22:50 - 22:50  (00:00)
nobody   vc/1                          Mon Sep 13 22:50 - 22:50  (00:00)
root     vc/1                          Mon Sep 13 22:50 - 22:50  (00:00)
poonlap  vc/1                          Mon Sep 13 22:49 - 22:49  (00:00)

btmp begins Mon Sep 13 22:49:35 2004
\end{MyEx}
\end{MyExample}%$

จาก\wbr{}ตัว\wbr{}อย่าง\wbr{}คำ\wbr{}สั่ง \cmd{lastb}, เรา\wbr{}พอ\wbr{}จะ\wbr{}คาด\wbr{}เดา\wbr{}ได้\wbr{}ว่า\wbr{}มี\wbr{}คน\wbr{}พยายามล็\wbr{}อก\wbr{}อิน\wbr{}จาก\wbr{}คอน\wbr{}โซล\wbr{}แต่ล็\wbr{}อก\wbr{}อิน\wbr{}ไม่\wbr{}ได้. ไม่\wbr{}ว่า\wbr{}จะ\wbr{}เป็น\wbr{}รหัส\wbr{}ผ่าน\wbr{}ไม่\wbr{}ถูก\wbr{}ต้อง, หรือ\wbr{}ใช้\wbr{}ชื่อล็\wbr{}อก\wbr{}อิน\wbr{}ที่\wbr{}ระบบ\wbr{}ไม่\wbr{}รู้\wbr{}จัก (UNKNOWN).

\subsection{เ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล}
เ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}เป็น\wbr{}อินเ\wbr{}ทอร์เฟส\wbr{}ที่\wbr{}ใช้\wbr{}ติด\wbr{}ต่อ\wbr{}กับ\wbr{}เชลล์, รับ\wbr{}ข้อ\wbr{}มูล\wbr{}นำ\wbr{}เข้า\wbr{}มาตร\wbr{}ฐาน stdin จาก\wbr{}คีย์\wbr{}บอร์ด\wbr{}และ\wbr{}ส่ง\wbr{}ข้อ\wbr{}มูล\wbr{}มาตร\wbr{}ฐาน stdout ออก\wbr{}ทาง\wbr{}หน้า\wbr{}จอ. ใน\wbr{}สมัย\wbr{}ก่อนเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}เป็น serial device ที่\wbr{}ต่อ\wbr{}กับ\wbr{}เครื่อง\wbr{}คอมพิวเตอร์. ใน\wbr{}ปัจจุบันเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}ที่\wbr{}ใช้\wbr{}กัน\wbr{}ทั่ว\wbr{}ไป\wbr{}จะ\wbr{}เป็นเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}เอ\wbr{}มิวเล\wbr{}เตอร์\wbr{}คือ\wbr{}โปรแกรม\wbr{}ที่\wbr{}จำลอง\wbr{}การ\wbr{}ทำ\wbr{}งาน\wbr{}ของเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}เช่น \cmd{xterm} เป็นต้น.

ตัวแปร\wbr{}สภาพ\wbr{}แวด\wbr{}ล้อม \cmd{TERM} เป็น\wbr{}ตัวแปร\wbr{}ที่\wbr{}กำหนด\wbr{}ประเภท\wbr{}ของเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}ที่\wbr{}ใช้. ถ้า\wbr{}ลอง\wbr{}แสดง\wbr{}ค่า\wbr{}ของ\wbr{}ตัวแปร\wbr{}สภาพ\wbr{}แวด\wbr{}ล้อม \cmd{TERM} ด้วย\wbr{}คำ\wbr{}สั่ง \cmd{echo \$TERM} ในเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}เอ\wbr{}มิวเล\wbr{}เตอร์ \cmd{xterm} ก็\wbr{}จะ\wbr{}ได้\wbr{}ผล\wbr{}เป็น \cmd{xterm}. ใน\wbr{}ลิ\wbr{}นุกซ์\wbr{}จะ\wbr{}มี\wbr{}ฐาน\wbr{}ข้อ\wbr{}มูล\wbr{}ของเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}เรีย\wbr{}กว่า terminfo\gindex{terminfo} ซึ่ง\wbr{}จะ\wbr{}เก็บ\wbr{}ข้อ\wbr{}มูล\wbr{}ความ\wbr{}สามารถ\wbr{}ต่างๆ\wbr{}ของเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\mymemo{ดู\wbr{}ราย\wbr{}ละเอียด\wbr{}ได้\wbr{}จาก \cmd{terminfo(5)}}เช่น จำนวน\wbr{}คอลัมน์\wbr{}ใน\wbr{}แต่\wbr{}ละ\wbr{}บรรทัด, จำนวน\wbr{}สี\wbr{}ที่\wbr{}ใช้\wbr{}ได้\wbr{}ในเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล เป็นต้น. ฐาน\wbr{}ข้อ\wbr{}มูล\wbr{}เหล่า\wbr{}นี้\wbr{}ช่วย\wbr{}ให้\wbr{}โปรแกรม\wbr{}ที่\wbr{}ใช้เ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}แสดง\wbr{}ผล\wbr{}ได้\wbr{}ถูก\wbr{}ต้อง\mymemo{โปรแกรม\wbr{}ที่\wbr{}แสดง\wbr{}ผล\wbr{}และ\wbr{}มี\wbr{}ความ\wbr{}สัมพันธ์\wbr{}กับเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}มัก\wbr{}ใช้ไ\wbr{}ลบ\wbr{}รา\wbr{}รี ncurse ประกอบ\wbr{}การ\wbr{}ทำ\wbr{}งาน\wbr{}เช่น\wbr{}โปรแกรม \cmd{vim} เป็น\wbr{}บรรณาธิ\wbr{}กรณ์\wbr{}ที่\wbr{}ใช้\wbr{}ได้\wbr{}ในเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล.}. โดย\wbr{}ปรกติ\wbr{}แล้ว\wbr{}ค่า\wbr{}ของ\wbr{}ตัวแปร\wbr{}สภาพ\wbr{}แวด\wbr{}ล้อม \cmd{TERM} จะ\wbr{}ถูก\wbr{}ตั้ง\wbr{}ค่า\wbr{}โดย\wbr{}อัตโนมัติ. ถ้า\wbr{}การ\wbr{}แสดง\wbr{}ผล\wbr{}ของ\wbr{}โปรแกรม\wbr{}ที่\wbr{}ใช้เ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}ผิด\wbr{}ปรกติ\wbr{}ก็\wbr{}อาจ\wbr{}จะ\wbr{}เป็น\wbr{}เพราะ\wbr{}ค่า\wbr{}ตัวแปร\wbr{}สภาพ\wbr{}แวด\wbr{}ล้อม \cmd{TERM} ตั้ง\wbr{}ไว้\wbr{}ไม่\wbr{}ตรง\wbr{}กับ\wbr{}ประเภท\wbr{}ของเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}ที่\wbr{}ใช้.

เ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}สามารถ\wbr{}แสดง\wbr{}ได้\wbr{}ด้วย\wbr{}ไฟล์\wbr{}เช่น\wbr{}เดียว\wbr{}กับ\wbr{}อุปกรณ์\wbr{}ต่างๆ\wbr{}ใน\wbr{}ระบบ\wbr{}ปฏิบัติ\wbr{}การ\wbr{}และ\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}ใช้\wbr{}ตรวจ\wbr{}สอบ\wbr{}ว่าเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}ที่\wbr{}ใช้\wbr{}อยู่\wbr{}คือ\wbr{}ไฟล์\wbr{}อะไร\wbr{}ได้\wbr{}แก่\wbr{}คำ\wbr{}สั่ง \cmd{tty}\cindex{tty}\refcmd{tty}.
\begin{MyExample}[ตรวจ\wbr{}สอบ\wbr{}ไฟล์\wbr{}ดี\wbr{}ไวซ์\wbr{}ของเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}ที่\wbr{}ใช้.]
\begin{MyEx}
$ \cin{tty}
/dev/pts/5
$ \cin{ls -l /dev/pts/5}
crw--w----    1 poonlap  tty      136,   5 Sep 18 20:19 /dev/pts/5
\end{MyEx}
\end{MyExample}
ใน\wbr{}ตัว\wbr{}อย่าง\wbr{}เป็น\wbr{}การ\wbr{}แสดง\wbr{}ไฟล์เ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}ของ \cmd{gnome-terminal}. เวลา\wbr{}เรียก\wbr{}ใช้เ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}เอ\wbr{}มิวเล\wbr{}เตอร์, ระบบ\wbr{}จะ\wbr{}สร้าง\wbr{}ไฟล์\wbr{}สำหรับเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}นั้น\wbr{}ใน\wbr{}ได\wbr{}เรอ\wbr{}ทอ\wbr{}รี \cmd{/dev/pts} ให้\wbr{}โดย\wbr{}อัตโนมัติ.

เนื่อง\wbr{}จากเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}สามารถ\wbr{}ได้\wbr{}ด้วย\wbr{}ไฟล์\wbr{}ใน\wbr{}ระบบ. ดัง\wbr{}นั้น\wbr{}เรา\wbr{}สามารถ\wbr{}เขียน\wbr{}หรือ\wbr{}อ่าน\wbr{}ข้อ\wbr{}มูล\wbr{}ด้วย\wbr{}ไฟล์\wbr{}นั้น\wbr{}ได้\wbr{}ด้วย. สมมติ\wbr{}ว่า\wbr{}เรา\wbr{}เปิดเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}ไว้\wbr{}สอง\wbr{}อัน. อัน\wbr{}หนึ่ง\wbr{}คือ pts/0 และ\wbr{}อีก\wbr{}อัน\wbr{}หนึ่ง\wbr{}คือ pts/5. เรา\wbr{}สามารถ\wbr{}ส่ง\wbr{}ข้อ\wbr{}มูล\wbr{}จากเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล pts/0 ไป\wbr{}หาเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล pts/5 ได้\wbr{}ด้วย\wbr{}การ \cmd{echo} แล้ว\wbr{}รี\wbr{}ไดเ\wbr{}รก\wbr{}ไป\wbr{}ที่\wbr{}ไฟล์ \cmd{/dev/pts/5} ตาม\wbr{}ตัว\wbr{}อย่าง.
\begin{MyExample}[การ\wbr{}รี\wbr{}ไดเ\wbr{}รก\wbr{}ข้อ\wbr{}มูล\wbr{}ไป\wbr{}หาเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}อื่นๆ.]
\begin{MyEx}
$ \cin{echo 'Hello world' > /dev/pts/5}
\end{MyEx}
\end{MyExample}%$
คำ\wbr{}ว่า ``Hello world'' จะ\wbr{}ปรากฏ\wbr{}ที่\wbr{}หน้า\wbr{}จอ\wbr{}ของเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล pts/5. จาก\wbr{}กรณี\wbr{}สมมติ\wbr{}ใน\wbr{}ตัว\wbr{}อย่าง\wbr{}เจ้า\wbr{}ของเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}ทั้ง\wbr{}สอง\wbr{}เป็น\wbr{}ผู้\wbr{}ใช้\wbr{}เดียว\wbr{}กัน\wbr{}จึง\wbr{}ทำ\wbr{}แบบ\wbr{}นี้\wbr{}ได้. ถ้า\wbr{}เจ้า\wbr{}ของเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}เป็น\wbr{}คนละ\wbr{}คน\wbr{}กัน\wbr{}อาจ\wbr{}จะ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{chmod} แก้\wbr{}สิทธิ์\wbr{}การ\wbr{}ใช้\wbr{}ไฟล์เ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}ก่อน.

ใน\wbr{}การ\wbr{}ใช้\wbr{}งาน\wbr{}จริง\wbr{}แล้ว, ลิ\wbr{}นุกซ์\wbr{}จะ\wbr{}มี\wbr{}คำ\wbr{}สั่ง \cmd{write}\cindex{write}\refcmd{write} เพื่อ\wbr{}เขียน\wbr{}ส่ง\wbr{}ข้อ\wbr{}ความ\wbr{}ไป\wbr{}หา\wbr{}ผู้\wbr{}ใช้\wbr{}ที่ล็\wbr{}อก\wbr{}อิน\wbr{}อยู่. ถ้า\wbr{}ผู้\wbr{}ใช้\wbr{}นั้น\wbr{}ใช้เ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}หลาย\wbr{}ตัว\wbr{}พร้อมๆ\wbr{}ก็\wbr{}สามารถ\wbr{}ระบุเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}ที่\wbr{}ต้องการ\wbr{}ส่ง\wbr{}ข้อ\wbr{}ความ\wbr{}ได้\wbr{}ด้วย. ใน\wbr{}กรณี\wbr{}ที่\wbr{}ไม่\wbr{}ต้องการ\wbr{}ให้\wbr{}คน\wbr{}อื่น\wbr{}รบ\wbr{}กวน\wbr{}เขียน\wbr{}ข้อ\wbr{}ความ\wbr{}เข้า\wbr{}มา\wbr{}ในเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}ก็\wbr{}ให้\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{mesg}\cindex{mesg}\refcmd{mesg} อนุญาต\wbr{}หรือ\wbr{}ไม่\wbr{}อนุญาต\wbr{}การ\wbr{}ส่ง\wbr{}ข้อ\wbr{}มูล\wbr{}ผ่านเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล.

\begin{figure}[!htb]
\scalebox{.6}{\includegraphics{write_1.eps}}

\vspace{10pt}
\scalebox{.6}{\includegraphics{write_2.eps}}
\caption{ใช้ \cmd{write} ส่ง\wbr{}ข้อ\wbr{}ความ\wbr{}ระหว่าง\wbr{}ผู้\wbr{}ใช้\wbr{}ใน\wbr{}ระบบ.}\label{fig:write}
\end{figure}

ใน\wbr{}บาง\wbr{}กรณี\wbr{}อาจ\wbr{}จะ\wbr{}มี\wbr{}ความ\wbr{}จำ\wbr{}เป็น\wbr{}ต้อง\wbr{}ส่ง\wbr{}ข้อ\wbr{}ความ\wbr{}ผ่านเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}หา\wbr{}ผู้\wbr{}ใช้\wbr{}ทุก\wbr{}คน\wbr{}ใน\wbr{}ระบบ\wbr{}ที่\wbr{}ใช้เ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}อยู่, ให้\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{wall}\cindex{wall}\refcmd{wall} ส่ง\wbr{}ข้อ\wbr{}มูล\wbr{}ให้\wbr{}ผู้\wbr{}ใช้\wbr{}ที่\wbr{}ใช้เ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}ทุก\wbr{}ตัว\wbr{}ใน\wbr{}ระบบ.

\medskip
ปัจจุบัน \emph{Instant Messenger}\gindex{instant messenger} เช่น MSN messenger, Yahoo messenger เป็น\wbr{}เครื่อง\wbr{}มือ\wbr{}ที่\wbr{}นิยม\wbr{}ใช้\wbr{}สื่อ\wbr{}สาร\wbr{}ส่ง\wbr{}ข้อ\wbr{}ความ\wbr{}ผ่าน\wbr{}ทางเน็ตเ\wbr{}วิร์ก. ใน\wbr{}ระบบฏิบั\wbr{}ติ\wbr{}การ\wbr{}แบบ\wbr{}ยู\wbr{}นิกซ์\wbr{}ช่วง\wbr{}แรก\wbr{}ก็\wbr{}มี\wbr{}โปรแกรม\wbr{}แบบ\wbr{}นี้\wbr{}เช่น\wbr{}เดียว\wbr{}กัน\wbr{}ใช้\wbr{}คุย\wbr{}กัน\wbr{}ผ่าน\wbr{}ทางเน็ตเ\wbr{}วิร์ก\wbr{}ได้\wbr{}แก่ \cmd{talk}\cindex{talk} หรือ \cmd{phone}\cindex{phone}. โปรแกรม \cmd{talk} จะ\wbr{}ใช้เ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}ใน\wbr{}การ\wbr{}สื่อ\wbr{}สาร\wbr{}ง่าย\wbr{}ต่อ\wbr{}การ\wbr{}ใช้. ใน\wbr{}ปัจจุบัน\wbr{}ไม่\wbr{}นิยม\wbr{}ใช้\wbr{}กัน\wbr{}เท่า\wbr{}ไหร่\wbr{}นัก\wbr{}และ\wbr{}ใน\wbr{}ลิ\wbr{}นุกซ์\wbr{}ก็\wbr{}มี\wbr{}โปรแกรม Instant Messenger ที่\wbr{}เข้า\wbr{}กัน\wbr{}ได้\wbr{}กับ MSN messenger หรือ Yahoo messenger ด้วย.

\subsubsection{ปรับ\wbr{}แต่งเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล}
ถ้า\wbr{}ผู้\wbr{}อ่าน\wbr{}เคย\wbr{}ใช้เ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}หลายๆ\wbr{}แบบ\wbr{}หลายๆ\wbr{}ที่\wbr{}อาจ\wbr{}จะสัง\wbr{}เกตุ\wbr{}เห็น\wbr{}ว่า\wbr{}พฤติ\wbr{}กรรมการ\wbr{}แสดง\wbr{}ผล\wbr{}หรือ\wbr{}คีย์\wbr{}บอร์ด\wbr{}ที่\wbr{}ใช้\wbr{}บาง\wbr{}ที\wbr{}จะ\wbr{}ไม่\wbr{}เหมือน\wbr{}กัน. สาเหตุ\wbr{}หนึ่ง\wbr{}คือ\wbr{}ประเภท\wbr{}ของเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}ไม่\wbr{}เหมือน\wbr{}กัน\wbr{}ซึ่ง\wbr{}สามารถ\wbr{}แก้\wbr{}ได้\wbr{}ด้วย\wbr{}การ\wbr{}ตั้ง\wbr{}ค่า\wbr{}ตัวแปร\wbr{}สภาพ\wbr{}แวด\wbr{}ล้อม \cmd{TERM} ให้\wbr{}ถูก\wbr{}ต้อง. อีก\wbr{}สาเหตุ\wbr{}หนึ่ง\wbr{}คือ\wbr{}การ\wbr{}ตั้ง\wbr{}ค่า\wbr{}เฉพาะ\wbr{}ของเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}ไม่\wbr{}เหมือน\wbr{}กัน. เรา\wbr{}สามารถ\wbr{}ดู\wbr{}ค่า\wbr{}ของเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}ต่างๆ\wbr{}ที่\wbr{}ตั้ง\wbr{}ไว้\wbr{}ด้วย\wbr{}คำ\wbr{}สั่ง \cmd{stty}\cindex{stty}\refcmd{stty}.

\begin{MyExample}[ดู\wbr{}ค่า\wbr{}ของเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอลๆ\wbr{}ที่\wbr{}ตั้ง\wbr{}ไว้.]
\begin{MyEx}
$ \cin{stty -a}
speed 38400 baud; rows 24; columns 80; line = 0;
intr = ^C; quit = ^\bs{}; erase = ^?; kill = ^U; eof = ^D; eol = M-^?; eol2 = M-^?;
start = ^Q; stop = ^S; susp = ^Z; rprnt = ^R; werase = ^W; lnext = ^V;
flush = ^O; min = 1; time = 0;
-parenb -parodd cs8 hupcl -cstopb cread -clocal -crtscts
-ignbrk brkint -ignpar -parmrk -inpck -istrip -inlcr -igncr icrnl ixon -ixoff
-iuclc ixany imaxbel
opost -olcuc -ocrnl onlcr -onocr -onlret -ofill -ofdel nl0 cr0 tab0 bs0 vt0 ff0
isig icanon iexten echo echoe echok -echonl -noflsh -xcase -tostop -echoprt
echoctl echoke
\end{MyEx}
\end{MyExample}%$

จาก\wbr{}ผล\wbr{}ลัพธ์\wbr{}ของ\wbr{}คำ\wbr{}สั่ง\wbr{}จะ\wbr{}เห็น\wbr{}ว่า\wbr{}มี\wbr{}การ\wbr{}กำหนด\wbr{}คีย์\wbr{}ต่างๆ\wbr{}ให้\wbr{}เข้า\wbr{}กับ\wbr{}สัญญาณ\wbr{}ที่\wbr{}ต้องการ\wbr{}เช่น\wbr{}ใช้ \cmd{\^{ }C} (กด\wbr{}คีย์ \keyctrl{} ค้าง\wbr{}ไว้\wbr{}แล้ว\wbr{}กด\wbr{}คีย์ \keyc{} ตาม) จะ\wbr{}หมาย\wbr{}ถึง\wbr{}การ\wbr{}ส่ง\wbr{}สัญญาณ Interrupt ให้\wbr{}โปรแกรม\wbr{}เลิก\wbr{}ทำ\wbr{}งาน\wbr{}เป็นต้น. อีก\wbr{}ตัว\wbr{}อย่าง\wbr{}ที่\wbr{}จะ\wbr{}แนะ\wbr{}นำ\wbr{}ใน\wbr{}ที่\wbr{}นี้\wbr{}คือ\wbr{}ความ\wbr{}สามารถ echo. เวลา\wbr{}เรา\wbr{}กด\wbr{}คีย์\wbr{}ต่างๆ\wbr{}จะ\wbr{}เห็น\wbr{}ว่า\wbr{}อักษร\wbr{}ที่\wbr{}พิมพ์\wbr{}จะ\wbr{}ปรากฏ\wbr{}บน\wbr{}หน้า\wbr{}จอเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล. นี่\wbr{}เป็น\wbr{}ความ\wbr{}สามารถ\wbr{}ของเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}ที่\wbr{}เรีย\wbr{}กว่า echo.
\begin{MyExample}[หยุด\wbr{}การ\wbr{}แสดง\wbr{}ผล\wbr{}ของ\wbr{}สิ่ง\wbr{}ที่\wbr{}พิมพ์\wbr{}จาก\wbr{}แป้น\wbr{}พิมพ์.]
\begin{MyEx}
$ \cin{stty -echo}
$ I can not see \mycomment{พิมพ์ \cmd{echo I can not see} แต่\wbr{}จะ\wbr{}ไม่\wbr{}แสดง\wbr{}สิ่ง\wbr{}ที่\wbr{}พิมพ์\wbr{}ไป. จะ\wbr{}แสดง\wbr{}แค่\wbr{}ผล\wbr{}ลัพธ์.}
$ $ \mycomment{พิมพ์ \cmd{stty echo} เพื่อ\wbr{}กลับ\wbr{}สู่\wbr{}สภาพ\wbr{}ปรกติ.}
$ \cin{echo Now I can see again}
Now I can see again
\end{MyEx}
\end{MyExample}%$
การ\wbr{}ประยุกต์\wbr{}ใช้\wbr{}การ\wbr{}ตั้ง\wbr{}ค่าเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}ใน\wbr{}ลักษณะ\wbr{}นี้\wbr{}เช่น\wbr{}ใช้\wbr{}ใน\wbr{}เวลา\wbr{}ต้องการ\wbr{}ให้\wbr{}ผู้\wbr{}ใช้\wbr{}พิมพ์\wbr{}ข้อ\wbr{}ความ\wbr{}ที่\wbr{}เป็น\wbr{}ความ\wbr{}ลับ, รหัส\wbr{}ผ่าน. ใน\wbr{}กรณี\wbr{}นี้\wbr{}สามารถ\wbr{}ตั้ง\wbr{}ค่า\wbr{}ให้เ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}ไม่ echo รหัส\wbr{}ผ่าน\wbr{}ที่\wbr{}พิมพ์\wbr{}ทาง\wbr{}หน้า\wbr{}จอ.

คำ\wbr{}สั่ง \cmd{stty} ยัง\wbr{}สามารถ\wbr{}ใช้\wbr{}แก้\wbr{}ไขเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}ที่\wbr{}มี\wbr{}การ\wbr{}แสดง\wbr{}ผล\wbr{}ไม่\wbr{}ถูก\wbr{}ต้อง\wbr{}หลัง\wbr{}จาก\wbr{}ที่\wbr{}เปิด\wbr{}ดู\wbr{}ไฟล์ไบ\wbr{}นารี. ใน\wbr{}กรณี\wbr{}นี้\wbr{}จะ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง ``\cmd{stty sane}'' เพื่อ\wbr{}ปรับ\wbr{}สภาพ\wbr{}ของเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}ให้\wbr{}เป็น\wbr{}ปรกติ. หรือ\wbr{}จะ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{reset} ที่\wbr{}เคย\wbr{}แนะ\wbr{}นำ\wbr{}ไป\wbr{}แล้ว\wbr{}ก็\wbr{}ได้.

\medskip
พฤติกรรม\wbr{}ของเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}ที่\wbr{}สามารถ\wbr{}กำหนด\wbr{}ได้\wbr{}ด้วย\wbr{}คำ\wbr{}สั่ง \cmd{stty} มี\wbr{}หลาย\wbr{}อย่าง\wbr{}ให้\wbr{}อ่าน\wbr{}ราย\wbr{}ละเอียด\wbr{}จาก \cmd{stty(1)}.

\subsection{ควบ\wbr{}คุม\wbr{}คำ\wbr{}สั่ง}
ลิ\wbr{}นุกซ์\wbr{}เป็น\wbr{}ระบบ\wbr{}ปฏิบัติ\wbr{}การ\wbr{}ที่\wbr{}สามารถ\wbr{}ใช้\wbr{}โปรแกรม\wbr{}หลาย\wbr{}โปรแกรม\wbr{}พร้อมๆ\wbr{}กัน. ลิ\wbr{}นุกซ์เ\wbr{}คอร์เนล\wbr{}จะ\wbr{}มี\wbr{}หน้า\wbr{}ที่\wbr{}แบ่ง\wbr{}เวลา\wbr{}ให้\wbr{}โปร\wbr{}เซส\wbr{}ต่างๆ\wbr{}ใช้\wbr{}หน่วย\wbr{}ประมวล\wbr{}ผล\wbr{}ทำ\wbr{}งาน. เรา\wbr{}สามารถ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{nice} เปลี่ยน\wbr{}ความ\wbr{}สำคัญ\wbr{}ของ\wbr{}โปร\wbr{}เซส (scheduling priority) บาง\wbr{}ตัว\wbr{}ที่\wbr{}ไม่\wbr{}สำคัญ\wbr{}ให้\wbr{}หน่วย\wbr{}ประมวล\wbr{}ไม่\wbr{}ต้อง\wbr{}เสีย\wbr{}เวลา\wbr{}กับ\wbr{}โปร\wbr{}เซส\wbr{}นั้น\wbr{}มา\wbr{}กก\wbr{}นัก. ใน\wbr{}ทาง\wbr{}กลับ\wbr{}กัน, สามารถ\wbr{}กำหนด\wbr{}ให้\wbr{}หน่วย\wbr{}ประมวล\wbr{}ผล\wbr{}ใช้\wbr{}เวลา\wbr{}กับ\wbr{}โปร\wbr{}เซส\wbr{}ที่\wbr{}สำคัญ\wbr{}มาก\wbr{}ขึ้น\wbr{}กว่า\wbr{}ปรกติ\wbr{}ได้. คำ\wbr{}สั่ง \cmd{nice} มัก\wbr{}จะ\wbr{}ใช้\wbr{}โปรแกรม\wbr{}ที่\wbr{}ใช้\wbr{}เวลา\wbr{}ทำ\wbr{}งาน\wbr{}นานๆ\wbr{}หรือ\wbr{}โปรแกรม\wbr{}ที่\wbr{}ทำ\wbr{}งาน\wbr{}แบบ background. คำ\wbr{}สั่ง\wbr{}ที่\wbr{}ทำ\wbr{}งาน\wbr{}ใช้\wbr{}เวลา\wbr{}ไม่\wbr{}มาก\wbr{}แล้ว\wbr{}จบ\wbr{}ทัน\wbr{}ที\wbr{}ไม่\wbr{}จำ\wbr{}เป็นต้น\wbr{}ใช้ \cmd{nice}.

คำ\wbr{}สั่ง \cmd{nice}\cindex{nice}\refcmd{nice} ใช้\wbr{}ตอน\wbr{}ที่\wbr{}จะ\wbr{}เรียก\wbr{}ใช้\wbr{}โปรแกรม\wbr{}ที่\wbr{}ต้องการ.\mymemo{สมมติ\wbr{}ว่า\wbr{}โปรแกรม \cmd{a.out} เป็น\wbr{}โปรแกรม\wbr{}ที่\wbr{}เขียน\wbr{}ขึ้น\wbr{}เอง.}
\begin{MyExample}[ตั้ง\wbr{}ความ\wbr{}สำคัญ\wbr{}ของ\wbr{}โปร\wbr{}เซส\wbr{}เวลา\wbr{}รัน.]
\begin{MyEx}
$ \cin{nice -n 19 ./a.out}
\end{MyEx}
\end{MyExample}%$
ตัว\wbr{}เลือก \cmd{-n} เป็น\wbr{}การ\wbr{}ระบุ\wbr{}ความ\wbr{}สำคัญ (priority) ของ\wbr{}คำ\wbr{}สั่ง\wbr{}โดย\wbr{}ความ\wbr{}สำคัญ\wbr{}จะ\wbr{}เป็น\wbr{}ตัว\wbr{}เลข\wbr{}ตั้ง\wbr{}แต่ -20 จน\wbr{}ถึง 19. ค่า\wbr{}ตัว\wbr{}เลข\wbr{}ยิ่ง\wbr{}น้อย\wbr{}ยิ่ง\wbr{}มี\wbr{}ความ\wbr{}สำคัญ\wbr{}สูง. ถ้า\wbr{}ไม่\wbr{}มี\wbr{}การ\wbr{}ระบุ\wbr{}ความ\wbr{}สำคัญ\wbr{}จะ\wbr{}ถือ\wbr{}ว่า\wbr{}มี\wbr{}ค่า\wbr{}เป็น 10 โดย\wbr{}ปริยาย. ผู้\wbr{}ใช้\wbr{}ทั่ว\wbr{}ไป\wbr{}ไม่\wbr{}สามารถ\wbr{}ใช้\wbr{}ค่า\wbr{}ความ\wbr{}สำคัญ\wbr{}มาก\wbr{}ได้\wbr{}แก่\wbr{}เลข\wbr{}ที่\wbr{}มี\wbr{}ค่า\wbr{}น้อย\wbr{}กว่า 0, ต้อง\wbr{}เป็น root เท่า\wbr{}นั้น.

คำ\wbr{}สั่ง \cmd{nice} จะ\wbr{}ตั้ง\wbr{}ค่า\wbr{}ความ\wbr{}สำคัญ\wbr{}ของ\wbr{}โปร\wbr{}เซส\wbr{}ได้\wbr{}ตอน\wbr{}ที่\wbr{}จะ\wbr{}สั่ง\wbr{}คำ\wbr{}สั่ง\wbr{}เท่า\wbr{}นั้น. ถ้า\wbr{}ต้องการ\wbr{}เปลี่ยน\wbr{}ความ\wbr{}สำคัญ\wbr{}ของ\wbr{}โปรแกรม\wbr{}ที่\wbr{}สั่ง\wbr{}แล้ว (โปร\wbr{}เซส) จะ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{renice}\cindex{renice}\refcmd{renice} ซึ่ง root เท่า\wbr{}นั้น\wbr{}ที่\wbr{}จะ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง\wbr{}นี้\wbr{}ได้.
\begin{MyExample}[เปลี่ยน\wbr{}ความ\wbr{}สำคัญ\wbr{}ของ\wbr{}โปร\wbr{}เซส.]
\begin{MyEx}
# \cin{renice -10 -p 5362}
5362: old priority 0, new priority -10
\end{MyEx}
\end{MyExample}
จาก\wbr{}ตัว\wbr{}อย่าง\wbr{}เป็น\wbr{}การ\wbr{}เปลี่ยน\wbr{}ค่า\wbr{}ความ\wbr{}สำคัญ\wbr{}ของ\wbr{}โปร\wbr{}เซ\wbr{}สห\wbr{}มาย\wbr{}เลข 5362 ให้\wbr{}เป็น -10 (ความ\wbr{}สำคัญ\wbr{}มาก\wbr{}ขึ้น).



\medskip
ใน\wbr{}บท\wbr{}ที่\wbr{}ผ่าน\wbr{}มา\wbr{}เรา\wbr{}ได้\wbr{}ทำ\wbr{}ความ\wbr{}รู้\wbr{}จัก\wbr{}กับ\wbr{}การ\wbr{}สั่ง\wbr{}คำ\wbr{}สั่ง\wbr{}แบบ background ไป\wbr{}แล้ว. สมมติ\wbr{}ว่า\wbr{}เราล็\wbr{}อก\wbr{}อิน\wbr{}ผ่าน\wbr{}ทางเน็ตเ\wbr{}วิร์ก\wbr{}เพื่อ\wbr{}สั่ง\wbr{}คำ\wbr{}สั่ง\wbr{}อะไร\wbr{}บาง\wbr{}อย่าง. คำ\wbr{}สั่ง\wbr{}นั้น\wbr{}กิน\wbr{}เวลา\wbr{}นาน\wbr{}เกิน\wbr{}กว่า\wbr{}ที่\wbr{}จะ\wbr{}รอ\wbr{}ได้, ใน\wbr{}กรณี\wbr{}เรา\wbr{}สามารถ\wbr{}สั่ง\wbr{}คำ\wbr{}สั่ง\wbr{}แบบ background และล็\wbr{}อก\wbr{}เอาท์\wbr{}ออก\wbr{}จาก\wbr{}ระบบ\wbr{}นั้น\wbr{}โดย\wbr{}ไม่\wbr{}ต้อง\wbr{}รอ\wbr{}ให้\wbr{}โปรแกรม\wbr{}ที่\wbr{}รัน\wbr{}จบ\wbr{}แล้ว\wbr{}ค่อยล็\wbr{}อก\wbr{}เอาท์. คำ\wbr{}สั่ง\wbr{}ที่\wbr{}สั่ง\wbr{}จะ\wbr{}ทำ\wbr{}งาน\wbr{}ต่อ\wbr{}ไป\wbr{}ถึง\wbr{}แม้\wbr{}ว่า\wbr{}เรา\wbr{}จะล็\wbr{}อก\wbr{}เอาท์\wbr{}ไป\wbr{}แล้ว\wbr{}ก็\wbr{}ตาม\wbr{}เพราะ\wbr{}เรา\wbr{}สั่ง\wbr{}คำ\wbr{}สั่ง\wbr{}แบบ background. ถ้า\wbr{}คำ\wbr{}สั่ง\wbr{}นั้น\wbr{}ยก\wbr{}เลิก\wbr{}การ\wbr{}ทำ\wbr{}งาน\wbr{}ถึง\wbr{}แม้\wbr{}ว่า\wbr{}จะ\wbr{}สั่ง\wbr{}คำ\wbr{}สั่ง\wbr{}แบบ background แล้วล็\wbr{}อก\wbr{}เอาท์, ให้\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{nohup} ช่วย.

%สำหรับ\wbr{}เหตุ\wbr{}การณ์\wbr{}เดียว\wbr{}กัน\wbr{}ผู้\wbr{}ใช้\wbr{}อาจ\wbr{}จะ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{nohup} ใน\wbr{}การ\wbr{}สั่ง\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}กิน\wbr{}เวลา\wbr{}นาน\wbr{}แล้วล็\wbr{}อก\wbr{}เอาท์\wbr{}จาก\wbr{}ระบบ\wbr{}ก็\wbr{}ได้.
การ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{nohup}\cindex{nohup}\refcmd{nohup} ทำ\wbr{}ได้\wbr{}ดัง\wbr{}นี้.
\begin{MyExample}[ให้\wbr{}คำ\wbr{}สั่ง\wbr{}ทำ\wbr{}งาน\wbr{}ต่อ\wbr{}ไป\wbr{}หลัง\wbr{}จากล็\wbr{}อก\wbr{}เอาท์.]
\begin{MyEx}
$ \cin{nohup ./a.out &}
[1] 11599 \mycomment{หมาย\wbr{}เลข\wbr{}โปร\wbr{}เซส}
$ \cin{logout} \mycomment{ล็\wbr{}อก\wbr{}เอาท์\wbr{}ได้\wbr{}โดย\wbr{}ที่ \cmd{a.out} ทำ\wbr{}งาน\wbr{}ต่อ\wbr{}ไป\wbr{}เรื่อยๆ\wbr{}จน\wbr{}จบ.}
\end{MyEx}
\end{MyExample}
ผู้\wbr{}ใช้\wbr{}ต้อง\wbr{}สั่ง\wbr{}คำ\wbr{}สั่ง\wbr{}เป็น\wbr{}แบบ background เอง. หลัง\wbr{}จาก\wbr{}นั้น\wbr{}สามารถล็\wbr{}อก\wbr{}เอาท์\wbr{}ได้\wbr{}โดย\wbr{}ที่\wbr{}คำ\wbr{}สั่ง\wbr{}นั้น\wbr{}ยัง\wbr{}คง\wbr{}ทำ\wbr{}งาน\wbr{}ต่อ\wbr{}ไป. ถ้า\wbr{}คำ\wbr{}สั่ง\wbr{}นั้น\wbr{}มี\wbr{}การ\wbr{}ส่ง\wbr{}ข้อ\wbr{}มูล\wbr{}ออก\wbr{}ทาง stdout จะ\wbr{}เก็บ\wbr{}ไว้\wbr{}ใน\wbr{}ไฟล์ \cmd{nohup.out}. ใน\wbr{}ทาง\wbr{}เทคนิค\wbr{}แล้ว\wbr{}คำ\wbr{}สั่ง \cmd{nohup} จะ\wbr{}ทำ\wbr{}ให้\wbr{}โปรแกรม\wbr{}ที่\wbr{}สั่ง\wbr{}เพิกเฉย\wbr{}กับ\wbr{}สัญญาณ SIGHUP ทำ\wbr{}ให้\wbr{}ผู้\wbr{}ใช้\wbr{}สามารถล็\wbr{}อก\wbr{}เอาท์\wbr{}ได้. คำ\wbr{}สั่ง \cmd{nohup} จะ\wbr{}ไม่\wbr{}เปลี่ยน\wbr{}ความ\wbr{}สำคัญ\wbr{}ของ\wbr{}โปร\wbr{}เซส\wbr{}ให้, ถ้า\wbr{}ต้องการ\wbr{}ให้\wbr{}คำ\wbr{}สั่ง\wbr{}นั้น\wbr{}กระทำ\wbr{}การ\wbr{}โดย\wbr{}มี\wbr{}ความ\wbr{}สำคัญ\wbr{}ต่ำ\wbr{}ให้\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{nice} เข้า\wbr{}ช่วย.


\subsection{นอน\wbr{}พัก}
\cmd{sleep} เป็น\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}หยุด, ไม่\wbr{}ทำ\wbr{}อะไร\wbr{}ตาม\wbr{}ระยะ\wbr{}เวลา\wbr{}ที่\wbr{}กำหนด. เช่น\wbr{}ถ้า\wbr{}ต้องการ\wbr{}หยุด\wbr{}รอ 2 นาที\wbr{}แล้ว\wbr{}ค่อย\wbr{}สั่ง\wbr{}คำ\wbr{}สั่ง\wbr{}ทำ\wbr{}ได้\wbr{}ดัง\wbr{}นี้.
\begin{MyExample}[ใช้\wbr{}คำ\wbr{}สั่ง \cmd{sleep}.]
\begin{MyEx}
$ \cin{sleep 2m; echo 'Wake up!'}
Wake up! \mycomment{เวลา\wbr{}ผ่าน\wbr{}ไป 2 นาที\wbr{}แล้ว \cmd{echo} จึง\wbr{}ทำ\wbr{}งาน.}
\end{MyEx}
\end{MyExample}%$
ระยะ\wbr{}เวลา\wbr{}ถ้า\wbr{}เป็น\wbr{}ตัว\wbr{}เลข\wbr{}โดย\wbr{}ไม่\wbr{}มี\wbr{}หน่วย\wbr{}จะ\wbr{}หมาย\wbr{}ถึง\wbr{}วินาที, m หมาย\wbr{}ถึง\wbr{}นาที, h หมาย\wbr{}ถึง\wbr{}ชั่ว\wbr{}โมง, และ d หมาย\wbr{}ถึง\wbr{}วัน.

\subsection{คณิต\wbr{}ศาสตร์}
คำ\wbr{}สั่ง \cmd{expr}\cindex{expr}\refcmd{expr} สามารถ\wbr{}ใช้\wbr{}คำนวณ\wbr{}คณิต\wbr{}ศาสตร์\wbr{}ง่ายๆ\wbr{}เช่น\wbr{}บวก, ลบ, คูณ, หาร\wbr{}ได้\wbr{}ตาม\wbr{}ตัว\wbr{}อย่าง\wbr{}ต่อ\wbr{}ไป\wbr{}นี้.
\begin{MyExample}[ใช้ \cmd{expr} คำนวณ\wbr{}คณิต\wbr{}ศาสตร์\wbr{}แบบ\wbr{}ง่ายๆ.]
\begin{MyEx}
$ \cin{expr 1 + 2 + 3}
6
$ \cin{expr 1 - 2}
-1
$ \cin{expr 2 \bs{}* 4} \mycomment{ต้อง\wbr{}ใช้\wbr{}เครื่อง\wbr{}หมาย \bs{} นำ\wbr{}หน้า \cmd{*}}
8
$ \cin{expr 5 / 3}
1 \mycomment{ปัด\wbr{}เศษ\wbr{}ทิ้ง}
$ \cin{expr 5 % 3}
2 \mycomment{เศษ\wbr{}ของ\wbr{}การ\wbr{}หาร\wbr{}ด้วย \cmd{3}}
\end{MyEx}
\end{MyExample}%$
การ\wbr{}คำนวณ\wbr{}นี้\wbr{}สามารถ\wbr{}ทำ\wbr{}ได้\wbr{}เฉพาะ\wbr{}เลข\wbr{}จำนวน\wbr{}เต็ม\wbr{}เท่า\wbr{}นั้น\wbr{}และ\wbr{}ระหว่าง\wbr{}ตัว\wbr{}ปฏิบัติ\wbr{}การ\wbr{}ต้อง\wbr{}มี\wbr{}ช่อง\wbr{}ไฟ\wbr{}คั่น. คำ\wbr{}สั่ง\wbr{}นี้\wbr{}ใช่\wbr{}ไม่\wbr{}สะดวก\wbr{}เท่า\wbr{}ไหร่\wbr{}นัก\wbr{}และ\wbr{}สามารถ\wbr{}ใช้\wbr{}ความ\wbr{}สามารถ\wbr{}การ\wbr{}กระจาย\wbr{}นิพจน์\wbr{}คณิต\wbr{}ศาสตร์\wbr{}ของ\wbr{}เชลล์ bash จะ\wbr{}สะดวก\wbr{}กว่า. ตัว\wbr{}อย่าง\wbr{}ต่อ\wbr{}ไป\wbr{}นี้\wbr{}จะ\wbr{}ให้\wbr{}ผล\wbr{}เหมือน\wbr{}ตัว\wbr{}อย่าง\wbr{}ที่\wbr{}แสดง\wbr{}ไป\wbr{}แล้ว\wbr{}แต่\wbr{}จะ\wbr{}ใช้\wbr{}ความ\wbr{}สามารถ\wbr{}ของ\wbr{}เชลล์ bash แทน.
\begin{MyExample}[ใช้\wbr{}ความ\wbr{}สามารถ\wbr{}ของ\wbr{}เชลล์\wbr{}คำนวณ\wbr{}คณิต\wbr{}ศาสตร์\wbr{}แบบ\wbr{}ง่ายๆ.]
\begin{MyEx}
$ \cin{echo $((1+2+3))}
6
$ \cin{echo $((1-2))}
-1
$ \cin{echo $((2*4))} \mycomment{ไม่\wbr{}ต้อง\wbr{}มี\wbr{}เครื่อง\wbr{}หมาย \bs{} นำ\wbr{}หน้า \cmd{*}}
8
$ \cin{echo $((5/3))}
1 \mycomment{ปัด\wbr{}เศษ\wbr{}ทิ้ง}
$ \cin{echo $((5%3))}
2 \mycomment{เศษ\wbr{}ของ\wbr{}การ\wbr{}หาร\wbr{}ด้วย \cmd{3}}
\end{MyEx}
\end{MyExample}

\begin{table}[!htb]
\center
\medskip
\caption{ตัว\wbr{}ปฏิบัติ\wbr{}การ\wbr{}คณิต\wbr{}ศาสตร์\wbr{}ต่างๆ\wbr{}ที่\wbr{}ใช้\wbr{}ใน\wbr{}เชลล์.}\label{tab:shellop}
\begin{tabular}{lp{.7\textwidth}}
\toprule
\multicolumn{1}{c}{ตัว\wbr{}ปฏิบัติ\wbr{}การ} & \multicolumn{1}{c}{ความ\wbr{}หมาย}\\
\midrule
\cmd{\textit{var}++} \cmd{\textit{var}--} & เพิ่ม\wbr{}หรือ\wbr{}ลด\wbr{}ค่า\wbr{}ของ\wbr{}ตัวแปร\wbr{}หลัง\wbr{}ใช้\wbr{}งาน.\\
\cmd{++\textit{var}} \cmd{--\textit{var}} & เพิ่ม\wbr{}หรือ\wbr{}ลด\wbr{}ค่า\wbr{}ของ\wbr{}ตัวแปร\wbr{}ก่อน\wbr{}ใช้\wbr{}งาน.\\
\cmd{! \~} & ตัว\wbr{}กระทำ\wbr{}เชิง\wbr{}ตรรกะ\wbr{}ให้\wbr{}เป็น\wbr{}เท็จ. หรือ\wbr{}กลับ\wbr{}ค่า\wbr{}บิต.\\
\cmd{**} & ยก\wbr{}กำลัง.\\
\cmd{+ - * /} & บวก, ลบ, คูณ, หาร.\\
\cmd{\%} & เศษ\wbr{}ของ\wbr{}การ\wbr{}หาร.\\
\cmd{<< >>} & เลื่อน\wbr{}บิต\wbr{}ไป\wbr{}ทาง\wbr{}ซ้าย\wbr{}หรือ\wbr{}ขวา.\\
\cmd{<= >= < > != ==} & เปรียบ\wbr{}เทียบ\wbr{}ค่า.\\
\cmd{\&} & ตัว\wbr{}ปฏิบัติ\wbr{}การ\wbr{}บิต AND.\\
\cmd{\^} & ตัว\wbr{}ปฏิบัติ\wbr{}การ\wbr{}บิต exclusive OR.\\
\cmd{|} & ตัว\wbr{}ปฏิบัติ\wbr{}การ\wbr{}บิต OR.\\
\cmd{\&\&} & ตัว\wbr{}ปฏิบัติ\wbr{}การ\wbr{}ตรรกะ AND.\\
\cmd{||} & ตัว\wbr{}ปฏิบัติ\wbr{}การ\wbr{}ตรรกะ OR.\\
\bottomrule
\end{tabular}
\end{table}


\medskip
คำ\wbr{}สั่ง \cmd{factor}\cindex{factor}\refcmd{factor} จะ\wbr{}แสดง\wbr{}ตัว\wbr{}ประกอบ\wbr{}ของ\wbr{}เลข\wbr{}จะน\wbr{}วน\wbr{}เต็ม\wbr{}ที่\wbr{}เป็น\wbr{}อาร์กิวเ\wbr{}มนต์.
\begin{MyExample}[หา\wbr{}ตัว\wbr{}ประกอบ\wbr{}ของ\wbr{}จำนวน\wbr{}ที่\wbr{}ต้องการ.]
\begin{MyEx}
$ \cin{factor 20 9 2004 23354523}
20: 2 2 5
9: 3 3
2004: 2 2 3 167
23354523: 3 3 2594947
\end{MyEx}
\end{MyExample}%$
เนื่อง\wbr{}จาก\wbr{}ตัว\wbr{}ประกอบ\wbr{}ของ\wbr{}เลข\wbr{}จำนวน\wbr{}เฉพาะ (prime) คือ\wbr{}ตัว\wbr{}มัน\wbr{}เอง. ดัง\wbr{}นั้น\wbr{}เรา\wbr{}สามารถ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{factor} ตรวจ\wbr{}สอบ\wbr{}จำนวน\wbr{}ที่\wbr{}ต้องการ\wbr{}ว่า\wbr{}เป็น\wbr{}จำนวน\wbr{}เฉพาะ\wbr{}หรือ\wbr{}ไม่\wbr{}ได้.

\medskip
คำ\wbr{}สั่ง\wbr{}ที่\wbr{}เกี่ยว\wbr{}ข้อง\wbr{}กับ\wbr{}คณิต\wbr{}ศาสตร์\wbr{}อัน\wbr{}สุด\wbr{}ท้าย\wbr{}คือ \cmd{seq} และ\wbr{}มี\wbr{}ประโยชน์\wbr{}ใช้\wbr{}ใน\wbr{}การ\wbr{}เขียน\wbr{}เชลล์สค\wbr{}ริปต์\wbr{}ด้วย. คำ\wbr{}สั่ง \cmd{seq}\cindex{seq}\refcmd{seq} จะ\wbr{}แสดง\wbr{}จำนวน\wbr{}ตัว\wbr{}เลข\wbr{}เป็น\wbr{}ลำดับ\wbr{}ไป\wbr{}เรื่อยๆ\wbr{}ตัว\wbr{}อย่าง\wbr{}เช่น.
\begin{MyExample}[แสดง\wbr{}ลำดับ\wbr{}ของ\wbr{}จำนวน\wbr{}ไป\wbr{}เรื่อยๆ.]
\begin{MyEx}
$ \cin{seq 3} \mycomment{ถ้า\wbr{}มี\wbr{}อาร์กิวเ\wbr{}มนต์\wbr{}ตัว\wbr{}เดียว\wbr{}จะ\wbr{}เริ่ม\wbr{}ตั้ง\wbr{}แต่ \cmd{1}}
1
2
3
$ \cin{seq -s ' ' 10 19} \mycomment{ลำดับ\wbr{}เพิ่ม\wbr{}ที\wbr{}ละ \cmd{1} ตั้ง\wbr{}แต่ \cmd{10} ถึง \cmd{19}}
10 11 12 13 14 15 16 17 18 19
$ \cin{seq -s ' ' -w 5 5 50} \mycomment{ลำดับ\wbr{}เพิ่ม\wbr{}ที\wbr{}ละ \cmd{5} ตั้ง\wbr{}แต่ \cmd{5} ถึง \cmd{50}}
05 10 15 20 25 30 35 40 45 50
\end{MyEx}
\end{MyExample}%$
ตัว\wbr{}เลือก \cmd{-s} ใช้\wbr{}ระบุ\wbr{}สาย\wbr{}อักขระ\wbr{}ที่\wbr{}ต้องการ\wbr{}ใช้\wbr{}เป็น\wbr{}ตัว\wbr{}คั่น\wbr{}ระหว่าง\wbr{}จำนวน. ถ้า\wbr{}ไม่\wbr{}ระบุ\wbr{}จะ\wbr{}ใช้ \cmd{\bs{}n} เป็น\wbr{}ตัว\wbr{}คั่น\wbr{}ระหว่าง\wbr{}จำนวน\wbr{}โดย\wbr{}ปริยาย. ตัว\wbr{}เลือก \cmd{-w} จะ\wbr{}เติม\wbr{}เลข 0 ก่อน\wbr{}หน้า\wbr{}ตัว\wbr{}เลข\wbr{}ทำ\wbr{}ให้\wbr{}จำนวน\wbr{}ที่\wbr{}แสดง\wbr{}ทั้ง\wbr{}หมด\wbr{}มี\wbr{}ขนาด\wbr{}เท่า\wbr{}กัน (ใช้\wbr{}จำนวน\wbr{}ตัว\wbr{}อักษร\wbr{}เท่า\wbr{}กัน). คำ\wbr{}สั่ง \cmd{seq} นี้\wbr{}มี\wbr{}ประโยชน์\wbr{}ใช้\wbr{}ใน\wbr{}เชลล์สค\wbr{}ริปต์\wbr{}ร่วม\wbr{}กับ\wbr{}ไวย\wbr{}กรณ์ \cmd{for}.
\begin{MyExample}[ใช้ \cmd{seq} ร่วม\wbr{}กับ \cmd{for}]
\begin{MyEx}
$ \cin{for i in `seq -f '%03g' 10`} \mycomment{ใช้\wbr{}ตัว\wbr{}เลือก \cmd{-f} จัด\wbr{}รูป\wbr{}แบบ\wbr{}จำนวน}
> \cin{do}
> \cin{wget -nd http://somewhere.net/doc/$i.html} \mycomment{ใช้\wbr{}โปรแกรม\wbr{}คำ\wbr{}สั่ง \cmd{wget} ดาว์นโ\wbr{}หลด\wbr{}ไฟล์}
> \cin{done}
\end{MyEx}
\end{MyExample}
ตัว\wbr{}อย่าง\wbr{}ข้าง\wbr{}บน\wbr{}เป็น\wbr{}การ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{seq} ร่วม\wbr{}กับ\wbr{}ไวย\wbr{}กรณ์ \cmd{for} เพื่อ\wbr{}ดาว์นโ\wbr{}หลด\wbr{}เอก\wbr{}สาร\wbr{}ที่\wbr{}เป็น\wbr{}ตัว\wbr{}เลข\wbr{}เรียง\wbr{}กัน\wbr{}เช่น \cmd{001.html}, \cmd{002.html} ฯลฯ ด้วย\wbr{}คำ\wbr{}สั่ง \cmd{wget}. ใน\wbr{}ตัว\wbr{}อย่าง\wbr{}จะ\wbr{}ใช้\wbr{}ตัว\wbr{}เลือก \cmd{-f} เพื่อ\wbr{}ระบุ\wbr{}รูป\wbr{}แบบ\wbr{}ที่\wbr{}ต้องการ\wbr{}คือ\wbr{}ให้\wbr{}เติม\wbr{}ศูนย์\wbr{}ให้\wbr{}จำนวน\wbr{}เต็ม\wbr{}มี\wbr{}ขนาด 3 ตัว\wbr{}อักษร.

\subsection{ซ้ำ}
\cmd{yes}\cindex{yes}\refcmd{yes} เป็น\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}แปลก\wbr{}คือ\wbr{}จะ\wbr{}แสดง\wbr{}ตัว\wbr{}อักษร \cmd{y} ไป\wbr{}เรื่อยๆ\wbr{}บรรทัด\wbr{}ต่อ\wbr{}บรรทัด\wbr{}จน\wbr{}กว่า\wbr{}จะ\wbr{}กด \cmd{C-c} เพื่อ\wbr{}หยุด\wbr{}การ\wbr{}ทำ\wbr{}งาน. ถ้า\wbr{}ให้\wbr{}อากิวเ\wbr{}มนต์\wbr{}เป็น\wbr{}คำ\wbr{}ว่า Hello ก็\wbr{}จะ\wbr{}แสดง\wbr{}คำ\wbr{}ว่า Hello ไป\wbr{}เรื่อยๆ. คำ\wbr{}สั่ง\wbr{}นี้\wbr{}สามารถ\wbr{}ใช้\wbr{}ร่วม\wbr{}กับ\wbr{}คำ\wbr{}สั่ง\wbr{}อื่น\wbr{}ที่\wbr{}ต้องการ\wbr{}คำ\wbr{}ตอบ\wbr{}และ\wbr{}ผู้\wbr{}ใช้\wbr{}ขี้\wbr{}เกียจ\wbr{}พิมพ์ \cmd{y} (หรือ\wbr{}สาย\wbr{}อักขระ\wbr{}ใดๆ\wbr{}ก็\wbr{}ได้) ไป\wbr{}เรื่อยๆ\wbr{}เพื่อ\wbr{}ตอบ\wbr{}คำ\wbr{}ถาม. ตัว\wbr{}อย่าง\wbr{}เช่น\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}ใช้\wbr{}ลบ\wbr{}ไฟล์ \cmd{rm -i} จะ\wbr{}ถาม\wbr{}ย้ำ\wbr{}ให้\wbr{}เรา\wbr{}ตอบ \cmd{y} หรือ \cmd{n} ทุก\wbr{}ครั้ง\wbr{}ที่\wbr{}จะ\wbr{}ลบ\wbr{}ไฟล์. แทน\wbr{}ที่\wbr{}เรา\wbr{}ต้อง\wbr{}พิมพ์ \cmd{y} ตอบ\wbr{}ด้วย\wbr{}มือ, สามารถ\wbr{}ทำ\wbr{}ตาม\wbr{}ตัว\wbr{}อย่าง\wbr{}ต่อ\wbr{}ไป\wbr{}นี้\wbr{}ได้.
\begin{MyExample}[ใช้\wbr{}คำ\wbr{}สั่ง \cmd{yes} ตอบ\wbr{}คำ\wbr{}ถาม\wbr{}ที่\wbr{}ซ้ำๆ\wbr{}กัน.]
\begin{MyEx}
$ \cin{yes | rm *} \mycomment{สมมติ\wbr{}ว่า \cmd{rm} คือ alias ของ \cmd{rm -i}}
\end{MyEx}
\end{MyExample}%$


\subsection{เปลี่ยน\wbr{}ตัว\wbr{}เอง\wbr{}เป็น\wbr{}ผู้\wbr{}ใช้\wbr{}อื่น}
คำ\wbr{}สั่ง \cmd{su} ใช้\wbr{}สำหรับ\wbr{}เปลี่ยน ID จาก\wbr{}ผู้\wbr{}ใช้\wbr{}คน\wbr{}หนึ่ง\wbr{}ไป\wbr{}เป็น\wbr{}ผู้\wbr{}ใช้\wbr{}ที่\wbr{}ต้องการ. โดย\wbr{}ปรกติ\wbr{}จะ\wbr{}มัก\wbr{}ใช้\wbr{}เปลี่ยน ID ของ\wbr{}ผู้\wbr{}ใช้\wbr{}ทั่ว\wbr{}ไป\wbr{}เป็น root เพื่อ\wbr{}สั่ง\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}ผู้\wbr{}ใช้\wbr{}ทั่ว\wbr{}ไป\wbr{}ไม่\wbr{}สามารถ\wbr{}สั่ง\wbr{}ได้. นอก\wbr{}จาก\wbr{}การ\wbr{}เปลี่ยน ID ของ\wbr{}ผู้\wbr{}ใช้\wbr{}แล้ว\wbr{}ยัง\wbr{}สามารถ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{su} สั่ง\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}ต้องการ\wbr{}โดย\wbr{}ใช้ ID ของ\wbr{}คน\wbr{}อื่น\wbr{}เป็น\wbr{}ผู้\wbr{}กระทำ\wbr{}ได้\wbr{}ด้วย\wbr{}โดย\wbr{}ที่\wbr{}ไม่\wbr{}ต้อง\wbr{}เปลี่ยน ID เป็น\wbr{}คน\wbr{}นั้น.

\begin{MyExample}[ใช้ \cmd{su} สั่ง\wbr{}คำ\wbr{}สั่ง\wbr{}ด้วย ID ของ\wbr{}คน\wbr{}อื่น.]
\begin{MyEx}
$ \cin{su -c "cat /etc/shadow"}
Password: \mycomment{ใส่\wbr{}พาส\wbr{}เวิร์ด\wbr{}ของ root}
...
halt:*:9797:0:::::
operator:*:9797:0:::::
shutdown:*:9797:0:::::
...
\end{MyEx}
\end{MyExample}%$
เนื่อง\wbr{}จาก ID ที่\wbr{}ใช้\wbr{}สั่ง\wbr{}คำ\wbr{}สั่ง \cmd{cat} คือ root, จึง\wbr{}สามารถ\wbr{}เปิด\wbr{}อ่าน\wbr{}ไฟล์\wbr{}ที่ root ดู\wbr{}ได้\wbr{}แต่\wbr{}คน\wbr{}อื่น\wbr{}อ่าน\wbr{}ไม่\wbr{}ได้\wbr{}เช่น\wbr{}ไฟล์ \cmd{/etc/shadow} เป็นต้น. การ\wbr{}ที่\wbr{}เปลี่ยน ID ใน\wbr{}ลักษณะ\wbr{}นี้\wbr{}เรีย\wbr{}กว่า \emph{effective user ID}\gindex{effective user ID} คือ ID ที่\wbr{}มี\wbr{}ผล\wbr{}จริง\wbr{}ขณะ\wbr{}ปฏิบัติ\wbr{}งาน.

%\cmd{su} เป็น\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}อนุ\wbr{}ญาติ\wbr{}ให้\wbr{}คน\wbr{}ใด\wbr{}คน\wbr{}หนึ่ง\wbr{}เปลี่ยน ID เป็น\wbr{}อีก\wbr{}คน\wbr{}หนึ่ง, หรือ\wbr{}สั่ง\wbr{}คำ\wbr{}สั่ง\wbr{}ด้วย ID ของ\wbr{}ใคร\wbr{}ก็\wbr{}ได้. แต่\wbr{}วิธี\wbr{}นี้\wbr{}ยัง\wbr{}ไม่\wbr{}สะดวก\wbr{}เท่า\wbr{}ไร\wbr{}นัก\wbr{}เพราะ\wbr{}ผู้\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง\wbr{}ต้อง\wbr{}รู้\wbr{}รหัส\wbr{}ผ่าน\wbr{}ของ ID ที่\wbr{}ต้องการ\wbr{}เปลี่ยน\mymemo{ถ้า root เป็\wbr{}นคร\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{su} ไม่\wbr{}จำ\wbr{}เป็น\wbr{}ต้อง\wbr{}รู้\wbr{}รหัส\wbr{}ผ่าน\wbr{}ของ ID ที่\wbr{}ต้องการ\wbr{}เปลี่ยน.}. ดัง\wbr{}นั้น\wbr{}ใน\wbr{}ระบบ\wbr{}ใหม่ๆ\wbr{}จึง\wbr{}มี\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}คล้ายๆ\wbr{}กัน\wbr{}คือ \cmd{sudo}. คำ\wbr{}สั่ง \cmd{sudo} เป็น\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}อนุ\wbr{}ญาติ\wbr{}ให้\wbr{}ผู้\wbr{}ใช้\wbr{}ที่\wbr{}ระบุ\wbr{}ใน\wbr{}ไฟล์ \cmd{sudoers}

\section{แพ็ก\wbr{}เกจ textutils}
จุด\wbr{}เด่น\wbr{}ของ\wbr{}คำ\wbr{}สั่ง\wbr{}ใน\wbr{}ระบบ\wbr{}ปฏิบัติ\wbr{}การ\wbr{}ยู\wbr{}นิกซ์\wbr{}ซึ่ง\wbr{}สืบ\wbr{}ทอด\wbr{}มา\wbr{}ถึง\wbr{}ลิ\wbr{}นุกซ์\wbr{}ได้\wbr{}แก่\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}ใช้\wbr{}จัด\wbr{}การ\wbr{}ไฟล์เท็กซ์\wbr{}ทั้ง\wbr{}หลาย. เนื่อง\wbr{}จาก\wbr{}คำ\wbr{}สั่ง\wbr{}เหล่า\wbr{}นี้\wbr{}รับ\wbr{}ข้อ\wbr{}มูล\wbr{}เป็นเท็กซ์\wbr{}และ\wbr{}ให้\wbr{}ผล\wbr{}ลัพธ์\wbr{}เป็นเท็กซ์, การ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง\wbr{}ต่างๆ\wbr{}ร่วม\wbr{}กัน\wbr{}โดย\wbr{}ใช้\wbr{}ไปป์\wbr{}จึง\wbr{}สะดวก\wbr{}และ\wbr{}มี\wbr{}ประสิทธิภาพ\wbr{}ใน\wbr{}หลายๆ\wbr{}ด้าน. ใน\wbr{}ช่วง\wbr{}นี้\wbr{}จะ\wbr{}แนะ\wbr{}นำ\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}ประมวล\wbr{}ผล\wbr{}ข้อ\wbr{}มูลเท็กซ์\wbr{}ซึ่ง\wbr{}จะ\wbr{}มี\wbr{}ประโยชน์\wbr{}ไม่\wbr{}ว่า\wbr{}จะ\wbr{}ใช้\wbr{}ช่วย\wbr{}การ\wbr{}พัฒนา\wbr{}ซอฟต์แวร์, ดู\wbr{}และ\wbr{}ระบบ, หรือ\wbr{}ใช้\wbr{}งาน\wbr{}ทั่ว\wbr{}ไป.


\begin{longtable}{lp{.55\textwidth}l}
\caption{โปรแกรม\wbr{}คำ\wbr{}สั่ง\wbr{}ในแพ็ก\wbr{}เกจ textutils.}\label{tab:textutils}\\
\toprule
\multicolumn{1}{c}{คำ\wbr{}สั่ง} & \multicolumn{1}{c}{คำ\wbr{}อธิบาย} & \multicolumn{1}{c}{อ้าง\wbr{}อิง}\\
\midrule
\cmd{cat} & รวม\wbr{}ข้อ\wbr{}มูล\wbr{}แล้ว\wbr{}แสดง\wbr{}ผล\wbr{}ทาง stdout.& หน้า \pageref{cmd:cat}\\
\cmd{cksum} & แสดง\wbr{}ผล\wbr{}รวมตรว\wbr{}สอบ (checksum) และ\wbr{}นับ\wbr{}จำนวนไบต์\wbr{}ใน\wbr{}ไฟล์.& หน้า \pageref{cmd:cksum}\\
\cmd{comm} & เปรียบ\wbr{}เทียบ\wbr{}ไฟล์\wbr{}สอง\wbr{}ไฟล์\wbr{}บรรทัด\wbr{}ต่อ\wbr{}บรรทัด.& หน้า \pageref{cmd:comm}\\
\cmd{csplit} & แยก\wbr{}ไฟล์\wbr{}ออก\wbr{}เป็น\wbr{}ไฟล์\wbr{}ย่อยๆ\wbr{}ตาม\wbr{}เนื้อ\wbr{}หา\wbr{}ที่\wbr{}ระบุ.&\\
\cmd{cut} & ตัด\wbr{}ส่วน\wbr{}ที่\wbr{}ไม่\wbr{}ต้องการ\wbr{}ออก\wbr{}จาก\wbr{}ทุก\wbr{}บรรทัด\wbr{}ใน\wbr{}ไฟล์.& หน้า \pageref{cmd:cut}\\
\cmd{expand} & เปลี่ยน tab ให้\wbr{}เป็น space.& หน้า \pageref{cmd:expand}\\
\cmd{fmt} & จัด\wbr{}รูป\wbr{}แบบ\wbr{}ของ\wbr{}ข้อ\wbr{}ความ\wbr{}ให้\wbr{}เหมาะ\wbr{}สม.&\\
\cmd{fold} & ตัด\wbr{}บรรทัด\wbr{}ของ\wbr{}ข้อ\wbr{}มูล\wbr{}เข้า\wbr{}ตาม\wbr{}ความ\wbr{}กว้าง\wbr{}ที่\wbr{}ระบุ.&\\
\cmd{join} & รวม\wbr{}บรรทัด\wbr{}ของ\wbr{}ไฟล์\wbr{}สอง\wbr{}ไฟล์\wbr{}เมื่อ\wbr{}เจอ\wbr{}ส่วน\wbr{}ที่\wbr{}เหมือน\wbr{}กัน.& หน้า \pageref{cmd:join}\\
\cmd{md5sum} & คำนวณ\wbr{}และ\wbr{}ตรวจ\wbr{}สอบ\wbr{}ค่า MD5.& หน้า \pageref{cmd:md5sum}\\
\cmd{nl} & แสดง\wbr{}เลข\wbr{}บรรทัด\wbr{}ของ\wbr{}ไฟล์\wbr{}ที่\wbr{}ต้องการ.& หน้า \pageref{cmd:nl}\\
\cmd{od} & เท\wbr{}ข้อ\wbr{}มูล (dump) ออก\wbr{}มา\wbr{}ให้\wbr{}อยู่\wbr{}ใน\wbr{}รูป\wbr{}แบบ\wbr{}เลข\wbr{}ฐาน\wbr{}แปด\wbr{}และ\wbr{}อื่นๆ.& หน้า \pageref{cmd:od}\\
\cmd{paste} & นำ\wbr{}ข้อ\wbr{}มูล\wbr{}ใน\wbr{}ไฟล์\wbr{}เป็น\wbr{}บล็อก\wbr{}มา\wbr{}ต่อ\wbr{}กัน\wbr{}ใน\wbr{}แนว\wbr{}นอน.& หน้า \pageref{cmd:paste}\\
\cmd{pr} & แปลง\wbr{}ข้อ\wbr{}ความ\wbr{}ใน\wbr{}ไฟล์\wbr{}เพื่อ\wbr{}พิมพ์\wbr{}ออก\wbr{}ทาง\wbr{}เครื่อง\wbr{}พิมพ์.&\\
\cmd{ptx} & สร้าง permuted index.&\\
\cmd{sort} & เรียง\wbr{}ลำดับ\wbr{}บรรทัด\wbr{}ใน\wbr{}ไฟล์.& หน้า \pageref{cmd:sort}\\
\cmd{split} & แบ่ง\wbr{}ไฟล์\wbr{}ออก\wbr{}เป็น\wbr{}ไฟล์\wbr{}ย่อยๆ.& หน้า \pageref{cmd:split}\\
\cmd{sum} & คำนวณ\wbr{}ผล\wbr{}รวม\wbr{}ตรวจ\wbr{}สอบ (checksum) และ\wbr{}นับ\wbr{}บล็อก.&\\
\cmd{tac} & รวม\wbr{}ไฟล์\wbr{}และ\wbr{}แสดง\wbr{}ผล\wbr{}แบบ\wbr{}กลับ\wbr{}บรรทัด (ตรง\wbr{}ข้าม\wbr{}กับ \cmd{cat})&\\
\cmd{tail} & แสดง\wbr{}ช่วง\wbr{}ท้าย\wbr{}ของ\wbr{}ไฟล์.& หน้า \pageref{cmd:tail}\\
\cmd{tr} & แปลง\wbr{}และ\wbr{}ลบ\wbr{}อักขระ\wbr{}ที่\wbr{}ต้องการ.& หน้า \pageref{cmd:tr}\\
\cmd{tsort} & จัด\wbr{}ลำดับ topological sort.&\\
\cmd{unexpand} & เปลี่ยน space เป็น tab.& หน้า \cmd{unexpand}\\
\cmd{uniq} & ลบ\wbr{}บรรทัด\wbr{}ที่\wbr{}ซ้ำ\wbr{}กัน. มัก\wbr{}ใช้\wbr{}ร่วม\wbr{}กับ\wbr{}คำ\wbr{}สั่ง \cmd{sort}.& หน้า \pageref{cmd:uniq}\\
\cmd{wc} & แสดง\wbr{}จำนวนไบต์, คำ, และ\wbr{}บรรทัด\wbr{}ใน\wbr{}ไฟล์.& หน้า \pageref{cmd:wc}\\
\cmd{head} & แสดง\wbr{}ส่วน\wbr{}ต้นๆ\wbr{}ของ\wbr{}ไฟล์.& หน้า \pageref{cmd:head}\\
\bottomrule
\end{longtable}

\subsection{แสดง\wbr{}ข้อ\wbr{}มูล}
\begin{figure}[!htb]
\plfigure{.8}{file_display.eps}{คำ\wbr{}สั่ง\wbr{}ที่\wbr{}ใช้\wbr{}แสดง\wbr{}ข้อ\wbr{}มูล\wbr{}ส่วน\wbr{}ต่างๆ.}{file_display}
\end{figure}

จาก\wbr{}บท\wbr{}ที่\wbr{}ผ่าน\wbr{}มา\wbr{}มี\wbr{}ตัว\wbr{}อย่าง\wbr{}การ\wbr{}ใช้\wbr{}งาน\wbr{}คำ\wbr{}สั่ง \cmd{cat} มาก\wbr{}พอ\wbr{}และ\wbr{}ไม่\wbr{}จำ\wbr{}เป็น\wbr{}ต้อง\wbr{}อธิบาย\wbr{}แล้ว\wbr{}ว่า\wbr{}คำ\wbr{}สั่ง \cmd{cat} ใช้\wbr{}ทำ\wbr{}อะไร. คำ\wbr{}สั่ง \cmd{cat} สามารถ\wbr{}ใช้\wbr{}แสดง\wbr{}เลข\wbr{}บรรทัด\wbr{}ทุก\wbr{}บรรทัด\wbr{}ด้วย\wbr{}ตัว\wbr{}เลือก \cmd{-n} ซึ่ง\wbr{}ในแพ็ก\wbr{}เกจ textutils ก็\wbr{}มี\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}ใช้\wbr{}เลข\wbr{}บรรทัด\wbr{}ใน\wbr{}ไฟล์\wbr{}ด้วย\wbr{}เหมือน\wbr{}กัน\wbr{}แต่\wbr{}มี\wbr{}ลูก\wbr{}เล่น\wbr{}มาก\wbr{}กว่า.

ถ้า\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{nl}\cindex{nl}\refcmd{nl} โดย\wbr{}ไม่\wbr{}มี\wbr{}อาร์กิวเ\wbr{}มนต์\wbr{}จะ\wbr{}แสดง\wbr{}เลข\wbr{}บรรทัด\wbr{}เฉพาะ\wbr{}บรรทัด\wbr{}ที่\wbr{}มี\wbr{}ข้อ\wbr{}มูล\wbr{}เท่า\wbr{}นั้น. คำ\wbr{}สั่ง \cmd{nl} สามารถ\wbr{}แสดง\wbr{}เลข\wbr{}บรรทัด\wbr{}ได้\wbr{}หลาย\wbr{}แบบ\wbr{}ขึ้น\wbr{}อยู่\wbr{}กับ\wbr{}ตัว\wbr{}เลือก\wbr{}ที่\wbr{}ระบุ. การ\wbr{}แสดง\wbr{}เลข\wbr{}บรรทัด\wbr{}ที่\wbr{}คำ\wbr{}สั่ง \cmd{cat} ไม่\wbr{}สามารถ\wbr{}ทำ\wbr{}ได้\wbr{}เช่น\wbr{}การ\wbr{}เติม\wbr{}ศูนย์\wbr{}ที่\wbr{}ตัว\wbr{}เลข\wbr{}ให้\wbr{}มี\wbr{}จำนวน\wbr{}ตัว\wbr{}อักษร\wbr{}เท่า\wbr{}กัน.

\begin{MyExample}[ใช้ \cmd{nl} แสดง\wbr{}เลข\wbr{}บรรทัด.]
\begin{MyEx}
$ \cin{yes | head -n 5 | nl -n rz -b a -w 3} \mycomment{ใช้\wbr{}คำ\wbr{}สั่ง \cmd{yes} สร้าง\wbr{}ข้อ\wbr{}มูล 5 บรรทัด}
001     y
002     y
003     y
004     y
005     y
\end{MyEx}
\end{MyExample}%$

จาก\wbr{}ตัว\wbr{}อย่าง\wbr{}เป็น\wbr{}การ\wbr{}แสดง\wbr{}เลข\wbr{}บรรทัด\wbr{}โดย\wbr{}จัด\wbr{}ให้\wbr{}เลข\wbr{}บรรทัด\wbr{}ชิด\wbr{}ขวา\wbr{}และ\wbr{}เติม\wbr{}เลข\wbr{}ศูนย์\wbr{}ด้วย\wbr{}ตัว\wbr{}เลือก \cmd{-n rz}, แสดง\wbr{}ตัว\wbr{}เลข\wbr{}ทุก\wbr{}บรรทัด\wbr{}ด้วย\wbr{}ตัว\wbr{}เลือก \cmd{-b a} และ\wbr{}ให้\wbr{}เลข\wbr{}บรรทัด\wbr{}มี\wbr{}สาม\wbr{}หลัก\wbr{}ด้วย\wbr{}ตัว\wbr{}เลือก \cmd{-w 3}. คำ\wbr{}สั่ง \cmd{nl} จะ\wbr{}มี\wbr{}ประโยชน์\wbr{}เมื่อ\wbr{}ต้องการ\wbr{}ดู\wbr{}เลข\wbr{}บรรทัด\wbr{}เช่น\wbr{}เวลา\wbr{}พิมพ์\wbr{}รหัส\wbr{}ต้น\wbr{}ฉบับ\wbr{}พร้อม\wbr{}เลข\wbr{}บรรทัด\wbr{}ออก\wbr{}ทาง\wbr{}เครื่อง\wbr{}พิมพ์.

\medskip
คำ\wbr{}สั่ง \cmd{tac}\cindex{tac} เป็น\wbr{}การ\wbr{}เล่น\wbr{}คำ\wbr{}โดย\wbr{}กลับ\wbr{}ตัว\wbr{}อักษร\wbr{}ของ\wbr{}คำ\wbr{}สั่ง \cmd{cat} เป็น \cmd{tac}. คำ\wbr{}สั่ง\wbr{}นี้\wbr{}จะ\wbr{}แสดง\wbr{}ข้อ\wbr{}มูล\wbr{}เป็น\wbr{}บรรทัด\wbr{}โดย\wbr{}จะ\wbr{}แสดง\wbr{}ข้อ\wbr{}มูล\wbr{}ที่\wbr{}อยู่\wbr{}ใน\wbr{}บรรทัด\wbr{}สุด\wbr{}ท้าย\wbr{}ก่อน\wbr{}ไล่\wbr{}ขึ้น\wbr{}ไป\wbr{}เรื่อยๆ\wbr{}จน\wbr{}ถึง\wbr{}บรรทัด\wbr{}แรก\wbr{}ซึ่ง\wbr{}การ\wbr{}ทำ\wbr{}งาน\wbr{}นี้\wbr{}จะ\wbr{}ตรง\wbr{}กัน\wbr{}ข้าม\wbr{}กับ\wbr{}คำ\wbr{}สั่ง \cmd{cat}. นอก\wbr{}จาก\wbr{}นี้\wbr{}ยัง\wbr{}มี\wbr{}คำ\wbr{}สั่ง \cmd{rev}\cindex{rev} สำหรับ\wbr{}แสดง\wbr{}ข้อ\wbr{}มูล\wbr{}จาก\wbr{}ข้าง\wbr{}หลัง\wbr{}ไป\wbr{}ข้าง\wbr{}หน้า, ไบต์\wbr{}ต่อไบต์.

\subsection{จัด\wbr{}รูป\wbr{}แบบ\wbr{}ข้อ\wbr{}มูล}
คำ\wbr{}สั่ง\wbr{}ที่\wbr{}ใช้\wbr{}จัด\wbr{}รูป\wbr{}แบบ\wbr{}ข้อ\wbr{}มูลเท็กซ์\wbr{}ได้\wbr{}แก่ \cmd{fmt}, \cmd{pr} และ \cmd{fold}. คำ\wbr{}สั่ง\wbr{}เหล่า\wbr{}นี้\wbr{}สร้าง\wbr{}มา\wbr{}เพื่อ\wbr{}ใช้\wbr{}กับ\wbr{}ข้อ\wbr{}มูลเท็กซ์\wbr{}ภาษา\wbr{}อังกฤษ\wbr{}แต่\wbr{}ก็\wbr{}ควร\wbr{}จะ\wbr{}รู้\wbr{}ไว้\wbr{}เพราะ\wbr{}เป็น\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}ใช้\wbr{}งาน\wbr{}ได้\wbr{}จริง\wbr{}และ\wbr{}มี\wbr{}ประโยชน์.

รูป\wbr{}ที่ \ref{fig:fmt} แสดง\wbr{}ความ\wbr{}แตก\wbr{}ต่าง\wbr{}ระหว่าง\wbr{}ข้อ\wbr{}มูลเท็กซ์\wbr{}ที่\wbr{}ยัง\wbr{}ไม่\wbr{}ได้\wbr{}จัด\wbr{}ย่อ\wbr{}หน้า\wbr{}กับ\wbr{}ข้อ\wbr{}มูล\wbr{}ที่\wbr{}จัด\wbr{}ย่อ\wbr{}หน้า\wbr{}แล้ว\wbr{}ด้วย\wbr{}คำ\wbr{}สั่ง \cmd{fmt}.

\begin{figure}[!htb]
\ifthenelse{\isodd{\pageref{fig:fmt}}}%
{\parbox{\headwidth}{\center\scalebox{.35}{\includegraphics{fmt_1.eps}~~~~\includegraphics{fmt_2.eps}}\caption{ใช้ \cmd{fmt} จัด\wbr{}รูป\wbr{}แบบ\wbr{}ข้อ\wbr{}มูล.}\label{fig:fmt}}}%
{\leftskip=\moveback\parbox{\headwidth}{\center\scalebox{.35}{\includegraphics{fmt_1.eps}~~~~\includegraphics{fmt_2.eps}}\caption{ใช้ \cmd{fmt} จัด\wbr{}รูป\wbr{}แบบ\wbr{}ข้อ\wbr{}มูล.}\label{fig:fmt}}}
\end{figure}

คำ\wbr{}สั่ง \cmd{fmt}\cindex{fmt}\refcmd{fmt} จะ\wbr{}พยายาม\wbr{}ตัด\wbr{}เรียง\wbr{}ข้อ\wbr{}มูล\wbr{}เป็น\wbr{}บรรทัดๆ โดย\wbr{}ที่\wbr{}แต่\wbr{}ละ\wbr{}บรรทัด\wbr{}มี\wbr{}ความ\wbr{}ยาว\wbr{}ไม่\wbr{}เกิน 75 ตัว\wbr{}อักษร. จำนวน\wbr{}อักษร\wbr{}นี้\wbr{}สามารถ\wbr{}กำหนด\wbr{}ได้\wbr{}ด้วย\wbr{}ตัว\wbr{}เลือก \cmd{-w} (width). ถ้า\wbr{}ใช้\wbr{}ตัว\wbr{}เลือก \cmd{-u} จะ\wbr{}เป็น\wbr{}การ\wbr{}ลบ\wbr{}ช่อง\wbr{}ไฟ\wbr{}ที่\wbr{}เกิน\wbr{}และ\wbr{}ไม่\wbr{}จำ\wbr{}เป็น\wbr{}ได้\wbr{}ด้วย. ตัว\wbr{}อย่าง\wbr{}เช่น ``a\ \ pencil'' เป็น ``a pencil''. บรรทัด\wbr{}ว่าง\wbr{}ที่\wbr{}อยู่\wbr{}ใน\wbr{}ข้อ\wbr{}มูล\wbr{}นำ\wbr{}เข้า\wbr{}จะ\wbr{}ถือ\wbr{}ว่า\wbr{}เป็น\wbr{}การ\wbr{}เริ่ม\wbr{}ต้น\wbr{}ย่อ\wbr{}หน้า. คำ\wbr{}สั่ง \cmd{fmt} จะ\wbr{}แบ่ง\wbr{}บรรทัด\wbr{}ที่\wbr{}ยาว\wbr{}เกิน\wbr{}จำนวน\wbr{}อักษร\wbr{}ที่\wbr{}กำหนด\wbr{}และ\wbr{}จะ\wbr{}รวม\wbr{}บรรทัด\wbr{}ที่\wbr{}สั้นๆ\wbr{}ให้\wbr{}มี\wbr{}ความ\wbr{}กว้าง\wbr{}ไม่\wbr{}เกิน\wbr{}ที่\wbr{}กำหนด.

\medskip
คำ\wbr{}สั่ง \cmd{pr}\cindex{pr} ใช้\wbr{}สำหรับ\wbr{}จัด\wbr{}เรียง\wbr{}หน้า\wbr{}เพื่อ\wbr{}พิมพ์\wbr{}ออก\wbr{}ทาง\wbr{}เครื่อง\wbr{}พิมพ์. การ\wbr{}จัด\wbr{}เรียง\wbr{}หน้า\wbr{}นี้\wbr{}เป็น\wbr{}การ\wbr{}จัด\wbr{}เรียง\wbr{}แบบ\wbr{}ง่ายๆ\wbr{}ตาม\wbr{}ความ\wbr{}กว้าง\wbr{}ของ\wbr{}บรรทัด (72 ตัว\wbr{}อักษร) และ\wbr{}ความ\wbr{}ยาว\wbr{}ของ\wbr{}หน้า\wbr{}ใน\wbr{}หน่วย\wbr{}บรรทัด (66 บรรทัด). นอก\wbr{}จาก\wbr{}นี้\wbr{}คำ\wbr{}สั่ง \cmd{fmt} จะ\wbr{}พิมพ์\wbr{}หัว\wbr{}กระดาษ\wbr{}ให้\wbr{}ด้วย.

\begin{figure}[!tb]
\plfigure{.35}{pr.eps}{ใช้\wbr{}คำ\wbr{}สั่ง \cmd{fmt} และ \cmd{pr} จัด\wbr{}หน้า\wbr{}กระดาษ\wbr{}แบบ\wbr{}ง่ายๆ.}{pr}
\end{figure}

คำ\wbr{}สั่ง\wbr{}สุด\wbr{}ท้าย\wbr{}ที่\wbr{}ใช้\wbr{}จัด\wbr{}ข้อ\wbr{}มูล\wbr{}คือ \cmd{fold}\cindex{fold}. คำ\wbr{}สั่ง \cmd{fold} จะ\wbr{}ตัด\wbr{}บรรทัด\wbr{}ที่\wbr{}ยาวๆ\wbr{}ให้\wbr{}มี\wbr{}ความ\wbr{}กว้าง (ตัว\wbr{}อักษร) ไม่\wbr{}เกิน\wbr{}ความ\wbr{}กว้าง\wbr{}ที่\wbr{}กำหนด. คำ\wbr{}สั่ง\wbr{}นี้\wbr{}จะ\wbr{}คล้าย\wbr{}กับ\wbr{}คำ\wbr{}สั่ง \cmd{fmt} แต่\wbr{}จะ\wbr{}ไม่\wbr{}มี\wbr{}การ\wbr{}รวม\wbr{}บรรทัด\wbr{}ที่\wbr{}ติด\wbr{}กัน. การ\wbr{}ตัด\wbr{}บรรทัด\wbr{}ของ\wbr{}คำ\wbr{}สั่ง \cmd{fold} จะ\wbr{}ตัด\wbr{}ตาม\wbr{}จำนวน\wbr{}อักษร\wbr{}ไม่\wbr{}ได้\wbr{}ตัด\wbr{}แบ่ง\wbr{}บรรทัด\wbr{}ตาม\wbr{}ช่อง\wbr{}ว่าง\wbr{}ทำ\wbr{}ให้\wbr{}ไม่\wbr{}สวย\wbr{}งาม. ถ้า\wbr{}ต้องการ\wbr{}ตัด\wbr{}บรรทัด\wbr{}ด้วย\wbr{}ช่อง\wbr{}ว่าง, คือ\wbr{}ตัด\wbr{}บรรทัด\wbr{}แบ่ง\wbr{}ตาม\wbr{}คำ\wbr{}ภาษา\wbr{}อังกฤษ\wbr{}ให้\wbr{}ใช้\wbr{}ตัด\wbr{}เลือก \cmd{-s}.


\subsection{หัว\wbr{}หาง}
คำ\wbr{}สั่ง\wbr{}ที่\wbr{}ใช้\wbr{}แสดง\wbr{}บาง\wbr{}ส่วน\wbr{}ของ\wbr{}ไฟล์\wbr{}ในแพ็ก\wbr{}เกจ textutils ได้\wbr{}แก่ \cmd{head} และ \cmd{tail}. คำ\wbr{}สั่ง \cmd{head} ใช้\wbr{}แสดง\wbr{}ส่วน\wbr{}ต้น\wbr{}ของ\wbr{}ไฟล์\wbr{}เป็น\wbr{}บรรทัด, ใน\wbr{}ทาง\wbr{}ตรง\wbr{}กัน\wbr{}ข้าม\wbr{}คำ\wbr{}สั่ง \cmd{tail} ใช้\wbr{}แสดง\wbr{}ส่วน\wbr{}ท้าย\wbr{}ของ\wbr{}ไฟล์\wbr{}เป็น\wbr{}บรรทัด.

เรา\wbr{}สามารถ\wbr{}กำหนด\wbr{}จำนวน\wbr{}บรรทัด\wbr{}ที่\wbr{}ต้องการ\wbr{}ให้\wbr{}แสดง\wbr{}ได้\wbr{}ด้วย\wbr{}ตัว\wbr{}เลือก \cmd{-n} แล้ว\wbr{}ตาม\wbr{}ด้วย\wbr{}จำนวน\wbr{}บรรทัด\wbr{}ที่\wbr{}ต้องการ. ตัว\wbr{}เลือก\wbr{}นี้\wbr{}ใช้\wbr{}ได้\wbr{}ทั้ง\wbr{}คำ\wbr{}สั่ง \cmd{head} และ \cmd{tail}. คำ\wbr{}สั่ง \cmd{tail}\cindex{tail} มี\wbr{}ประโยชน์\wbr{}ใช้\wbr{}ดู \emph{log}\gindex{log@log file} ของ \emph{daemon} %
\myvocab{d}{daemon}{โปร\wbr{}เซส\wbr{}แบบ background ที่\wbr{}มี\wbr{}โปร\wbr{}เซส ID แม่ (PPID) เป็น 1 (โปร\wbr{}เซส \cmd{init}). โปร\wbr{}เซส\wbr{}เหล่า\wbr{}นี้\wbr{}มัก\wbr{}จะ\wbr{}เป็น\wbr{}โปร\wbr{}เซส\wbr{}ที่\wbr{}ทำ\wbr{}งาน\wbr{}โดย\wbr{}อัตโนมัติ\wbr{}ถูก\wbr{}สร้าง\wbr{}ตอน\wbr{}ที่\wbr{}ระบบ\wbr{}เริ่ม\wbr{}ทำ\wbr{}งาน. โปร\wbr{}เซส\wbr{}เหล่า\wbr{}นี้\wbr{}บาง\wbr{}ตัว\wbr{}อาจ\wbr{}เป็น\wbr{}โปร\wbr{}เซส\wbr{}ที่\wbr{}ช่วย\wbr{}ดู\wbr{}แล\wbr{}ระบบ, เ\wbr{}ซิฟร์\wbr{}เวอร์ เช่น \cmd{cron}, \cmd{sendmail} เป็นต้น.}%
ซึ่ง daemon จะ\wbr{}เขียน\wbr{}ข้อ\wbr{}ความ\wbr{}ลง\wbr{}ใน\wbr{}ไฟล์ล็\wbr{}อก\wbr{}ต่อ\wbr{}ท้าย\wbr{}ไฟล์\wbr{}เรื่อยๆ\wbr{}ถ้า\wbr{}มี\wbr{}เหตุ\wbr{}การณ์\wbr{}สำคัญ\wbr{}เกิด\wbr{}ขึ้น. เรา\wbr{}สามารถ\wbr{}ดู\wbr{}การ\wbr{}ทำ\wbr{}งาน, ข้อ\wbr{}ผิด\wbr{}พลาด\wbr{}ของ deamon ได้\wbr{}จาก log. ตัว\wbr{}อย่าง\wbr{}เช่น log เก็บ\wbr{}ข้อ\wbr{}ผิด\wbr{}พลาด\wbr{}ของเว็บเ\wbr{}ซิฟร์\wbr{}เวอร์ apache ได้\wbr{}แก่\wbr{}ไฟล์ \cmd{/var/log/apache/error\_log}\mymemo{ไฟล์ log ของ apache อาจ\wbr{}จะ\wbr{}แตก\wbr{}ต่าง\wbr{}กัน\wbr{}แล้ว\wbr{}แต่\wbr{}ระบบ\wbr{}และดิสท\wbr{}ริ\wbr{}บิว, ตลอด\wbr{}จน\wbr{}รุ่น\wbr{}ของ apache ที่\wbr{}ใช้.} เรา\wbr{}สามารถ\wbr{}ติด\wbr{}ตาม\wbr{}ดู\wbr{}ข้อ\wbr{}ความ\wbr{}ที่\wbr{}เขียน\wbr{}ใน\wbr{}ไฟล์\wbr{}นี้\wbr{}ได้\wbr{}เรื่อย\wbr{}โดย\wbr{}ใช้\wbr{}ตัว\wbr{}เลือก \cmd{-f}\mymemo{\cmd{-f} ย่อ\wbr{}มา\wbr{}จาก follow.}.
\begin{MyExample}[ใช้ \cmd{tail} ติด\wbr{}ตาม\wbr{}ดู log.]
\begin{MyEx}
# \cin{tail -f /var/log/apache/error_log}
[Thu Aug 05 01:53:49 2004] [notice] caught SIGTERM, shutting down
[Thu Aug 05 23:02:43 2004] [notice] Digest: generating secret for digest aut
hentication ...
[Thu Aug 05 23:02:43 2004] [notice] Digest: done
[Thu Aug 05 23:02:44 2004] [notice] Apache/2.0.50 (Gentoo/Linux) configured -- r
esuming normal operations
[Thu Aug 05 23:32:58 2004] [error] [client 219.178.56.123] File does not exist:
/var/www/localhost/htdocs/default.ida
[Fri Aug 06 00:46:18 2004] [error] [client 219.154.229.60] request failed: URI t
oo long (longer than 8190)
[Fri Aug 06 02:17:14 2004] [notice] caught SIGTERM, shutting down
[Tue Sep 28 21:38:46 2004] [notice] Digest: generating secret for digest authent
ication ...
[Tue Sep 28 21:38:46 2004] [notice] Digest: done
[Tue Sep 28 21:38:47 2004] [notice] Apache/2.0.50 (Gentoo/Linux) configured -- r
esuming normal operations
\cursorprompt \mycomment{คำ\wbr{}สั่ง\wbr{}ทำ\wbr{}งาน\wbr{}แบบ foreground}
\end{MyEx}
\end{MyExample}
จาก\wbr{}ตัว\wbr{}อย่าง\wbr{}ถ้าเ\wbr{}ซิฟร์\wbr{}เวอร์\wbr{}มี\wbr{}ข้อ\wbr{}ความ notice, error เพิ่ม\wbr{}เติม\wbr{}ก็\wbr{}จะ\wbr{}เขียน\wbr{}ใส่\wbr{}ไฟล์ log เพิ่ม\wbr{}และ \cmd{tail} ก็\wbr{}จะ\wbr{}แสดง\wbr{}บรรทัด\wbr{}ที่\wbr{}เขียน\wbr{}เพิ่ม\wbr{}เข้า\wbr{}มา\wbr{}โดย\wbr{}อัตโนมัติ. เรา\wbr{}อาจ\wbr{}จะ\wbr{}สั่ง\wbr{}คำ\wbr{}สั่ง\wbr{}แบบ background ก็\wbr{}ได้, แล้ว\wbr{}ใช้เ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}นั้น\wbr{}ทำ\wbr{}งาน\wbr{}อื่นๆ\wbr{}ต่อ\wbr{}ไป. ถ้า\wbr{}มี\wbr{}ข้อ\wbr{}ความ\wbr{}เพิ่ม\wbr{}เติม\wbr{}เข้า\wbr{}มา\wbr{}ใน log ก็\wbr{}จะ\wbr{}ปรากฏ\wbr{}ในเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}นั้น. การ\wbr{}ใช้\wbr{}งาน\wbr{}แบบ\wbr{}นี้\wbr{}เหมาะ\wbr{}สำหรับ\wbr{}หา\wbr{}สาเหตุ, ข้อ\wbr{}ผิด\wbr{}พลาด\wbr{}เวลาเ\wbr{}ซิฟร์\wbr{}เวอร์\wbr{}หรือ\wbr{}โปรแกรม\wbr{}ที่\wbr{}มี\wbr{}ไฟล์ log ทำ\wbr{}งาน\wbr{}ผิด\wbr{}พลาด\wbr{}และ\wbr{}เรา\wbr{}กำลัง\wbr{}แก้\wbr{}ไข\wbr{}อยู่.

บาง\wbr{}ครั้ง\wbr{}ถ้า\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{tail} กับ\wbr{}ตัว\wbr{}เลือก \cmd{-f} ดู log ค้าง\wbr{}ไว้\wbr{}นาน, มี\wbr{}โอกาส\wbr{}ที่\wbr{}ระบบ\wbr{}จะ\wbr{}เปลี่ยนล็\wbr{}อก\wbr{}ไฟล์\wbr{}ที่\wbr{}กำลัง\wbr{}ดู\wbr{}อยู่\wbr{}ไป\wbr{}เป็น\wbr{}ชื่อ\wbr{}อื่น\wbr{}แล้ว\wbr{}สร้าง log ตัว\wbr{}ใหม่\wbr{}ด้วย\wbr{}ชื่อ\wbr{}เดียว\wbr{}กัน. ตัว\wbr{}อย่าง\wbr{}เช่น\wbr{}ระบบ\wbr{}อาจ\wbr{}จะ\wbr{}เปลี่ยน\wbr{}ชื่อ\wbr{}ไฟล์ \cmd{error\_log} ไป\wbr{}เป็น \cmd{error\_log.1} แล้ว\wbr{}สร้าง log ใหม่\wbr{}ด้วย\wbr{}ชื่อ \cmd{error\_log} เหมือน\wbr{}เดิม. สำหรับ log ที่\wbr{}เก่า\wbr{}เกิน\wbr{}ไป\wbr{}ก็\wbr{}อาจ\wbr{}จะ\wbr{}ถู\wbr{}กลบ\wbr{}ทิ้ง\wbr{}ไป\wbr{}เพื่อ\wbr{}ประหยัด\wbr{}พื้น\wbr{}ที่. ใน\wbr{}กรณี\wbr{}ที่\wbr{}มี\wbr{}การ\wbr{}เปลี่ยน log แบบ\wbr{}นี้\wbr{}คำ\wbr{}สั่ง \cmd{tail} กับ\wbr{}ตัว\wbr{}เลือก \cmd{-f} จะ\wbr{}ไม่\wbr{}สามารถ\wbr{}ดู log ที่\wbr{}สร้าง\wbr{}ใหม่\wbr{}ได้\wbr{}ถึง\wbr{}แม้\wbr{}ว่า\wbr{}จะ\wbr{}เป็น\wbr{}ชื่อ\wbr{}เดียว\wbr{}กัน\wbr{}เพราะ\wbr{}คำ\wbr{}สั่ง \cmd{tail} จะ\wbr{}ยึด\wbr{}กับ file description เป็น\wbr{}หลัก, ไม่\wbr{}ได้\wbr{}ดู\wbr{}ที่\wbr{}ชื่อ. ถ้า\wbr{}ต้องการ\wbr{}ดู\wbr{}ไฟล์\wbr{}ที่\wbr{}มี\wbr{}ชื่อ\wbr{}เดียว\wbr{}กัน\wbr{}ต่อ\wbr{}ไป\wbr{}เรื่อยๆ\wbr{}ต้อง\wbr{}ใช้\wbr{}ตัว\wbr{}เลือก \cmd{--follow=name} แทน.

\subsection{แบ่ง\wbr{}ไฟล์, รวม\wbr{}ไฟล์}
ใน\wbr{}ปัจจุบัน\wbr{}อาจ\wbr{}จะ\wbr{}ไม่\wbr{}มี\wbr{}ความ\wbr{}จำ\wbr{}เป็น\wbr{}แบ่ง\wbr{}ไฟล์\wbr{}ที่\wbr{}มี\wbr{}ขนาด\wbr{}ใหญ่\wbr{}ให้\wbr{}เป็น\wbr{}ไฟล์\wbr{}เล็กๆ\wbr{}เท่า\wbr{}ไร\wbr{}นัก, เพราะ\wbr{}มี\wbr{}อุปกรณ์\wbr{}พก\wbr{}พา\wbr{}เก็บ\wbr{}ข้อ\wbr{}มูล\wbr{}ขนาด\wbr{}ใหญ่\wbr{}เช่น\wbr{}ฮาร์ดดิสก์\wbr{}พก\wbr{}พา\wbr{}แบบ USB เป็นต้น. อย่าง\wbr{}ไร\wbr{}ก็\wbr{}ตาม\wbr{}ผู้\wbr{}อ่าน\wbr{}ก็\wbr{}ควร\wbr{}จะ\wbr{}รู้\wbr{}วิธี\wbr{}การ\wbr{}แบ่ง\wbr{}ไฟล์\wbr{}ให้\wbr{}เป็น\wbr{}ไฟล์\wbr{}ย่อย\wbr{}ด้วย\wbr{}สำหรับ\wbr{}กรณี\wbr{}จำ\wbr{}เป็น\wbr{}เช่น การ\wbr{}แบ่ง\wbr{}ไฟล์\wbr{}ขนาด\wbr{}ใหญ่\wbr{}ให้\wbr{}เป็น\wbr{}ไฟล์\wbr{}ขนาด\wbr{}เล็ก\wbr{}หลายๆ\wbr{}ไฟล์\wbr{}เก็บ\wbr{}ลงฟล็\wbr{}อป\wbr{}ปี้ดิสก์.

การ\wbr{}แบ่ง\wbr{}ไฟล์\wbr{}เป็น\wbr{}ไฟล์\wbr{}ย่อยๆ\wbr{}สามารถ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{split}\cindex{split}\refcmd{split}. ตัว\wbr{}อย่าง\wbr{}เช่น\wbr{}การ\wbr{}แบ่ง\wbr{}ไฟล์\wbr{}ใหญ่ๆ\wbr{}ให้\wbr{}เป็น\wbr{}ไฟล์\wbr{}ย่อยๆ\wbr{}มี\wbr{}ขนาด\wbr{}พอ\wbr{}ดี\wbr{}กับฟล็\wbr{}อป\wbr{}ปี้ดิสก์ 1440MB ทำ\wbr{}ได้\wbr{}ดัง\wbr{}นี้.

\begin{MyExample}[แบ่ง\wbr{}ไฟล์\wbr{}ใหญ่ๆ\wbr{}ให้\wbr{}มี\wbr{}ขนาด\wbr{}พอ\wbr{}กับ\wbr{}แผ่นฟล็\wbr{}อป\wbr{}ปี้ดิสก์.]
\begin{MyEx}
$ \cin{split -b `bc <<<'1440*1024'` bigfile small}
$ \cin{ls -l}
total 4108
-rw-r--r--    1 poonlap  users     2097152 Sep 22 23:19 bigfile
-rw-r--r--    1 poonlap  users     1474560 Sep 22 23:24 smallaa
-rw-r--r--    1 poonlap  users      622592 Sep 22 23:24 smallab
\end{MyEx}
\end{MyExample}
ตัว\wbr{}เลือก \cmd{-b} จะ\wbr{}แบ่ง\wbr{}ไฟล์\wbr{}แต่\wbr{}ละ\wbr{}ไฟล์\wbr{}ให้\wbr{}มี\wbr{}ขนาด\wbr{}ตาม\wbr{}ที่\wbr{}กำหนด (ถ้า\wbr{}เป็น\wbr{}ไป\wbr{}ได้). ใน\wbr{}กรณี\wbr{}จะ\wbr{}พยายาม\wbr{}แบ่ง\wbr{}ไฟล์\wbr{}ให้\wbr{}มี\wbr{}ขนาด\wbr{}เป็น $1440 \times 1024 = 1474560$ ไบต์. การ\wbr{}กำหนด\wbr{}จำนวนไบต์\wbr{}ใน\wbr{}ตัว\wbr{}อย่าง\wbr{}ใช้\wbr{}การ\wbr{}แทน\wbr{}ค่า\wbr{}คำ\wbr{}สั่ง \cmd{bc} ซึ่ง\wbr{}จะ\wbr{}คำนวณ\wbr{}ผล\wbr{}ลัพธ์\wbr{}เป็นไบต์\wbr{}ให้. ใน\wbr{}ตัว\wbr{}อย่าง\wbr{}มี\wbr{}การ\wbr{}กำหนด\wbr{}ชื่อ\wbr{}นำ\wbr{}หน้า\wbr{}ไฟล์\wbr{}ย่อย (prefix) เป็น small. ไฟล์\wbr{}ย่อย\wbr{}ที่\wbr{}แบ่ง\wbr{}แล้\wbr{}วจะ\wbr{}เป็น smallaa และ smallab. aa และ ab คือ\wbr{}ส่วน\wbr{}ตาม\wbr{}หลัง\wbr{}ไฟล์ (suffix) ซึ่ง\wbr{}จะ\wbr{}เป็น\wbr{}ตัว\wbr{}อักษร 2 ตัว. ถ้า\wbr{}ต้องการ\wbr{}เป็น\wbr{}ตัว\wbr{}เลข\wbr{}แทน\wbr{}ให้\wbr{}ใช้\wbr{}ตัว\wbr{}เลือก \cmd{-d}.

\medskip
การ\wbr{}รวม\wbr{}ไฟล์\wbr{}ย่อยๆ\wbr{}ให้\wbr{}เป็น\wbr{}ไฟล์\wbr{}เดียว\wbr{}กัน\wbr{}ให้\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{cat}\cindex{cat}.
\begin{MyExample}[รวม\wbr{}ไฟล์\wbr{}หลายๆ\wbr{}ไฟล์\wbr{}ให้\wbr{}เป็น\wbr{}ไฟล์\wbr{}เดียว\wbr{}กัน.]
\begin{MyEx}
$ \cin{cat small* > combine} \mycomment{เขียน\wbr{}ชื่อ\wbr{}ไฟล์ \cmd{small*} ได้\wbr{}เพราะ\wbr{}เรียง\wbr{}ลำดับ\wbr{}อยู่\wbr{}แล้ว (\cmd{aa, ab})}
$ \cin{ls -l}
total 6160
-rw-r--r--    1 poonlap  users     2097152 Sep 22 23:19 bigfile
-rw-r--r--    1 poonlap  users     2097152 Sep 22 23:59 combine
-rw-r--r--    1 poonlap  users     1474560 Sep 22 23:58 smallaa
-rw-r--r--    1 poonlap  users      622592 Sep 22 23:58 smallab
\end{MyEx}
\end{MyExample}
เรา\wbr{}สามารถ\wbr{}ตรวจ\wbr{}สอบ\wbr{}จำนวนไบต์\wbr{}ของ\wbr{}ไฟล์\wbr{}ที่\wbr{}รวม\wbr{}แล้ว\wbr{}โดย\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{ls}. แต่\wbr{}การ\wbr{}ดู\wbr{}จำนวนไบต์\wbr{}เป็น\wbr{}เพียง\wbr{}แค่\wbr{}การ\wbr{}ตรวจ\wbr{}ดู\wbr{}ขนาด, ไม่\wbr{}สามารถ\wbr{}บอก\wbr{}ได้\wbr{}ว่า\wbr{}เนื้อ\wbr{}หา\wbr{}นั้น\wbr{}ถูก\wbr{}ต้อง\wbr{}หรือ\wbr{}ไม่. สำหรับ\wbr{}การ\wbr{}ตรวจ\wbr{}สอบ\wbr{}เนื้อ\wbr{}หา\wbr{}นั้น\wbr{}อาจ\wbr{}จะ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{cksum}\cindex{cksum}\refcmd{cksum} หรือ \cmd{md5sum}\cindex{md5sum}\refcmd{md5sum}.

\begin{MyExample}[ตรวจ\wbr{}สอบ\wbr{}ดู\wbr{}ค่า\wbr{}เฉพาะ\wbr{}ของ\wbr{}ไฟล์.]
\begin{MyEx}
$ \cin{cksum bigfile combine}
1742489887 2097152 bigfile
1742489887 2097152 combine
$ \cin{md5sum bigfile combine}
b2d1236c286a3c0704224fe4105eca49  bigfile
b2d1236c286a3c0704224fe4105eca49  combine
\end{MyEx}
\end{MyExample}

คำ\wbr{}สั่ง\wbr{}ทั้ง\wbr{}สอง\wbr{}จะ\wbr{}หา\wbr{}ค่า \emph{checksum}\mymemo{คำ\wbr{}สั่ง \cmd{sum} ก็\wbr{}ใช้\wbr{}หา\wbr{}ค่า checksum เช่น\wbr{}กัน\wbr{}แต่\wbr{}ไม่\wbr{}ให้\wbr{}ผล\wbr{}ไม่\wbr{}ค่อย\wbr{}ดี\wbr{}นัก (จำนวน\wbr{}บิต\wbr{}ที่\wbr{}ใช้\wbr{}คำนวณ\wbr{}น้อย).} %
\myvocab{c}{checksum}{วีธี\wbr{}การ\wbr{}ตรวจ\wbr{}สอบ\wbr{}ความ\wbr{}ผิด\wbr{}พลาด\wbr{}ของ\wbr{}ข้อ\wbr{}มูล, หรือ\wbr{}ค่าที่\wbr{}ได้\wbr{}จาก\wbr{}การ\wbr{}ตรวจ\wbr{}สอบ. ค่า\wbr{}เหล่า\wbr{}นี้\wbr{}สามารถ\wbr{}บอก\wbr{}ได้\wbr{}ว่า\wbr{}ข้อ\wbr{}มูล\wbr{}ที่\wbr{}ได้\wbr{}รับ\wbr{}เช่น\wbr{}ข้อ\wbr{}มูล\wbr{}ผ่าน\wbr{}ทางเน็ตเ\wbr{}วิร์ก\wbr{}มี\wbr{}ข้อ\wbr{}ผิด\wbr{}พลาด\wbr{}หรือ\wbr{}ไม่. วิธี\wbr{}การ\wbr{}คำนวณ\wbr{}และ\wbr{}หา\wbr{}ค่า\wbr{}เหล่า\wbr{}นี้\wbr{}มี\wbr{}หลาย\wbr{}วิธี\wbr{}เช่น cyclic redundancy checks, cryptographic message digest. วิธี\wbr{}แบบ cryptographic message digest ยัง\wbr{}มี\wbr{}หลาย\wbr{}วิธี\wbr{}เช่น MD5 เป็นต้น. }%
ของ\wbr{}ข้อ\wbr{}มูล\wbr{}แต่\wbr{}ใช้\wbr{}วิธี\wbr{}การ\wbr{}คำนวณ\wbr{}ต่าง\wbr{}กัน. ปัจจุบัน \cmd{md5sum} ใช้\wbr{}ใน\wbr{}การ\wbr{}ตรวจ\wbr{}สอบ\wbr{}ไฟล์อิม\wbr{}เมจ\wbr{}ของ\wbr{}ซี\wbr{}ดี\wbr{}ว่า\wbr{}ข้อ\wbr{}มูล\wbr{}ที่\wbr{}ดาว์นโ\wbr{}หลด\wbr{}มา\wbr{}นั้น\wbr{}ถูก\wbr{}ต้อง\wbr{}หรือ\wbr{}ไม่, โดย\wbr{}จะ\wbr{}มี\wbr{}ไฟล์\wbr{}ที่\wbr{}ชื่อ MD5SUMS\mymemo{จริงๆ\wbr{}แล้ว\wbr{}ไฟล์ MD5SUMS จะ\wbr{}เป็น\wbr{}ชื่อ\wbr{}อะไร\wbr{}ก็\wbr{}ได้.} อยู่\wbr{}ที่\wbr{}เดียว\wbr{}กัน\wbr{}กับ\wbr{}ไฟล์\wbr{}ที่\wbr{}ดาว์นโ\wbr{}หลด\wbr{}ด้วย. ใน\wbr{}ไฟล์\wbr{}นี้\wbr{}จะ\wbr{}มี\wbr{}ผล\wbr{}ลัพธ์\wbr{}ของ\wbr{}คำ\wbr{}สั่ง \cmd{md5sum} บันทึก\wbr{}อยู่. คน\wbr{}ที่\wbr{}ดาว์นโ\wbr{}หลด\wbr{}ไฟล์\wbr{}ที่\wbr{}ต้องการ\wbr{}ใช้\wbr{}ให้\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{md5sum} หา\wbr{}ค่า checksum ของ\wbr{}ไฟล์\wbr{}นั้น\wbr{}แล้ว\wbr{}ดู\wbr{}เปรียบ\wbr{}เทียบ\wbr{}กับ\wbr{}ไฟล์\wbr{}ที่\wbr{}มี\wbr{}ค่า checksum ไว้\wbr{}ให้\wbr{}แล้ว\wbr{}ด้วย\wbr{}ตา. หรือ\wbr{}จะ\wbr{}ดาว์นโ\wbr{}หลด\wbr{}ไฟล์ MD5SUMS มา\wbr{}ด้วย\wbr{}แล้ว\wbr{}ใช้\wbr{}ตัว\wbr{}เลือก \cmd{-c} ตรวจ\wbr{}สอบ\wbr{}ว่า\wbr{}ค่า checksum ตรง\wbr{}กัน\wbr{}หรือ\wbr{}ไม่.

\begin{MyExample}[ใช้ \cmd{md5sum} ตรวจ\wbr{}สอบ\wbr{}ความ\wbr{}ถูก\wbr{}ต้อง\wbr{}ของ\wbr{}ไฟล์\wbr{}ที่\wbr{}ดาว์นโ\wbr{}หลด.]
\begin{MyEx}
$ \cin{ls -l sarge-i386-netinst.iso MD5SUMS}
-rw-r--r--    1 poonlap  users          57 Sep 23 23:25 MD5SUMS
-rw-------    1 poonlap  users    119470080 Sep 12 15:16 sarge-i386-netinst.iso
$ \cin{cat MD5SUMS}
1068812b8de80f05c55119b0dc64e488  sarge-i386-netinst.iso
$ \cin{md5sum -c MD5SUMS}
sarge-i386-netinst.iso: OK
\end{MyEx}
\end{MyExample}%$

\subsection{จัด\wbr{}การ\wbr{}ข้อ\wbr{}มูล\wbr{}ที่\wbr{}แบ่ง\wbr{}เป็น\wbr{}คอลัมน์}
ใน\wbr{}ระบบ\wbr{}ปฏิบัติ\wbr{}การ\wbr{}ลิ\wbr{}นุกซ์\wbr{}มัก\wbr{}ใช้\wbr{}ไฟล์เท็กซ์\wbr{}เก็บ\wbr{}ข้อ\wbr{}มูล\wbr{}ต่างๆ\wbr{}เช่น ไฟล์ \cmd{/etc/shadow}, \cmd{/etc/services} เป็นต้น. ไฟล์\wbr{}เหล่า\wbr{}นี้\wbr{}อาจ\wbr{}จะ\wbr{}เป็น\wbr{}ไฟล์\wbr{}ที่\wbr{}เก็บ\wbr{}ข้อ\wbr{}มูล\wbr{}ของ\wbr{}ระบบ, ไฟล์\wbr{}ตั้ง\wbr{}ค่า\wbr{}เริ่ม\wbr{}ต้น\wbr{}ของ\wbr{}โปรแกรม, หรือ\wbr{}ไฟล์ล็\wbr{}อก (log file) เก็บ\wbr{}บันทึก\wbr{}ราย\wbr{}งาน\wbr{}การ\wbr{}ทำ\wbr{}งาน\wbr{}ของ\wbr{}โปรแกรม ฯลฯ. บาง\wbr{}ครั้ง\wbr{}เรา\wbr{}ต้องการ\wbr{}สกัด\wbr{}ข้อ\wbr{}มูล\wbr{}จาก\wbr{}ไฟล์\wbr{}เหล่า\wbr{}นี้\wbr{}โดย\wbr{}ระบุ\wbr{}คอลัมน์\wbr{}ที่\wbr{}ต้องการ. ใน\wbr{}กรณี\wbr{}เรา\wbr{}สามารถ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{cut} เพื่อ\wbr{}เลือก\wbr{}เอา\wbr{}ส่วน\wbr{}ที่\wbr{}ต้องการ\wbr{}ออก\wbr{}จาก\wbr{}บรรทัด\wbr{}ได้.

ตัว\wbr{}อย่าง\wbr{}เช่น\wbr{}ไฟล์ \cmd{/etc/passwd}\label{passwd}\gindex{passwd@ไฟล์ \cmd{/etc/passwd}} เก็บ\wbr{}ข้อ\wbr{}มูล\wbr{}ของ\wbr{}ผู้\wbr{}ใช้\wbr{}ใน\wbr{}ระบบ. ข้อ\wbr{}มูล\wbr{}ต่างๆ\wbr{}ของ\wbr{}ผู้\wbr{}ใช้\wbr{}หนึ่ง\wbr{}คน\wbr{}จะ\wbr{}เก็บ\wbr{}เป็น\wbr{}บรรทัด\wbr{}โดย\wbr{}มี\wbr{}รูป\wbr{}แบบ\wbr{}เป็น
\begin{MyVerbatim}
account:password:UID:GID:comment:directory:shell
\end{MyVerbatim}
จะ\wbr{}เห็น\wbr{}ว่า\wbr{}ข้อ\wbr{}มูล\wbr{}ที่\wbr{}เกี่ยว\wbr{}กับ\wbr{}ผู้\wbr{}ใช้\wbr{}จะ\wbr{}เก็บ\wbr{}อยู่\wbr{}ใน\wbr{}หน่วย\wbr{}ของ\wbr{}บรรทัด, และ\wbr{}ข้อ\wbr{}มูล\wbr{}ต่างๆ\wbr{}ที่\wbr{}เกี่ยว\wbr{}ข้อง\wbr{}กับ\wbr{}ผู้\wbr{}ใช้\wbr{}นั้น\wbr{}จะ\wbr{}เก็บ\wbr{}อยู่\wbr{}ใน\wbr{}หน่วย\wbr{}ของ\wbr{}คอลัมน์. สำหรับ\wbr{}ไฟล์ \cmd{/etc/passwd} จะ\wbr{}ใช้\wbr{}เครื่อง\wbr{}หมาย \cmd{:} เป็น\wbr{}ตัว\wbr{}แบ่ง\wbr{}คอลัมน์\wbr{}ซึ่ง\wbr{}แต่\wbr{}ละ\wbr{}คอลัมน์\wbr{}เก็บ\wbr{}ข้อ\wbr{}มูล\wbr{}ดัง\wbr{}ต่อ\wbr{}ไป\wbr{}นี้.
\begin{itemize}
\item account\\
ชื่อล็\wbr{}อก\wbr{}อิน\wbr{}ของ\wbr{}ผู้\wbr{}ใช้\wbr{}ใน\wbr{}ระบบ.
\item password\\
ใน\wbr{}ระบบ\wbr{}ยู\wbr{}นิกซ์\wbr{}สมัย\wbr{}เก่า\wbr{}รหัส\wbr{}ผ่าน\wbr{}ของ\wbr{}ผู้\wbr{}ใช้\wbr{}ใน\wbr{}ระบบ\wbr{}จะ\emph{เข้า\wbr{}รหัส (encrypt)} และ\wbr{}เก็บ\wbr{}ไว้\wbr{}ใน\wbr{}ไฟล์ \cmd{/etc/passwd}. ไฟล์ \cmd{/etc/passwd} นี้\wbr{}เป็น\wbr{}ไฟล์\wbr{}ที่\wbr{}ใคร\wbr{}ก็\wbr{}ได้\wbr{}สามารถ\wbr{}อ่าน\wbr{}ได้\wbr{}ดัง\wbr{}นั้น\wbr{}จึง\wbr{}ไม่\wbr{}ปลอด\wbr{}ภัย\wbr{}ถ้า\wbr{}มี\wbr{}ผู้\wbr{}ประสงค์\wbr{}ร้าย\wbr{}เอา\wbr{}รหัส\wbr{}ผ่าน\wbr{}ของ root ที่\wbr{}เข้า\wbr{}รหัส\wbr{}ไว้\wbr{}ไป\wbr{}ถอด\wbr{}รหัส. ระบบ\wbr{}ยู\wbr{}นิกซ์\wbr{}รุ่น\wbr{}ใหม่\wbr{}และ\wbr{}ลิ\wbr{}นุกซ์\wbr{}จึง\wbr{}เก็บ\wbr{}รหัส\wbr{}ผ่าน\wbr{}ที่\wbr{}เข้า\wbr{}รหัส\wbr{}แล้ว\wbr{}ไว้\wbr{}ใน\wbr{}ไฟล์\wbr{}ต่าง\wbr{}หาก\wbr{}คือ\wbr{}ไฟล์ \cmd{/etc/shadow}\gindex{shadow@ไฟล์ \cmd{/etc/shadow}} ซึ่ง root เท่า\wbr{}นั้น\wbr{}ที่\wbr{}อ่าน\wbr{}ได้. ส่วน\wbr{}รหัส\wbr{}ผ่าน\wbr{}ที่\wbr{}บันทึก\wbr{}ไว้\wbr{}ใน\wbr{}ไฟล์ \cmd{/etc/passwd} จะ\wbr{}แทน\wbr{}ด้วย\wbr{}ตัว\wbr{}อักษร x.
\item UID\\
ตัว\wbr{}เลข User ID ของ\wbr{}ผู้\wbr{}ใช้.
\item GID\\
ตัว\wbr{}เลข Group ID หลัก\wbr{}ที่\wbr{}ผู้\wbr{}ใช้\wbr{}เป็น\wbr{}สมาชิก. ชื่อ\wbr{}กลุ่ม, GID และ\wbr{}สมาชิก\wbr{}สามารถ\wbr{}ดู\wbr{}ได้\wbr{}จาก\wbr{}ไฟล์ \cmd{/etc/group}.\gindex{group@ไฟล์ \cmd{/etc/group}}
\item comment\\
ส่วน\wbr{}ที่\wbr{}เป็น\wbr{}หมาย\wbr{}เหตุ. อาจ\wbr{}จะ\wbr{}เป็น\wbr{}ชื่อ\wbr{}เต็ม\wbr{}ของ\wbr{}ผู้\wbr{}ใช้\wbr{}ก็\wbr{}ได้.
\item directory\\
หมาย\wbr{}ถึง\wbr{}โฮม\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี\wbr{}ของ\wbr{}ผู้\wbr{}ใช้.
\item shell\\
เชลล์\wbr{}เมื่อ\wbr{}ผู้\wbr{}ใช้ล็\wbr{}อก\wbr{}อิน. ถ้า\wbr{}ไม่\wbr{}ต้องการ\wbr{}ให้\wbr{}ผู้\wbr{}ใช้\wbr{}นั้นล็\wbr{}อก\wbr{}อิน\wbr{}ก็\wbr{}อาจ\wbr{}จะ\wbr{}ใช้ \cmd{/bin/false} แทน\wbr{}ก็\wbr{}ได้.
\end{itemize}

ไฟล์\wbr{}อื่น\wbr{}เช่น\wbr{}ไฟล์ \cmd{/etc/services}\gindex{services@ไฟล์ \cmd{/etc/services}} ก็\wbr{}เหมือน\wbr{}กับ\wbr{}ไฟล์ \cmd{/etc/passwd} คือ\wbr{}ใช้\wbr{}เก็บ\wbr{}ข้อ\wbr{}มูล. เก็บ\wbr{}ชื่อ\wbr{}โปร\wbr{}โต\wbr{}คอล\wbr{}อินเ\wbr{}ทอร์เน็ต, หมาย\wbr{}เลข\wbr{}พอร์ต, ชื่อ\wbr{}อื่นๆ, และ\wbr{}หมาย\wbr{}เหตุ. แต่\wbr{}ไฟล์\wbr{}นี้\wbr{}จะ\wbr{}ใช้ tab เป็น\wbr{}ตัว\wbr{}แบ่ง\wbr{}คอมลัมน์\wbr{}แทน\wbr{}ที่\wbr{}จะ\wbr{}ใช้ colon เป็น\wbr{}ตัว\wbr{}แบ่ง\wbr{}คอลัมน์.
\begin{MyExample}[ตัว\wbr{}อย่าง\wbr{}ไฟล์ \cmd{/etc/passwd} และ\wbr{}ไฟล์ \cmd{/etc/services}.]
\begin{MyEx}
$ \cin{cat /etc/passwd}
root:x:0:0:root:/root:/bin/bash
bin:x:1:1:bin:/bin:/bin/false
daemon:x:2:2:daemon:/sbin:/bin/false
adm:x:3:4:adm:/var/adm:/bin/false
...
$ \cin{cat /etc/services}
...
finger          79/tcp
www             80/tcp          http            \# WorldWideWeb HTTP
www             80/udp                          \# HyperText Transfer Protocol
link            87/tcp          ttylink
...
\end{MyEx}
\end{MyExample}

\subsubsection{ตัด -- \cmd{cut}}
สมมติ\wbr{}เรา\wbr{}ต้องการ\wbr{}ดู\wbr{}แค่\wbr{}ชื่อล็\wbr{}อก\wbr{}อิน\wbr{}และ uid จาก\wbr{}ไฟล์ \cmd{/etc/passwd}, เรา\wbr{}สามารถ\wbr{}ใช้ \cmd{cut}\cindex{cut} เลือก\wbr{}เอา\wbr{}เฉพาะ\wbr{}คอลัมน์\wbr{}ที่ 1 ที่\wbr{}เป็น\wbr{}ชื่อล็\wbr{}อก\wbr{}อิน\wbr{}และ\wbr{}คอลัมน์\wbr{}ที่ 3 ที่\wbr{}เป็น uid แสดง\wbr{}บน\wbr{}หน้า\wbr{}จอ\wbr{}ได้\wbr{}ดัง\wbr{}นี้.
\begin{MyExample}[ใช้ \cmd{cut} เลือก\wbr{}คอลัมน์\wbr{}ที่\wbr{}ต้องการ\wbr{}มา\wbr{}แสดง.]
\begin{MyEx}
$ \cin{cut -f 1,3 -d : /etc/passwd}
root:0
bin:1
daemon:2
adm:3
lp:4
...
\end{MyEx}
\end{MyExample}%$
ตัว\wbr{}เลือก \cmd{-f}\mymemo{\cmd{-f} มา\wbr{}จาก\wbr{}คำ\wbr{}ว่า field และ \cmd{-d} มา\wbr{}จาก\wbr{}คำ\wbr{}ว่า delimiter.} ใช้\wbr{}ระบุ\wbr{}คอลัมน์\wbr{}ที่\wbr{}ต้องการ\wbr{}แสดง. ตัว\wbr{}เลือก \cmd{-d} ใช้\wbr{}ระบุ\wbr{}ตัว\wbr{}แบ่ง\wbr{}คอลัมน์\wbr{}ซึ่ง\wbr{}ใน\wbr{}ที่\wbr{}นี้\wbr{}ได้\wbr{}แก่\wbr{}เครื่อง\wbr{}หมาย colon.

\subsubsection{ต่อ -- \cmd{paste}}
cut \& paste ใน\wbr{}ความ\wbr{}หมาย\wbr{}ของ\wbr{}เวิร์ด\wbr{}โปรเซสเซอร์\wbr{}คือ\wbr{}การ\wbr{}ตัด\wbr{}แปะ\wbr{}ข้อ\wbr{}ความ. แต่\wbr{}คำ\wbr{}สั่ง \cmd{cut} และ \cmd{paste} มี\wbr{}ความ\wbr{}หมาย\wbr{}ที่\wbr{}เกี่ยว\wbr{}กับ\wbr{}การ\wbr{}กระทำ\wbr{}เป็น\wbr{}คอลัมน์, เป็น\wbr{}บล็อก. \cmd{cut} เป็น\wbr{}การ\wbr{}แสดง\wbr{}คอลัมน์\wbr{}ที่\wbr{}ต้องการ, \cmd{paste} เป็น\wbr{}ต่อ\wbr{}ไฟล์\wbr{}เป็น\wbr{}บล็อก\wbr{}เข้า\wbr{}เป็น\wbr{}ไฟล์\wbr{}เดียว.

\begin{figure}[!htb]
\plfigure{.7}{paste.eps}{การ\wbr{}ทำ\wbr{}งาน\wbr{}ของ\wbr{}คำ\wbr{}สั่ง \cmd{paste}.}{paste}
\end{figure}


สมมติ\wbr{}ว่า\wbr{}เรา\wbr{}มี\wbr{}ไฟล์\wbr{}อยู่\wbr{}สอง\wbr{}ไฟล์. ไฟล์\wbr{}ที่\wbr{}หนึ่ง\wbr{}ชื่อ \cmd{address.txt} เป็น\wbr{}ไฟล์เท็กซ์\wbr{}ที่\wbr{}เก็บ\wbr{}ชื่อ\wbr{}และ\wbr{}ที่\wbr{}อยู่\wbr{}แบบ \emph{csv (comma separated values)}.\gindex{csv} %
\myvocab{c}{csv}{เป็น\wbr{}คำ\wbr{}ย่อ\wbr{}ของ comma separated values. เป็น\wbr{}รูป\wbr{}แบบ\wbr{}ไฟล์\wbr{}ใช้\wbr{}บันทึก\wbr{}ราย\wbr{}การ (record) เป็น\wbr{}บรรทัดๆ. ภาย\wbr{}ใน\wbr{}บรรทัด\wbr{}สามารถ\wbr{}มี\wbr{}ค่า\wbr{}ได้\wbr{}หลาย\wbr{}คอลัมน์ (field) และ\wbr{}มัก\wbr{}ใช้\wbr{}เครื่อง\wbr{}หมาย comma เป็นต้น\wbr{}แบ่ง\wbr{}คอลัมน์. ไฟล์\wbr{}แบบ\wbr{}นี้\wbr{}สามารถ\wbr{}สร้าง\wbr{}ได้\wbr{}ง่ายๆ\wbr{}ด้วย\wbr{}บรรณาธิ\wbr{}กรณ์\wbr{}ทั่ว\wbr{}ไป\wbr{}หรือ\wbr{}โปรแกรม spreadsheet. ใน\wbr{}ระบบ\wbr{}ลิ\wbr{}นุกซ์\wbr{}มี\wbr{}ไฟล์\wbr{}แบบ\wbr{}นี้\wbr{}เหมือน\wbr{}กัน\wbr{}เช่น\wbr{}ไฟล์ \cmd{/etc/passwd}, \cmd{/etc/group} แต่\wbr{}จะ\wbr{}ใช้\wbr{}เครื่อง\wbr{}หมาย colon เป็น\wbr{}ตัว\wbr{}แบ่ง\wbr{}คอลัมน์.}%
ไฟล์\wbr{}ที่\wbr{}สอง\wbr{}ชื่อ \cmd{email.txt} เก็บ\wbr{}ชื่อ\wbr{}และเ\wbr{}มล\wbr{}ใน\wbr{}รูป\wbr{}แบบ\wbr{}เดียว\wbr{}กัน. เรา\wbr{}สามารถ\wbr{}รวม\wbr{}ไฟล์\wbr{}สอง\wbr{}ไฟล์\wbr{}ให้\wbr{}เป็น\wbr{}ไฟล์\wbr{}เดียว\wbr{}ได้\wbr{}โดย\wbr{}คง\wbr{}คอลัมน์\wbr{}เหมือน\wbr{}เดิม\wbr{}ไว้\wbr{}ได้\wbr{}ด้วย\wbr{}คำ\wbr{}สั่ง \cmd{paste}\cindex{paste}\refcmd{paste}.
\begin{MyExample}[รวม\wbr{}คอลัมน์\wbr{}ด้วย\wbr{}คำ\wbr{}สั่ง \cmd{paste}]
\begin{MyEx}
$ \cin{cat address.txt}
\thtt{ชื่อ}, \thtt{จังหวัด}
\thtt{สม\wbr{}ชาย}, \thtt{กรุง\wbr{}เทพ\wbr{}ฯ}
\thtt{สม\wbr{}หมาย}, \thtt{เชียง\wbr{}ใหม่}
\thtt{สม\wbr{}ยศ}, \thtt{ภูเก็ต}
$ \cin{cat email.txt}
\thtt{ชื่อ}, \thtt{เ\wbr{}มล}
\thtt{สม\wbr{}ชาย}, somchai@gmail.com
\thtt{สม\wbr{}หมาย}, sommai@yahoo.com
\thtt{สม\wbr{}ยศ}, somyod@hotmail.com
$ \cin{cut -f 2 -d , email.txt | paste -d , address.txt -}
\thtt{ชื่อ}, \thtt{จังหวัด}, \thtt{เ\wbr{}มล}
\thtt{สม\wbr{}ชาย}, \thtt{กรุง\wbr{}เทพ\wbr{}ฯ}, somchai@gmail.com
\thtt{สม\wbr{}หมาย}, \thtt{เชียง\wbr{}ใหม่}, sommai@yahoo.com
\thtt{สม\wbr{}ยศ}, \thtt{ภูเก็ต}, somyod@hotmail.com
\end{MyEx}
\end{MyExample}%$
จาก\wbr{}ตัว\wbr{}อย่าง\wbr{}จะ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{cut} เลือก\wbr{}เอา\wbr{}คอลัมน์\wbr{}ที่\wbr{}สอง\wbr{}ของ\wbr{}ไฟล์ \cmd{email.txt} ออก\wbr{}มา\wbr{}ก่อน\wbr{}แล้ว\wbr{}ส่ง\wbr{}ให้\wbr{}คำ\wbr{}สั่ง \cmd{paste} ทาง\wbr{}ไปป์. คำ\wbr{}สั่ง \cmd{paste} รวม\wbr{}คอลัมน์\wbr{}จาก\wbr{}ไฟล์ \cmd{address.txt} และ\wbr{}ไฟล์ \cmd{-} ซึ่ง\wbr{}หมาย\wbr{}ถึง\wbr{}ข้อ\wbr{}มูล\wbr{}ที่\wbr{}รับ\wbr{}มา\wbr{}ทาง stdin (ข้อ\wbr{}มูล\wbr{}จาก \cmd{cut}) แล้ว\wbr{}รวม\wbr{}คอลัมน์\wbr{}บรรทัด\wbr{}ต่อ\wbr{}บรรทัด.



ใน\wbr{}ไฟล์ \cmd{address.txt} และ \cmd{email.txt} มี\wbr{}คอลัมน์\wbr{}ที่\wbr{}เหมือน\wbr{}กัน\wbr{}คือ\wbr{}คอลัมน์\wbr{}ที่\wbr{}เก็บ\wbr{}ชื่อ\wbr{}คน. การ\wbr{}รวม\wbr{}คอลัมน์\wbr{}ใน\wbr{}กรณี\wbr{}นี้\wbr{}จะ\wbr{}ง่าย\wbr{}ขึ้น\wbr{}ถ้า\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{join}\cindex{join}\refcmd{join}.
\begin{MyExample}[รวม\wbr{}คอลัมน์\wbr{}ด้วย\wbr{}คำ\wbr{}สั่ง \cmd{join}]
\begin{MyEx}
$ \cin{join -t , address.txt email.txt}
\thtt{ชื่อ}, \thtt{จังหวัด}, \thtt{เ\wbr{}มล}
\thtt{สม\wbr{}ชาย}, \thtt{กรุง\wbr{}เทพ\wbr{}ฯ}, somchai@gmail.com
\thtt{สม\wbr{}หมาย}, \thtt{เชียง\wbr{}ใหม่}, sommai@yahoo.com
\thtt{สม\wbr{}ยศ}, \thtt{ภูเก็ต}, somyod@hotmail.com
\end{MyEx}
\end{MyExample}%$
คำ\wbr{}สั่ง \cmd{join} จะ\wbr{}ต่อ\wbr{}คอลัมน์\wbr{}ที่\wbr{}สอง\wbr{}ของ\wbr{}ไฟล์\wbr{}ที่\wbr{}สอง\wbr{}ใน\wbr{}ไฟล์\wbr{}ที่\wbr{}หนึ่ง, ถ้า\wbr{}คอลัมน์\wbr{}ที่\wbr{}หนึ่ง\wbr{}ของ\wbr{}ทั้ง\wbr{}สอง\wbr{}ไฟล์\wbr{}มี\wbr{}ค่า\wbr{}เหมือน\wbr{}กัน. ตัว\wbr{}เลือก \cmd{-t} ใช้\wbr{}กำหนด\wbr{}ค่า\wbr{}ตัว\wbr{}แบ่ง\wbr{}คอลัมน์, มิ\wbr{}ฉะนั้น\wbr{}คำ\wbr{}สั่ง \cmd{join} จะ\wbr{}ถือ\wbr{}ว่า\wbr{}ช่อง\wbr{}ว่า\wbr{}เป็น\wbr{}ตัว\wbr{}แบ่ง\wbr{}คอลัมน์\wbr{}โดย\wbr{}ปริยาย.

\subsection{การ\wbr{}เรียง, จัด\wbr{}ลำดับ\wbr{}ข้อ\wbr{}มูล\wbr{}ใน\wbr{}ไฟล์}
สมมติ\wbr{}ว่า\wbr{}เรา\wbr{}ต้องการ\wbr{}จะ\wbr{}ดู\wbr{}ว่า\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี\wbr{}ต่างๆ\wbr{}ใต้ \cmd{/usr} ใช้\wbr{}เนื้อ\wbr{}ที่\wbr{}ไป\wbr{}เท่า\wbr{}ไร\wbr{}สามารถ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{du -sm /usr/*}\refcmd{du}. ผล\wbr{}ลัพธ์\wbr{}ที่\wbr{}ได้\wbr{}จะ\wbr{}เรียง\wbr{}ตาม\wbr{}ลำดับ\wbr{}ชื่อ\wbr{}ของ\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี\wbr{}ที่\wbr{}อยู่\wbr{}ใต้\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี \cmd{/usr}. เพื่อ\wbr{}ความ\wbr{}สะดวก\wbr{}ใน\wbr{}การ\wbr{}ดู\wbr{}ผล\wbr{}เรา\wbr{}สามารถ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{sort}\cindex{sort}\refcmd{sort} เพื่อ\wbr{}เรียง\wbr{}ลำดับ\wbr{}ของ\wbr{}ข้อ\wbr{}มูล\wbr{}บรรทัด\wbr{}ต่อ\wbr{}บรรทัด\wbr{}ได้\wbr{}ดัง\wbr{}นี้.
\begin{MyExample}[การ\wbr{}ใช้ \cmd{sort} เรียง\wbr{}ลำดับ\wbr{}ข้อ\wbr{}มูล.]
\begin{MyEx}
# \cin{du -sm /usr/* | sort -nr}
1343    /usr/portage
1126    /usr/share
752     /usr/lib
609     /usr/src
331     /usr/kde
162     /usr/X11R6
152     /usr/bin
86      /usr/local
54      /usr/include
26      /usr/qt
15      /usr/sbin
4       /usr/libexec
3       /usr/i686-pc-linux-gnu
0       /usr/tmp
0       /usr/man
0       /usr/info
0       /usr/doc
\end{MyEx}
\end{MyExample}
จาก\wbr{}ตัว\wbr{}อย่าง\wbr{}จะ\wbr{}ใช้\wbr{}ตัว\wbr{}เลือก \cmd{-n} เพื่อ\wbr{}ให้\wbr{}เรียง\wbr{}ลำดับ\wbr{}ตาม\wbr{}ตัว\wbr{}เลข. ถ้า\wbr{}ไม่\wbr{}ใช้\wbr{}ตัว\wbr{}เลือก\wbr{}นี้\wbr{}แล้ว\wbr{}ตัว\wbr{}เลข\wbr{}จะ\wbr{}ถือ\wbr{}เป็น\wbr{}ตัว\wbr{}อักขระ\wbr{}และ\wbr{}จะ\wbr{}ได้\wbr{}ผล\wbr{}ที่\wbr{}ไม่\wbr{}ตรง\wbr{}ตาม\wbr{}ต้องการ. ส่วน\wbr{}ตัว\wbr{}เลือก \cmd{-r} ใช้\wbr{}เพื่อ\wbr{}เรียง\wbr{}ลำดับ\wbr{}กลับ\wbr{}จาก\wbr{}มาก\wbr{}ไป\wbr{}หา\wbr{}น้อย, ซึ่ง\wbr{}โดย\wbr{}ปริยาย\wbr{}แล้ว\wbr{}การ\wbr{}เรียง\wbr{}ลำดับ\wbr{}จะ\wbr{}แสดง\wbr{}ผล\wbr{}จาก\wbr{}น้อย\wbr{}ไป\wbr{}หา\wbr{}มาก.

\subsubsection{ลบ\wbr{}บรรทัด\wbr{}ที่\wbr{}ซ้ำ}
คำ\wbr{}สั่ง\wbr{}ที่\wbr{}เกี่ยว\wbr{}ข้อง\wbr{}กับ\wbr{}คำ\wbr{}สั่ง \cmd{sort} ได้\wbr{}แก่\wbr{}คำ\wbr{}สั่ง \cmd{uniq}\cindex{uniq}\refcmd{uniq} ซึ่ง\wbr{}ใช้\wbr{}สำหรับ\wbr{}ลบ\wbr{}บรรทัด\wbr{}ที่\wbr{}ซ้ำ\wbr{}ออก\wbr{}จาก\wbr{}ข้อ\wbr{}มูล\wbr{}ที่\wbr{}เรียง\wbr{}ลำดับ\wbr{}แล้ว.

ใน\wbr{}ระบบ\wbr{}ยู\wbr{}นิกซ์\wbr{}มัก\wbr{}จะ\wbr{}มี\wbr{}ไฟล์\wbr{}ที่\wbr{}เรีย\wbr{}กว่า dictionary file ได้\wbr{}แก่\wbr{}ไฟล์ \cmd{/usr/share/dict/words} และ \cmd{/usr/share/dict/web2}\mymemo{ใน\wbr{}ระบบ\wbr{}ที่\wbr{}ผู้\wbr{}เขียน\wbr{}ใช้\wbr{}มี\wbr{}ไฟล์\wbr{}ทั้ง\wbr{}สอง\wbr{}เหมือน\wbr{}กัน\wbr{}ทุก\wbr{}ประการ. แต่\wbr{}มี\wbr{}ไฟล์\wbr{}อีก\wbr{}ไฟล์\wbr{}คำ\wbr{}ศัพท์\wbr{}อีก\wbr{}ไฟล์\wbr{}หนึ่ง\wbr{}คือ \cmd{/usr/share/dict/web2a} ด้วย.}. ไฟล์\wbr{}ทั้ง\wbr{}สอง\wbr{}เป็น\wbr{}ไฟล์\wbr{}ที่\wbr{}รวม\wbr{}คำ\wbr{}ภาษา\wbr{}อังกฤษ\wbr{}เอา\wbr{}ไว้\wbr{}บรรทัด\wbr{}ต่อ\wbr{}บรรทัด. และ\wbr{}โปรแกรม\wbr{}ที่\wbr{}ใช้\wbr{}ไฟล์\wbr{}นี้\wbr{}ได้\wbr{}แก่\wbr{}โปรแกรม \cmd{look}\cindex{look}\refcmd{look} ซึ่ง\wbr{}จะ\wbr{}แสดง\wbr{}คำ\wbr{}ที่\wbr{}ขึ้น\wbr{}ต้น\wbr{}ด้วย\wbr{}อักษร\wbr{}ที่\wbr{}ใส่\wbr{}เป็น\wbr{}อาร์กิวเ\wbr{}มนต์\wbr{}ของ\wbr{}คำ\wbr{}สั่ง. เพื่อ\wbr{}ที่\wbr{}จะ\wbr{}แนะ\wbr{}นำ\wbr{}การ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{uniq} จะ\wbr{}ขอ\wbr{}ใช้\wbr{}ไฟล์\wbr{}คำ\wbr{}ศัพท์\wbr{}สอง\wbr{}ไฟล์\wbr{}นี้\wbr{}เป็น\wbr{}กรณี\wbr{}ประกอบ.

สมมติ\wbr{}ว่า\wbr{}เรา\wbr{}ต้องการ\wbr{}รวม\wbr{}ไฟล์ \cmd{words} กับ\wbr{}ไฟล์ \cmd{web2a} ให้\wbr{}เป็น\wbr{}ไฟล์\wbr{}เดียว\wbr{}กัน. ปัญหา\wbr{}มี\wbr{}อยู่\wbr{}ว่า\wbr{}เรา\wbr{}จะ\wbr{}แน่\wbr{}ใจ\wbr{}ได้\wbr{}อย่าง\wbr{}ไร\wbr{}ว่า\wbr{}ถ้า\wbr{}รวม\wbr{}คำ\wbr{}ศัพท์\wbr{}ที่\wbr{}อยู่\wbr{}ใน\wbr{}ไฟล์\wbr{}ทั้ง\wbr{}สอง\wbr{}เข้า\wbr{}ด้วย\wbr{}กัน\wbr{}แล้\wbr{}วจะ\wbr{}ไม่\wbr{}มี\wbr{}คำ\wbr{}ศัพท์\wbr{}ที่\wbr{}ซ้ำ\wbr{}กัน? ใน\wbr{}กรณี\wbr{}นี้\wbr{}เรา\wbr{}สามารถ\wbr{}ตรวจ\wbr{}สอบ\wbr{}หรือ\wbr{}ลบ\wbr{}บรรทัด\wbr{}ที่\wbr{}ซ้ำ\wbr{}ได้\wbr{}ด้วย\wbr{}คำ\wbr{}สั่ง \cmd{uniq}.

\begin{MyExample}[ลบ\wbr{}บรรทัด\wbr{}ที่\wbr{}ซ้ำ\wbr{}ด้วย\wbr{}คำ\wbr{}สั่ง \cmd{uniq}.]
\begin{MyEx}
$ \cin{wc -l /usr/share/dict/\{words,web2a\}}
 234937 /usr/share/dict/words
  76205 /usr/share/dict/web2a
 311142 total
$ \cin{cat /usr/share/dict/{words,web2a} | sort | uniq | wc -l}
311142
\end{MyEx}
\end{MyExample}
จาก\wbr{}ตัว\wbr{}อย่าง\wbr{}จะ\wbr{}เห็น\wbr{}ว่า\wbr{}ไฟล์ \cmd{words} มี\wbr{}คำ\wbr{}ศัพท์\wbr{}อยู่ 234,937 คำ, และ\wbr{}ไฟล์ \cmd{web2a} มี\wbr{}คำ\wbr{}ศัพท์\wbr{}อยู่ 76,205 คำ. เรา\wbr{}รวม\wbr{}ไฟล์\wbr{}สอง\wbr{}ไฟล์\wbr{}เข้า\wbr{}ด้วย\wbr{}กัน\wbr{}ด้วย\wbr{}คำ\wbr{}สั่ง \cmd{cat} หลัง\wbr{}จาก\wbr{}นั้น\wbr{}เรียง\wbr{}ลำดับ\wbr{}คำ\wbr{}ศัพท์\wbr{}ด้วย \cmd{sort} และ\wbr{}สุด\wbr{}ท้าย\wbr{}ลบ\wbr{}คำ\wbr{}ที่\wbr{}ซ้ำ\wbr{}ออก\wbr{}ด้วย\wbr{}คำ\wbr{}สั่ง \cmd{uniq}. ผล\wbr{}จาก\wbr{}การ\wbr{}นับ\wbr{}บรรทัด (คำ) ปรากฏ\wbr{}ว่า\wbr{}จำนวน\wbr{}คำ\wbr{}ศัพท์\wbr{}เท่า\wbr{}กับ\wbr{}จำนวน\wbr{}คำ\wbr{}ศัพท์\wbr{}ของ\wbr{}ไฟล์\wbr{}สอง\wbr{}ไฟล์\wbr{}รวม\wbr{}กัน\wbr{}แสดง\wbr{}ว่า\wbr{}ไม่\wbr{}มี\wbr{}คำ\wbr{}ซ้ำ\wbr{}กัน\wbr{}ใน\wbr{}ไฟล์\wbr{}ทั้ง\wbr{}สอง.

คำ\wbr{}สั่ง \cmd{uniq} ยัง\wbr{}มี\wbr{}ตัว\wbr{}เลือก\wbr{}สำหรับ\wbr{}แสดง\wbr{}บรรทัด\wbr{}ที่\wbr{}ซ้ำ\wbr{}กัน\wbr{}เท่า\wbr{}นั้น\wbr{}ได้\wbr{}แก่ \cmd{-d}. และ\wbr{}ตัว\wbr{}เลือก\wbr{}สำหรับ\wbr{}แสดง\wbr{}บรรทัด\wbr{}ที่\wbr{}ซ้ำ\wbr{}กัน\wbr{}เท่า\wbr{}นั้น\wbr{}ได้\wbr{}แก่ \cmd{-u}.


\subsection{การ\wbr{}เปรียบ\wbr{}เทียบ\wbr{}ไฟล์}
การ\wbr{}เปรียบ\wbr{}เทียบ\wbr{}ไฟล์\wbr{}เป็น\wbr{}สิ่ง\wbr{}ที่\wbr{}เกิด\wbr{}ขึ้น\wbr{}บ่อย\wbr{}ครั้ง\wbr{}เมื่อ\wbr{}ทำ\wbr{}งาน\wbr{}กับ\wbr{}คอมพิวเตอร์\wbr{}เช่น\wbr{}ถ้า\wbr{}เป็น\wbr{}ผู้\wbr{}ดู\wbr{}แล\wbr{}ระบบ\wbr{}บาง\wbr{}ครั้ง\wbr{}ต้อง\wbr{}ดู\wbr{}ความ\wbr{}แตก\wbr{}ต่าง\wbr{}ระหว่าง\wbr{}ไฟล์\wbr{}ตั้ง\wbr{}ค่า\wbr{}เริ่ม\wbr{}ต้น\wbr{}ของ\wbr{}โปรแกรม\wbr{}ต่างๆ, ถ้า\wbr{}เป็น\wbr{}ผู้\wbr{}พัฒนา\wbr{}ซอฟต์แวร์\wbr{}ก็\wbr{}อาจ\wbr{}จะ\wbr{}มี\wbr{}ความ\wbr{}จำ\wbr{}เป็น\wbr{}ต้อง\wbr{}หา\wbr{}ความ\wbr{}แตก\wbr{}ต่าง\wbr{}ระหว่าง\wbr{}รหัส\wbr{}ต้น\wbr{}ฉบับ\wbr{}เดิม\wbr{}กับ\wbr{}รหัส\wbr{}ต้น\wbr{}ฉบับ\wbr{}ใหม่ เป็นต้น. ใน\wbr{}ระบบ\wbr{}ปฏิบัติ\wbr{}การ\wbr{}ยู\wbr{}นิกซ์\wbr{}มี\wbr{}คำ\wbr{}สั่ง\wbr{}อำนวย\wbr{}ความ\wbr{}สะดวก\wbr{}ใน\wbr{}การ\wbr{}หา\wbr{}ความ\wbr{}แตก\wbr{}ต่าง\wbr{}ได้\wbr{}แก่ \cmd{cmp}, \cmd{diff}, \cmd{comm} เป็นต้น.

\subsubsection{สำรวจ\wbr{}ความ\wbr{}แตก\wbr{}ต่าง\wbr{}แบบ\wbr{}ง่ายๆ}
คำ\wbr{}สั่ง\wbr{}ที่\wbr{}ใช้\wbr{}สำรวจ\wbr{}ความ\wbr{}แตก\wbr{}ต่าง\wbr{}ระหว่าง\wbr{}ไฟล์\wbr{}สอง\wbr{}ไฟล์\wbr{}อย่าง\wbr{}ง่าย\wbr{}คือ\wbr{}คำ\wbr{}สั่ง \cmd{cmp}\cindex{cmp}\refcmd{cmp}. คำ\wbr{}สั่ง \cmd{cmp}\mymemo{\cmd{cmp} ย่อ\wbr{}มา\wbr{}จาก\wbr{}คำ\wbr{}ว่า compare.} จะ\wbr{}ตรวจ\wbr{}สอบ\wbr{}ความ\wbr{}แตก\wbr{}ต่าง\wbr{}ระหว่าง\wbr{}ไฟล์\wbr{}สอง\wbr{}ไฟล์, ไบต์\wbr{}ต่อไบต์.
\begin{MyExample}[ตรวจ\wbr{}สอบ\wbr{}ความ\wbr{}แตก\wbr{}ต่าง\wbr{}ระหว่าง\wbr{}ไฟล์\wbr{}แบบ\wbr{}ง่ายๆ.]
\begin{MyEx}
$ \cin{cat hello_01.sh}
#!/bin/sh
echo What is you name?
echo -n "> "
read n
echo Hello $n
$ \cin{cat hello_02.sh}
#!/bin/sh
echo What is you name?
echo -n "> "
read name
echo Hello $name!
$ \cin{cmp hello_01.sh hello_02.sh}
hello_01.sh hello_02.sh differ: char 53, line 4
\end{MyEx}
\end{MyExample}%$
คำ\wbr{}สั่ง \cmd{cmp} จะ\wbr{}บอ\wbr{}กว่า\wbr{}ไฟล์\wbr{}ที่\wbr{}ต้องการ\wbr{}เปรียบ\wbr{}เทียบ\wbr{}นั้น\wbr{}มี\wbr{}ความ\wbr{}แตก\wbr{}ต่าง\wbr{}กัน\wbr{}หรือ\wbr{}ไม่. ถ้า\wbr{}ไม่\wbr{}มี\wbr{}ความ\wbr{}แตก\wbr{}ต่าง\wbr{}ก็\wbr{}จะ\wbr{}ไม่\wbr{}แสดง\wbr{}ผล\wbr{}อะไร. ถ้า\wbr{}มี\wbr{}ความ\wbr{}แตก\wbr{}ต่าง\wbr{}ก็\wbr{}จะ\wbr{}ส่ง\wbr{}ข้อ\wbr{}ความ\wbr{}ออก\wbr{}ทาง stdout และ\wbr{}แสดง\wbr{}ตำแหน่งไบต์\wbr{}และ\wbr{}บรรทัด\wbr{}ตรวจ\wbr{}พบ\wbr{}ความ\wbr{}แตก\wbr{}ต่าง\wbr{}ที่\wbr{}เจอ\wbr{}เป็น\wbr{}ที่\wbr{}แรก.\mymemo{เนื่อง\wbr{}จาก\wbr{}ระบบ\wbr{}ปฏิบัติ\wbr{}การ\wbr{}ตระกูล\wbr{}ยู\wbr{}นิกซ์\wbr{}ไม่\wbr{}มี\wbr{}การ\wbr{}แยก\wbr{}แยะ\wbr{}ไฟล์ไบ\wbr{}นารี\wbr{}กับ\wbr{}ไฟล์เท็กซ์, คำ\wbr{}สั่ง \cmd{cmp} ก็\wbr{}เหมือน\wbr{}กับ\wbr{}คำ\wbr{}สั่ง\wbr{}อื่นๆ\wbr{}คือ\wbr{}สามารถ\wbr{}ใช้\wbr{}ได้\wbr{}กับ\wbr{}ไฟล์ไบ\wbr{}นารี\wbr{}ด้วย.}


\subsubsection{แสดง\wbr{}ความ\wbr{}แตก\wbr{}ต่าง\wbr{}บรรทัด\wbr{}ต่อ\wbr{}บรรทัด}
คำ\wbr{}สั่ง \cmd{diff}\cindex{diff}\refcmd{diff}\mymemo{\cmd{diff} ย่อ\wbr{}มา\wbr{}จาก\wbr{}คำ\wbr{}ว่า different.} ใช้\wbr{}แสดง\wbr{}ความ\wbr{}แตก\wbr{}ต่าง\wbr{}ระหว่าง\wbr{}ไฟล์\wbr{}สอง\wbr{}ไฟล์\wbr{}หรือ\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี\wbr{}สอง\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี. ถ้า\wbr{}อาร์กิวเ\wbr{}มนต์\wbr{}ของ\wbr{}คำ\wbr{}สั่ง\wbr{}เป็น\wbr{}ชื่อ\wbr{}ไฟล์, คำ\wbr{}สั่ง \cmd{diff} ก็\wbr{}จะ\wbr{}แสดง\wbr{}ความ\wbr{}แตก\wbr{}ต่าง\wbr{}ของ\wbr{}ไฟล์\wbr{}ทั้ง\wbr{}สอง\wbr{}ดัง\wbr{}ตัว\wbr{}อย่าง\wbr{}ต่อ\wbr{}ไป\wbr{}นี้.
\begin{MyExample}[การ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{diff} ดู\wbr{}ความ\wbr{}แตก\wbr{}ต่าง\wbr{}ระหว่าง\wbr{}ไฟล์.]
\begin{MyEx}
$ \cin{diff hello_01.sh hello_02.sh}
4,5c4,5
< read n
< echo Hello $n
---
> read name
> echo Hello $name!
\end{MyEx}
\end{MyExample}%$
คำ\wbr{}สั่ง \cmd{diff} จะ\wbr{}แสดง\wbr{}เลข\wbr{}บรรทัด\wbr{}และ\wbr{}เครื่อง\wbr{}ตัว\wbr{}อักษร\wbr{}ย่อ\wbr{}เช่น \cmd{2,3c2,3} หมาย\wbr{}ถึง\wbr{}ข้อ\wbr{}มูล\wbr{}บรรทัด\wbr{}ที่ 2 ถึง\wbr{}บรรทัด\wbr{}ที่ 3 เปลี่ยน\wbr{}ไป. หลัง\wbr{}จาก\wbr{}นั้น\wbr{}ก็\wbr{}จะ\wbr{}แสดง\wbr{}บรรทัด\wbr{}ที่\wbr{}แตก\wbr{}ต่าง\wbr{}ของ\wbr{}ไฟล์\wbr{}ที่\wbr{}หนึ่ง\wbr{}ก่อน\wbr{}โดย\wbr{}เติม\wbr{}เครื่อง\wbr{}หมาย\wbr{}มาก\wbr{}กว่า\wbr{}นำ\wbr{}หน้า, และ\wbr{}แสดง\wbr{}บรรทัด\wbr{}ที่\wbr{}แตก\wbr{}ต่าง\wbr{}ของ\wbr{}ไฟล์\wbr{}ที่\wbr{}สอง\wbr{}ถัด\wbr{}มา\wbr{}ตาม\wbr{}ลำดับ.

เนื่อง\wbr{}จาก\wbr{}คำ\wbr{}สั่ง \cmd{diff} เป็น\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}แสดง\wbr{}ความ\wbr{}แตก\wbr{}ต่าง\wbr{}หรือ\wbr{}ความ\wbr{}เปลี่ยน\wbr{}แปลง\wbr{}ระหว่าง\wbr{}ไฟล์\wbr{}สอง\wbr{}ไฟล์, ผู้\wbr{}พัฒนา\wbr{}ซอฟต์\wbr{}เสรี\wbr{}มัก\wbr{}จะ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{diff} ใน\wbr{}การ\wbr{}สร้าง \emph{patch}\myvocab{p}{patch}{แพทช์. ไฟล์\wbr{}ที่\wbr{}มี\wbr{}เนื้อ\wbr{}หา\wbr{}ความ\wbr{}แตก\wbr{}ต่าง\wbr{}ระหว่าง\wbr{}ไฟล์\wbr{}ต้น\wbr{}ฉบับ\wbr{}ก่อน\wbr{}เปลี่ยน\wbr{}แปลง\wbr{}กับ\wbr{}ไฟล์\wbr{}ที่\wbr{}แก้\wbr{}ไข\wbr{}แล้ว. ผู้\wbr{}พัฒนา\wbr{}ซอฟต์แวร์\wbr{}จะ\wbr{}สร้าง\wbr{}ไฟล์ patch ด้วย\wbr{}โปรแกรม \cmd{diff} และ\wbr{}ผู้\wbr{}ที่\wbr{}ต้องการ\wbr{}ใช้\wbr{}ไฟล์ patch นี้\wbr{}จะ\wbr{}ทำ\wbr{}การ patch ไฟล์\wbr{}ดัง\wbr{}กล่าว\wbr{}ให้\wbr{}แก้\wbr{}ไข\wbr{}ไฟล์\wbr{}ต้น\wbr{}ฉบับ\wbr{}ที่\wbr{}ดั้งเดิม\wbr{}ให้\wbr{}มี\wbr{}เนื้อ\wbr{}หา\wbr{}เป็น\wbr{}เนื้อ\wbr{}หา\wbr{}ใหม่\wbr{}ที่\wbr{}แก้\wbr{}ไข\wbr{}แล้ว\wbr{}ด้วย\wbr{}โปรแกรม \cmd{patch}.}. และ\wbr{}ผู้\wbr{}ที่\wbr{}ใช้\wbr{}ไฟล์ patch จะ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{patch} ใน\wbr{}การ\wbr{}เปลี่ยน\wbr{}รหัส\wbr{}ต้น\wbr{}ฉบับ\wbr{}เดิม\wbr{}ให้\wbr{}เป็น\wbr{}รหัส\wbr{}ต้น\wbr{}ฉบับ\wbr{}ใหม่\wbr{}ด้วย\wbr{}ไฟล์ patch.

การ\wbr{}สร้าง\wbr{}ไฟล์ patch ด้วย\wbr{}คำ\wbr{}สั่ง \cmd{diff}, อาร์กิวเ\wbr{}มนต์\wbr{}มัก\wbr{}จะ\wbr{}เป็น\wbr{}ชื่อ\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี\wbr{}และ\wbr{}มัก\wbr{}จะ\wbr{}ใช้\wbr{}ตัว\wbr{}เลือก \cmd{-Naur}.
\begin{table}[!tb]
\center
\caption{ตัว\wbr{}เลือก\wbr{}สำหรับ \cmd{diff} ที่\wbr{}ใช้\wbr{}ใน\wbr{}การ\wbr{}สร้าง\wbr{}ไฟล์ patch.}
\medskip
\begin{tabular}{lp{.7\textwidth}}
\toprule
\multicolumn{1}{c}{ตัว\wbr{}เลือก} & \multicolumn{1}{c}{ความ\wbr{}หมาย}\\
\midrule
\cmd{N} & ถ้า\wbr{}ใน\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี่\wbr{}ที่\wbr{}เปรียบ\wbr{}เทียบ, ถ้า\wbr{}ใน\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี\wbr{}หนึ่ง\wbr{}มี\wbr{}ไฟล์\wbr{}แต่\wbr{}ใน\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี\wbr{}อีก\wbr{}ที่\wbr{}ไม่\wbr{}มี\wbr{}ไฟล์, ให้\wbr{}ถือ\wbr{}ว่า\wbr{}ไฟล์\wbr{}นั้น\wbr{}เป็น\wbr{}ไฟล์\wbr{}ใหม่.\\
\cmd{a} & แสดง\wbr{}ความ\wbr{}แตก\wbr{}ต่าง\wbr{}ของ\wbr{}ไฟล์\wbr{}ไม่\wbr{}ว่า\wbr{}ไฟล์\wbr{}นั้น\wbr{}จะ\wbr{}เป็น\wbr{}ไฟล์\wbr{}แบบไบ\wbr{}นารี.\\
\cmd{u} & แสดง\wbr{}บรรทัด\wbr{}ที่\wbr{}เหมือน\wbr{}กัน\wbr{}ด้วย. บรรทัด\wbr{}ที่\wbr{}มี\wbr{}การ\wbr{}ตัด\wbr{}ออก\wbr{}จาก\wbr{}ไฟล์\wbr{}เดิม\wbr{}จะ\wbr{}มี\wbr{}เครื่อง\wbr{}หมาย \cmd{-} หน้า\wbr{}บรรทัด. และ\wbr{}บรรทัด\wbr{}ที่\wbr{}มี\wbr{}การ\wbr{}เพิ่ม\wbr{}เติม\wbr{}จะ\wbr{}มี\wbr{}เครื่อง\wbr{}หมาย \cmd{+} หน้า\wbr{}บรรทัด.\\
\cmd{r} & สำหรับ\wbr{}เปรียบ\wbr{}เทียบ\wbr{}ไฟล์\wbr{}แบบ recursive. ใช้\wbr{}สำหรับเ\wbr{}ปรียน\wbr{}เทียบ\wbr{}ไฟล์\wbr{}และ\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี\wbr{}ย่อย\wbr{}ใน\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี.\\
\bottomrule
\end{tabular}
\end{table}
\begin{MyExample}[การ\wbr{}สร้าง\wbr{}ไฟล์ patch ด้วย\wbr{}คำ\wbr{}สั่ง \cmd{diff}.]
\begin{MyEx}
$ \cin{diff -Naur hello_01.sh hello_02.sh > hello_01.diff}
$ \cin{cat hello_01.diff}
--- hello_01.sh 2004-08-10 16:45:36.000000000 +0900
+++ hello_02.sh 2004-08-10 16:46:38.000000000 +0900
@@ -1,5 +1,5 @@
 #!/bin/sh
 echo What is you name?
 echo -n "> "
-read n \mycomment{บรรทัด\wbr{}ที่\wbr{}ลบ\wbr{}ออก\wbr{}จาก\wbr{}ไฟล์\wbr{}ที่\wbr{}หนึ่ง}
-echo Hello $n \mycomment{บรรทัด\wbr{}ที่\wbr{}ลบ\wbr{}ออก\wbr{}จาก\wbr{}ไฟล์\wbr{}ที่\wbr{}หนึ่ง}
+read name \mycomment{บรรทัด\wbr{}ที่\wbr{}เพิ่ม\wbr{}เข้า\wbr{}ไป\wbr{}จาก\wbr{}ไฟล์\wbr{}ที่\wbr{}สอง}
+echo Hello $name! \mycomment{บรรทัด\wbr{}ที่\wbr{}เพิ่ม\wbr{}เข้า\wbr{}ไป\wbr{}จาก\wbr{}ไฟล์\wbr{}ที่\wbr{}สร้าง}
\end{MyEx}
\end{MyExample}



\subsubsection{ดู\wbr{}ส่วน\wbr{}ที่\wbr{}เหมือน\wbr{}กัน\wbr{}ของ\wbr{}ไฟล์}
ใน\wbr{}ทาง\wbr{}กลับ\wbr{}กัน\wbr{}ถ้า\wbr{}ต้อง\wbr{}ดู\wbr{}ส่วน\wbr{}ที่\wbr{}เหมือน\wbr{}กัน\wbr{}ของ\wbr{}ไฟล์, ให้\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{comm}\refcmd{comm}\cindex{comm}\mymemo{\cmd{comm} ย่อ\wbr{}มา\wbr{}จาก common.}
\begin{MyExample}[ใช้ \cmd{comm} ดู\wbr{}ส่วน\wbr{}ที่\wbr{}เหมือน\wbr{}กัน\wbr{}ของ\wbr{}ไฟล์.]
\begin{MyEx}
$ \cin{comm hello_01.sh hello_02.sh}
                #!/bin/sh
                echo What is you name?
                echo -n "> "
read n
echo Hello $n
        read name
        echo Hello $name!
\end{MyEx}
\end{MyExample}%$
ผล\wbr{}ลัพธ์\wbr{}ของ\wbr{}คำ\wbr{}สั่ง\wbr{}จะ\wbr{}แบ่ง\wbr{}เป็น 3 คอลัมน์\wbr{}โดย\wbr{}ใช้ tab เป็น\wbr{}ตัว\wbr{}แยก\wbr{}คอลัมน์. คอลัมน์\wbr{}แรก (ซ้าย\wbr{}มือ) จะ\wbr{}แสดง\wbr{}ข้อ\wbr{}มูล\wbr{}ที่\wbr{}มี\wbr{}เฉพาะ\wbr{}ไฟล์\wbr{}ที่\wbr{}หนึ่ง. คอมลัมภ์\wbr{}ที่\wbr{}สอง (ตรง\wbr{}กลาง) จะ\wbr{}แสดง\wbr{}ข้อ\wbr{}มูล\wbr{}ที่\wbr{}มี\wbr{}เฉพาะ\wbr{}ไฟล์\wbr{}ที่\wbr{}สอง. คอลัมน์\wbr{}ที่\wbr{}สาม (ขวา\wbr{}มือ) จะ\wbr{}แสดง\wbr{}ข้อ\wbr{}มูล\wbr{}ร่วม\wbr{}ที่\wbr{}เหมือน\wbr{}กัน\wbr{}ทั้ง\wbr{}สอง\wbr{}ไฟล์.

คำ\wbr{}สั่ง \cmd{comm} มี\wbr{}ตัว\wbr{}เลือก \cmd{-1}, \cmd{-2} และ \cmd{-3} ให้\wbr{}ผู้\wbr{}ใช้\wbr{}สามารถ\wbr{}ระงับ\wbr{}การ\wbr{}แสดง\wbr{}ผล\wbr{}ของ\wbr{}คอลัมน์\wbr{}ที่\wbr{}ต้องการ\wbr{}ได้. ดัง\wbr{}นั้น\wbr{}ถ้า\wbr{}ต้องการ\wbr{}ข้อ\wbr{}มูล\wbr{}ส่วน\wbr{}ที่\wbr{}เหมือน\wbr{}กัน\wbr{}ใน\wbr{}ไฟล์\wbr{}ของ\wbr{}สอง\wbr{}ไฟล์\wbr{}ให้\wbr{}ใช้\wbr{}ตัว\wbr{}เลือก \cmd{-12} ก็\wbr{}จะ\wbr{}แสดง\wbr{}ผล\wbr{}ลัพธ์\wbr{}ที่\wbr{}เป็น\wbr{}คอลัมน์\wbr{}ที่\wbr{}สาม\wbr{}อย่าง\wbr{}เดียว.




\section{การ\wbr{}จัด\wbr{}การ\wbr{}ข้อ\wbr{}มูลเท็กซ์\wbr{}และ regular expression}
ใน\wbr{}ช่วง\wbr{}ที่\wbr{}ผ่าน\wbr{}มา\wbr{}จะ\wbr{}สังเกต\wbr{}เห็น\wbr{}ได้\wbr{}ว่า\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}แนะ\wbr{}นำ\wbr{}ไป\wbr{}เป็น\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}กระทำ\wbr{}กับ\wbr{}กับ\wbr{}ข้อ\wbr{}มูล\wbr{}ใน\wbr{}หน่วย\wbr{}ของ\wbr{}บรรทัด\wbr{}หรือ\wbr{}ไม่\wbr{}ก็\wbr{}คอลัมน์. ใน\wbr{}ช่วง\wbr{}นี้\wbr{}ยัง\wbr{}คง\wbr{}แนะ\wbr{}นำ\wbr{}คำ\wbr{}สั่ง\wbr{}บาง\wbr{}ตัว\wbr{}ที่\wbr{}ยัง\wbr{}อยู่\wbr{}ในแพ็ก\wbr{}เกจ textutils อยู่\wbr{}แต่\wbr{}เป็น\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}เน้น\wbr{}เกี่ยว\wbr{}กับ\wbr{}ตัว\wbr{}ข้อ\wbr{}มูล\wbr{}เช่น\wbr{}การ\wbr{}แก้\wbr{}ไข\wbr{}ข้อ\wbr{}มูล, หรือ\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}ใช้ regular expression.

%\subsection{การ\wbr{}แก้\wbr{}ข้อ\wbr{}มูล\wbr{}ไฟล์\wbr{}อย่าง\wbr{}ง่ายๆ}
%การ\wbr{}แก้\wbr{}ไข\wbr{}ข้อ\wbr{}มูล\wbr{}สามารถ\wbr{}ทำ\wbr{}ได้\wbr{}จาก\wbr{}บรรทัด\wbr{}คำ\wbr{}สั่ง\wbr{}เช่น \cmd{tr}, \cmd{sed}, \cmd{awk} ฯลฯ. คำ\wbr{}สั่ง \cmd{tr} เป็น\wbr{}คำ\wbr{}สั่ง\wbr{}สำหรับ\wbr{}เปลี่ยน\wbr{}อักษร\wbr{}จาก stdin ให้\wbr{}เป็น\wbr{}อักษร\wbr{}ที่\wbr{}ต้องการ, หรือ\wbr{}ลบ\wbr{}ตัว\wbr{}อักษร\wbr{}ที่\wbr{}ไม่\wbr{}ต้องการ. ส่วน\wbr{}คำ\wbr{}สั่ง \cmd{sed} เป็น \emph{stream editor}\gindex{stream editor} คือ\wbr{}เป็น\wbr{}บรรณาธิ\wbr{}กรณ์\wbr{}แบบ\wbr{}ที่\wbr{}ไม่\wbr{}มี\wbr{}การ\wbr{}โต้\wbr{}ตอบ\wbr{}กับ\wbr{}ผู้\wbr{}ใช้, รับ\wbr{}สาย\wbr{}ข้อ\wbr{}มูล\wbr{}มา\wbr{}แล้ว\wbr{}ประมวล\wbr{}ผล\wbr{}ส่ง\wbr{}เป็น\wbr{}ข้อ\wbr{}มูล\wbr{}กลับ\wbr{}ไป\wbr{}ที่\wbr{}ที่\wbr{}ต้องการ. \cmd{sed} มี\wbr{}ความ\wbr{}สามารถ\wbr{}สูง\wbr{}สามารถ\wbr{}ใช้\wbr{}หา\wbr{}คำ\wbr{}ใน\wbr{}ไฟล์\wbr{}และ\wbr{}แก้\wbr{}ไข\wbr{}ข้อ\wbr{}มูล\wbr{}ตาม\wbr{}ที่\wbr{}เขียน\wbr{}ไว้\wbr{}ในสค\wbr{}ริปต์\wbr{}ล่วง\wbr{}หน้า\wbr{}ได้. คำ\wbr{}สั่ง\wbr{}เกี่ยว\wbr{}ข้อง\wbr{}อีก\wbr{}คำ\wbr{}สั่ง\wbr{}หนึ่ง\wbr{}คือ \cmd{awk}. คำ\wbr{}สั่ง \cmd{awk} เป็น\wbr{}โปรแกรม\wbr{}สำหรับ\wbr{}ประมวล\wbr{}ผล\wbr{}ข้อ\wbr{}มูลเท็กซ์. เรียก\wbr{}ได้\wbr{}ว่า\wbr{}เป็น\wbr{}ภาษา\wbr{}คอมพิวเตอร์\wbr{}แบบ\wbr{}หนึ่ง, สามารถ\wbr{}มี\wbr{}ตัวแปร, ฟังก์ชัน ฯลฯ. ปัจจุบัน\wbr{}ไม่\wbr{}ค่อย\wbr{}ใช้\wbr{}มาก\wbr{}นัก\wbr{}เพราะ\wbr{}มี\wbr{}ภาษา\wbr{}ที่\wbr{}ได้\wbr{}รับ\wbr{}อิทธิ\wbr{}พล\wbr{}แนว\wbr{}คิด\wbr{}มา\wbr{}จาก \cmd{awk} และ\wbr{}ใช้\wbr{}แทน \cmd{awk} กัน\wbr{}อย่าง\wbr{}แพร่\wbr{}หลาย\wbr{}เช่น \cmd{perl} เป็นต้น.

\subsection{การ\wbr{}แก้\wbr{}ไข\wbr{}ตัว\wbr{}อักษร}\label{sec:tr}
การ\wbr{}เปลี่ยน\wbr{}ตัว\wbr{}อักษร\wbr{}บาง\wbr{}ตัว\wbr{}ให้\wbr{}เป็น\wbr{}ตัว\wbr{}อักษร\wbr{}ที่\wbr{}ต้องการ, หรือ\wbr{}ลบ\wbr{}ตัว\wbr{}อักษร\wbr{}ที่\wbr{}ไม่\wbr{}ต้องการ\wbr{}ออก\wbr{}จาก\wbr{}ไฟล์\wbr{}มัก\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{tr}\cindex{tr}\refcmd{tr}. ตัว\wbr{}อย่าง\wbr{}การ\wbr{}ใช้\wbr{}งาน\wbr{}จริง\wbr{}เช่น\wbr{}การ\wbr{}แปลง\wbr{}อักขระ\wbr{}ขึ้น\wbr{}บรรทัด\wbr{}ใหม่\wbr{}ของ\wbr{}ไฟล์\wbr{}ที่\wbr{}ใช้\wbr{}ใน\wbr{}ระบบ\wbr{}ปฏิบัติ\wbr{}กา\wbr{}รวิน\wbr{}โดวส์\wbr{}ให้\wbr{}เป็น\wbr{}อักขระ\wbr{}ขึ้น\wbr{}บรรทัด\wbr{}ใหม่\wbr{}ที่\wbr{}ใช้\wbr{}ใน\wbr{}ระบบ\wbr{}ปฏิบัติ\wbr{}การ\wbr{}ยู\wbr{}นิกซ์\wbr{}หรือ\wbr{}ลิ\wbr{}นุกซ์.
\begin{MyExample}[การ\wbr{}เปลี่ยน\wbr{}อักขระ\wbr{}ขึ้น\wbr{}บรรทัด\wbr{}ใหม่\wbr{}จาก DOS ให้\wbr{}เป็น UNIX.]
\begin{MyEx}
$ \cin{cat dosfile.txt}
line1
line2
$ \cin{od -c dosfile.txt} \mycomment{ดู\wbr{}ไฟล์\wbr{}โดย\wbr{}ใช้ \cmd{od}}
0000000   l   i   n   e   1  \bs{}r  \bs{}n   l   i   n   e   2  \bs{}r  \bs{}n
0000016
$ \cin{tr -d '\bs{}r' < dosfile.txt > unixfile.txt}
$ \cin{od -c unixfile.txt}
0000000   l   i   n   e   1  \bs{}n   l   i   n   e   2  \bs{}n
0000014
\end{MyEx}
\end{MyExample}
จาก\wbr{}ตัว\wbr{}อย่าง\wbr{}เป็น\wbr{}การ\wbr{}ลบ\wbr{}อักขระ \cmd{'\bs{}r'}\mymemo{\cmd{\bs{}r} คือ\wbr{}อักขระ carriage return.} อักษร\wbr{}ที่\wbr{}สามารถ\wbr{}ระบุ\wbr{}ให้\wbr{}คำ\wbr{}สั่ง \cmd{tr} เป็น\wbr{}อักษร\wbr{}ที่\wbr{}พิมพ์\wbr{}ได้\wbr{}ด้วย\wbr{}แป้น\wbr{}พิมพ์\wbr{}ทั่ว\wbr{}ไป\wbr{}และ\wbr{}อักษร\wbr{}ที่\wbr{}ขึ้น\wbr{}ต้น\wbr{}ด้วย backslash (\cmd{\bs}) ที่\wbr{}แสดง\wbr{}ใน\wbr{}ตา\wbr{}ราง\wbr{}ที่ \ref{tab:escapechar}.

\begin{table}[!htb]
\center
\caption{อักษร\wbr{}ที่\wbr{}แสดง\wbr{}ด้วย\wbr{}เครื่อง\wbr{}หมาย backslash (\bs{}).}\label{tab:escapechar}
\medskip
\begin{tabular}{lp{.7\textwidth}}
\toprule
\multicolumn{1}{c}{สัญลักษณ์} & \multicolumn{1}{c}{ความ\wbr{}หมาย}\\
\midrule
\cmd{\bs{}\textit{NNN}} & อักขระ\wbr{}ที่\wbr{}เขียน\wbr{}ด้วย\wbr{}เลข\wbr{}ฐาน\wbr{}แปด.\\
\cmd{\bs\bs} & เครื่อง\wbr{}หมาย backslash (\cmd{\bs}).\\
\cmd{\bs{}a} & audible BEL. เสียง\wbr{}กระดิ่ง (beep).\\
\cmd{\bs{}b} & backspace.\\
\cmd{\bs{}f} & form feed.\\
\cmd{\bs{}n} & new line.\\
\cmd{\bs{}r} & carriage return.\\
\cmd{\bs{}t} & แคร่ (tab).\\
\cmd{\bs{}v} & vertical tab (ปัจจุบัน\wbr{}ไม่\wbr{}ค่อย\wbr{}มี\wbr{}ความ\wbr{}หมาย\wbr{}เพราะ\wbr{}ใช้\wbr{}น้อย\wbr{}มาก).\\
\bottomrule
\end{tabular}
\end{table}

นอก\wbr{}จาก\wbr{}กา\wbr{}ระบุ\wbr{}ตัว\wbr{}อักขระ\wbr{}ที่\wbr{}ต้องการเป\wbr{}ลี่ย\wbr{}หรือ\wbr{}ลบ\wbr{}แล้ว\wbr{}ยัง\wbr{}สามารถ\wbr{}ระบุ\wbr{}ประเภท\wbr{}ของ\wbr{}อักขระ\wbr{}ด้วย\wbr{}รูป\wbr{}แบบ \cmd{[:\textit{class}:]}. \cmdit{class} คือ\wbr{}ชื่อ\wbr{}ที่\wbr{}กำหนด\wbr{}ไว้\wbr{}แล้ว\wbr{}แทน\wbr{}ประเภท\wbr{}ของ\wbr{}อักษร\wbr{}ที่\wbr{}แสดง\wbr{}ใน\wbr{}ตา\wbr{}ราง\wbr{}ที่ \ref{tab:charclass}.

\begin{table}[!htb]
\center
\caption{ชื่อ\wbr{}ประเภท\wbr{}ของ\wbr{}อักขระ.}\label{tab:charclass}
\medskip
\begin{tabular}{lp{.7\textwidth}}
\toprule
\multicolumn{1}{c}{ชื่อ\wbr{}ประเภท\wbr{}อักขระ} & \multicolumn{1}{c}{คำ\wbr{}อธิบาย}\\
\midrule
\cmd{[:alnum:]} & ตัว\wbr{}อักษร (ภาษาอั\wbr{}กกฤษ) และ\wbr{}ตัว\wbr{}เลข.\\
\cmd{[:alpha:]} & ตัว\wbr{}อักษร.\\
\cmd{[:blank:]} & ช่อง\wbr{}ว่าง\wbr{}เช่น\wbr{}ช่อง\wbr{}ไฟ\wbr{}หรือ\wbr{}แคร่.\\
\cmd{[:cntrl:]} & อักขระ\wbr{}ควบ\wbr{}คุม.\\
\cmd{[:digit:]} & ตัว\wbr{}เลข.\\
\cmd{[:graph:]} & อักขระ\wbr{}ที่\wbr{}แสดง\wbr{}ผล\wbr{}ทาง\wbr{}หน้า\wbr{}จอ\wbr{}ได้, ไม่\wbr{}รวม\wbr{}ช่อง\wbr{}ว่าง.\\
\cmd{[:lower:]} & ตัว\wbr{}อักษร\wbr{}ตัว\wbr{}เล็ก (ภาษา\wbr{}อังกฤษ).\\
\cmd{[:print:]} & ตัว\wbr{}อักษร\wbr{}ที่\wbr{}แสดง\wbr{}ผล\wbr{}ทาง\wbr{}หน้า\wbr{}จอ\wbr{}ได้, รวม\wbr{}ช่อง\wbr{}ว่า\wbr{}ด้วย.\\
\cmd{[:punct:]} & เครื่อง\wbr{}หมาย\wbr{}วรรค\wbr{}ตอน.\\
\cmd{[:space:]} & ช่อง\wbr{}ว่าง\wbr{}ทั้ง\wbr{}ทาง\wbr{}แนว\wbr{}นอน\wbr{}และ\wbr{}แนว\wbr{}ตั้ง (บรรทัด\wbr{}ว่าง\wbr{}เปล่า)\\
\cmd{[:upper:]} & ตัว\wbr{}อักษร\wbr{}ตัว\wbr{}ใหญ่ (ภาษา\wbr{}อังกฤษ).\\
\cmd{[:xdigit:]} & เลข\wbr{}ฐาน\wbr{}สิบ\wbr{}หก.\\
\bottomrule
\end{tabular}
\end{table}

การ\wbr{}ใช้\wbr{}ชื่อ\wbr{}ประเภท\wbr{}ของ\wbr{}อักขระ\wbr{}ช่วย\wbr{}ให้\wbr{}ทำ\wbr{}งาน\wbr{}ได้\wbr{}คล่อง\wbr{}ขึ้น\wbr{}เช่น\wbr{}เมื่อ\wbr{}ต้องการ\wbr{}เปลี่ยน\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}ที่\wbr{}เป็น\wbr{}อักษร\wbr{}ตัว\wbr{}ใหญ่\wbr{}ให้\wbr{}เป็น\wbr{}อักษร\wbr{}ตัว\wbr{}เล็ก\wbr{}สามารถ\wbr{}ทำ\wbr{}ได้\wbr{}ตาม\wbr{}ตัว\wbr{}อย่าง\wbr{}ต่อ\wbr{}ไป\wbr{}นี้.
\begin{MyExample}[เปลี่ยน\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}จาก\wbr{}อักษร\wbr{}ตัว\wbr{}ใหญ่\wbr{}ให้\wbr{}เป็น\wbr{}ตัว\wbr{}เล็ก\wbr{}ด้วย\wbr{}คำ\wbr{}สั่ง \cmd{tr}.]
\begin{MyEx}
$ \cin{ls}
P7070001.JPG  P7070002.JPG  P7070004.JPG
$ \cin{for i in *}
> \cin{do}
> \cin{mv -v $i `echo $i | tr '[:upper:]' '[:lower:]'`}
> \cin{done}
`P7070001.JPG' -> `p7070001.jpg'
`P7070002.JPG' -> `p7070002.jpg'
`P7070004.JPG' -> `p7070004.jpg'
\end{MyEx}
\end{MyExample}

\medskip
ใน\wbr{}บาง\wbr{}กรณี\wbr{}ที่\wbr{}เรา\wbr{}ต้องการ\wbr{}เปลี่ยน tab ให้\wbr{}เป็น space สามารถ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง\wbr{}เฉพาะ\wbr{}สำหรับ\wbr{}งาน\wbr{}นี้\wbr{}ได้\wbr{}แก่\wbr{}คำ\wbr{}สั่ง \cmd{expand}\cindex{expand}. ใน\wbr{}ทาง\wbr{}กลับ\wbr{}กัน\wbr{}ถ้า\wbr{}ต้องการ\wbr{}เปลี่ยน space ให้\wbr{}เป็น tab ให้\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{unexpand}\cindex{unexpand}. โดย\wbr{}ปรกติ\wbr{}คำ\wbr{}สั่ง \cmd{expand} จะ\wbr{}เปลี่ยน tab ทุก\wbr{}ตัว\wbr{}ให้\wbr{}เป็น space แปด\wbr{}ตัว. คำ\wbr{}สั่ง \cmd{unexpand} จะ\wbr{}เปลี่ยน space ที่\wbr{}อยู่\wbr{}ต้น\wbr{}บรรทัด\wbr{}ให้\wbr{}เป็น tab และ\wbr{}จะ\wbr{}ถือ\wbr{}ว่า space แปด\wbr{}ตัว\wbr{}คือ tab หนึ่ง\wbr{}ตัว.


\subsection{Regular expression}\label{sec:re}
\emph{Regular expression}\mymemo{บาง\wbr{}ครั้ง\wbr{}เรียก\wbr{}ย่อๆ\wbr{}ว่า regex หรือ RE. ต่อ\wbr{}ไป\wbr{}นี้\wbr{}จะ\wbr{}ใช้ RE แทน\wbr{}คำ\wbr{}ว่า regular expression.}\gindex{regular expression} คือ\wbr{}วิธี\wbr{}การ\wbr{}แสดง\wbr{}คำ, สาย\wbr{}อักขระ (character string) ทั่ว\wbr{}ไป\wbr{}ด้วย\wbr{}แบบ\wbr{}อย่าง (pattern) โดย\wbr{}ใช้\wbr{}อักขระ\wbr{}และ\wbr{}ไวย\wbr{}กรณ์\wbr{}ที่\wbr{}กำหนด\wbr{}ไว้. RE มี\wbr{}บท\wbr{}บาท\wbr{}สำคัญ\wbr{}ใน\wbr{}การ\wbr{}ประมวล\wbr{}ข้อ\wbr{}มูลเท็กซ์. เรา\wbr{}สามารถ\wbr{}ใช้ RE หา\wbr{}คำ\wbr{}หรือ\wbr{}บรรทัด\wbr{}ที่\wbr{}ต้องการ\wbr{}ใน\wbr{}ไฟล์\wbr{}ด้วย\wbr{}คำ\wbr{}สั่ง \cmd{egrep}. ใช้ RE เปลี่ยน\wbr{}คำ\wbr{}ที่\wbr{}ต้องการ\wbr{}เป็น\wbr{}คำ\wbr{}อื่นๆ\wbr{}ด้วย\wbr{}คำ\wbr{}สั่ง \cmd{sed}. ใช้ RE ใน\wbr{}เพจ\wbr{}เจอร์ \cmd{less} หา\wbr{}คำ\wbr{}ที่\wbr{}ต้องการ\wbr{}ได้\wbr{}อย่าง\wbr{}มี\wbr{}ประสิทธิภาพ\wbr{}และ\wbr{}รวด\wbr{}เร็ว. RE มี\wbr{}บท\wbr{}บาท\wbr{}มาก\wbr{}ใน\wbr{}ลิ\wbr{}นุกซ์\wbr{}เพราะ\wbr{}คำ\wbr{}สั่ง\wbr{}หลาย\wbr{}คำ\wbr{}สั่ง\wbr{}สามารถ\wbr{}ใช้ RE, และ\wbr{}เป็น\wbr{}เรื่อง\wbr{}ที่\wbr{}ต้อง\wbr{}รู้\wbr{}สำหรับ\wbr{}ผู้\wbr{}ที่\wbr{}ต้องการ\wbr{}ใช้\wbr{}ลิ\wbr{}นุกซ์\wbr{}อย่าง\wbr{}จริง\wbr{}จัง\wbr{}ไม่\wbr{}ว่า\wbr{}จะ\wbr{}เป็น\wbr{}ผู้\wbr{}ดู\wbr{}แล\wbr{}ระบบ\wbr{}หรือ\wbr{}นัก\wbr{}พัฒนา\wbr{}ซอฟต์แวร์.

เดิม\wbr{}ที RE เริ่ม\wbr{}ใช้\wbr{}กัน\wbr{}ใน\wbr{}ระบบ\wbr{}ปฏิบัติ\wbr{}การ\wbr{}ยู\wbr{}นิกซ์\wbr{}ใน\wbr{}โปรแกรม\wbr{}บรรณาธิ\wbr{}กรณ์ \cmd{ed}\cindex{ed}. เนื่อง\wbr{}จาก\wbr{}สมรรถ\wbr{}ภาพ\wbr{}สูง\wbr{}ของ RE ที่\wbr{}สามารถ\wbr{}แทน\wbr{}คำ\wbr{}ต่างๆ\wbr{}ได้\wbr{}ตาม\wbr{}ที่\wbr{}ต้องการ\wbr{}จึง\wbr{}มี\wbr{}การ\wbr{}นำ\wbr{}ไป\wbr{}ใช้\wbr{}ใน\wbr{}โปรแกรม\wbr{}คำ\wbr{}สั่ง\wbr{}อื่นๆ\wbr{}อย่าง\wbr{}แพร่\wbr{}หลาย\wbr{}ใน\wbr{}เวลา\wbr{}ต่อ\wbr{}มา. ใน\wbr{}ปัจจุบัน RE ยัง\wbr{}นิยม\wbr{}ใช้\wbr{}ใน\wbr{}ภาษา\wbr{}คอมพิวเตอร์\wbr{}ทั้ง\wbr{}แบบ\wbr{}อินเ\wbr{}ทอร์เ\wbr{}พร\wbr{}เตอร์\wbr{}เช่น \cmd{perl}, \cmd{python}, \cmd{ruby} และ\wbr{}ใช้\wbr{}ใน\wbr{}ภาษา\wbr{}คอมพิวเตอร์\wbr{}แบบ\wbr{}คอม\wbr{}ไพ\wbr{}เลอร์\wbr{}เช่น \cmd{c++} ด้วย. อักขระ\wbr{}ที่\wbr{}ใช้\wbr{}ใน RE เปลี่ยน\wbr{}ไป\wbr{}จาก\wbr{}เดิม\wbr{}แตก\wbr{}ต่าง\wbr{}จาก\wbr{}ที่\wbr{}ใช้\wbr{}ใน\wbr{}บรรณาธิ\wbr{}กรณ์ \cmd{ed}. เรา\wbr{}จะ\wbr{}เรียก RE ที่\wbr{}ใช้\wbr{}ใน\wbr{}บรรณาธิ\wbr{}กรณ์ \cmd{ed} ว่า\wbr{}เป็น RE แบบ\wbr{}พื้น\wbr{}ฐาน (basic regular expression) และ\wbr{}เรียก RE ที่\wbr{}นิยาม\wbr{}โดย\wbr{}มาตร\wbr{}ฐาน POSIX 1003.2 ว่า RE แบบ\wbr{}เสริม (extended regular expression).


มาตร\wbr{}ฐาน POSIX 1003.2 ได้\wbr{}กำหนด\wbr{}อักขระ\wbr{}ที่\wbr{}ใช้\wbr{}ใน re ดัง\wbr{}นี้.
\begin{longtable}{lp{.8\textwidth}}
\cmd{.} & แทน\wbr{}อักขระ\wbr{}ใดๆ\wbr{}ก็\wbr{}ได้\wbr{}หนึ่ง\wbr{}ตัว.\\
& ตัว\wbr{}อย่าง\wbr{}เช่น \cmd{a.c} แทน aab, abc, acc, a c, a.c, apc ฯลฯ.\\
\cmd{\^} & แสดง\wbr{}ตำแหน่ง\wbr{}ต้น\wbr{}บรรทัด. ถ้า\wbr{}ตัว\wbr{}อักษร\wbr{}นี้\wbr{}อยู่\wbr{}ใน\wbr{}วง\wbr{}เล็บ \cmd{[]} จะ\wbr{}มี\wbr{}ความ\wbr{}หมาย\wbr{}ตรรกะ\wbr{}ปฏิเสธ (not).\\
& ตัว\wbr{}อย่าง\wbr{}เช่น \cmd{\^{ }abc} หมาย\wbr{}ถึง\wbr{}บรรทัด\wbr{}ที่\wbr{}ขึ้น\wbr{}ต้น\wbr{}ด้วย abc. \cmd{a[\^{ }b]c} หมาย\wbr{}ถึง aac, acc, a c, alc ฯลฯ.\\
\cmd{\$} & แสดง\wbr{}ตำแหน่ง\wbr{}ท้าย\wbr{}บรรทัด.\\
& ตัว\wbr{}อย่าง\wbr{}เช่น \cmd{abc\$} หมาย\wbr{}ถึง\wbr{}บรรทัด\wbr{}ที่\wbr{}ลง\wbr{}ท้าย\wbr{}ด้วย abc.\\
\cmd{?} & บอก\wbr{}จำนวน\wbr{}ของ\wbr{}อักขระ\wbr{}ที่\wbr{}อยู่\wbr{}หน้า\wbr{}เครื่อง\wbr{}หมาย\wbr{}นี้\wbr{}ว่า\wbr{}เป็น 0 (ไม่\wbr{}มี) หรือ 1 (มี), คือ\underline{มี\wbr{}หรือ\wbr{}ไม่\wbr{}มี\wbr{}ก็\wbr{}ได้}.\\
& ตัว\wbr{}อย่าง\wbr{}เช่น \cmd{ab?c} หมาย\wbr{}ความ\wbr{}ว่า\wbr{}จะ\wbr{}มี\wbr{}ตัว\wbr{}อักษร b อยู่\wbr{}ระหว่าง\wbr{}ตัว\wbr{}อักษร a และ c หรือ\wbr{}ไม่\wbr{}ก็\wbr{}ได้. ถ้า\wbr{}มี\wbr{}ตัว\wbr{}อักษร b, สามารถ\wbr{}มี\wbr{}ได้\wbr{}ตัว\wbr{}เดียว\wbr{}เท่า\wbr{}นั้น. กล่าว\wbr{}คือ \cmd{ab?c} ใช้\wbr{}แทน ac, abc แต่\wbr{}ไม่\wbr{}ใช่ abbc.\\
\cmd{*} & บอก\wbr{}จำนวน\wbr{}อักขระ\wbr{}ที่\wbr{}อยู่\wbr{}หน้า\wbr{}เครื่อง\wbr{}หมาย\wbr{}นี้\wbr{}ว่า\underline{มาก\wbr{}กว่า\wbr{}หรือ\wbr{}เท่า\wbr{}กับ 0}.\\
& ตัว\wbr{}อย่าง\wbr{}เช่น \cmd{ab*c} หมาย\wbr{}ความ\wbr{}ว่า\wbr{}จะ\wbr{}มี\wbr{}ตัว\wbr{}อักษร b อยู่\wbr{}ระหว่าง\wbr{}ตัว\wbr{}อักษร a และ c หรือ\wbr{}ไม่\wbr{}ก็\wbr{}ได้. ถ้า\wbr{}มี\wbr{}ตัว\wbr{}อักษร b, จะ\wbr{}มี\wbr{}กี่\wbr{}ตัว\wbr{}ก็\wbr{}ได้. กล่าว\wbr{}คือ \cmd{ab*c} ใช้\wbr{}แทน ac, abc, abbc, abbbc ฯลฯ.\\
\cmd{+} & บอก\wbr{}จำนวน\wbr{}อักขระ\wbr{}ที่\wbr{}อยู่\wbr{}หน้า\wbr{}เครื่อง\wbr{}หมาย\wbr{}นี้\wbr{}ว่า\wbr{}มี\wbr{}จำนวน\underline{อย่าง\wbr{}น้อย 1 ตัว}.\\
& ตัว\wbr{}อย่าง \cmd{ab+c} หมาย\wbr{}ความ\wbr{}ว่า\wbr{}ต้อง\wbr{}มี\wbr{}อักษร b อยู่\wbr{}ระหว่าง\wbr{}ตัว\wbr{}อักษร a และ b อย่าง\wbr{}น้อย\wbr{}หนึ่ง\wbr{}ตัว\wbr{}เช่น abc, abbc, abbbc ฯลฯ.\\
\cmd{\bs{}} & ใช้\wbr{}เป็น escape character.\\
& ตัว\wbr{}อย่าง\wbr{}เช่น \cmd{a\bs{}.c} คือ ``a.c''. \cmd{a\bs{}?c} คือ ``a?c''.\\
\cmd{|} & สัญลักษณ์\underline{หรือ}.\\
& ตัว\wbr{}อย่าง\wbr{}เช่น \cmd{ab|bc} แทน\wbr{}คำ\wbr{}ที่\wbr{}มี ab หรือ bc อยู่\wbr{}ใน\wbr{}นั้น\wbr{}เช่น ab, bc, abc, abs, abbb ฯลฯ.\\
\cmd{[]} & ใช้\underline{แสดง\wbr{}กลุ่ม\wbr{}หรือ\wbr{}ประเภท\wbr{}ของ\wbr{}อักขระ}. ตา\wbr{}ราง\wbr{}ที่ \ref{tab:charclass} แสดง\wbr{}ประเภท\wbr{}ของ\wbr{}อักขระ (character class) ที่\wbr{}มาตร POSIX 1003.2 กำหนด\wbr{}ไว้.\\
& ตัว\wbr{}อย่าง\wbr{}เช่น \cmd{[abc]} หมาย\wbr{}ถึง\wbr{}อักขระ\wbr{}ตัว\wbr{}เดียว\wbr{}ที่\wbr{}เป็น a หรือ b หรือ c. ถ้า\wbr{}เป็น\wbr{}อักขระ\wbr{}ที่\wbr{}ระบุ\wbr{}ใน\wbr{}เครื่อง\wbr{}หมาย \cmd{[]} เป็น\wbr{}อักขระ\wbr{}ที่\wbr{}เรียง\wbr{}ติด\wbr{}กัน, สามารถ\wbr{}เขียน\wbr{}ย่อ\wbr{}ได้\wbr{}โดย\wbr{}ใช้\wbr{}เครื่อง\wbr{}หมาย \cmd{-} เช่น \cmd{[abc]} มี\wbr{}ความ\wbr{}หมาย\wbr{}เหมือน\wbr{}กับ \cmd{[a-c]}. \cmd{[[:digit:]]} หมาย\wbr{}ถึง\wbr{}อักขระ\wbr{}ที่\wbr{}เป็น\wbr{}ตัว\wbr{}เลข\wbr{}ได้\wbr{}แก่ 0 ถึง 9.\\
\cmd{()} & ใช้\underline{จับ\wbr{}กลุ่ม\wbr{}ของ\wbr{}อักขระ}.\\
& ตัว\wbr{}อย่าง\wbr{}เช่น \cmd{(a|b)c} จะ\wbr{}หมาย\wbr{}ถึง a หรือ b แล้ว\wbr{}ตาม\wbr{}ด้วย c เช่น ab, cb แต่ \cmd{a|bc} จะ\wbr{}หมาย\wbr{}ถึง a หรือ bc.\\
\end{longtable}

นอก\wbr{}จาก\wbr{}การ\wbr{}บอก\wbr{}จำนวน\wbr{}อักขระ\wbr{}ด้วย \cmd{?}, \cmd{*} และ \cmd{+} แล้ว\wbr{}เรา\wbr{}ยัง\wbr{}สามารถ\wbr{}กำหนด\wbr{}จำนวน\wbr{}การ\wbr{}ซ้ำ\wbr{}ของ\wbr{}อักขระ\wbr{}ได้\wbr{}ละเอียด\wbr{}ยิ่ง\wbr{}ขึ้น\wbr{}ได้\wbr{}แก่

\begin{longtable}{lp{.8\textwidth}}
\cmd{\{\textit{n}\}} & บอก\wbr{}จำนวน\wbr{}ตัว\wbr{}อักขระ\wbr{}ที่\wbr{}อยู่\wbr{}หน้า \cmd{\{\textit{n}\}} ว่า\wbr{}มี\wbr{}จำนวน \cmdit{n} ตัว\wbr{}พอ\wbr{}ดี.\\
& ตัว\wbr{}อย่าง\wbr{}เช่น \cmd{ab\{3\}c} ใช้\wbr{}แทน abbbc.\\
\cmd{\{\textit{n},\}} & บอก\wbr{}จำนวน\wbr{}ตัว\wbr{}อักขระ\wbr{}ที่\wbr{}อยู่\wbr{}หน้า \cmd{\{\textit{n}\}} ว่า\wbr{}มี\wbr{}จำนวน \cmdit{n} ตัว\wbr{}ขึ้น\wbr{}ไป.\\
& ตัว\wbr{}อย่าง\wbr{}เช่น \cmd{ab\{3,\}c} ใช้\wbr{}แทน abbbc, abbbbc, abbbbbc ฯลฯ.\\
\cmd{\{\textit{n},\textit{m}\}} & บอก\wbr{}จำนวน\wbr{}ตัว\wbr{}อักขระ\wbr{}ที่\wbr{}อยู่\wbr{}หน้า \cmd{\{\textit{n},\textit{m}\}} ว่า\wbr{}มี\wbr{}จำนวน\wbr{}อย่าง\wbr{}น้อย \cmdit{n} แต่\wbr{}ไม่\wbr{}เกิน \cmdit{m} ตัว.\\
& ตัว\wbr{}อย่าง\wbr{}เช่น \cmd{ab\{3,4\}c} ใช้\wbr{}แทน abbbc และ abbbbc.\\
\end{longtable}

re แบบ\wbr{}พื้น\wbr{}ฐาน\wbr{}ต่าง\wbr{}จาก re แบบ\wbr{}เสริม\wbr{}ที่\wbr{}ไม่\wbr{}สามารถ\wbr{}ใช้\wbr{}อักขระ\wbr{}บาง\wbr{}ตัว\wbr{}ที่ re แบบ\wbr{}เสริม\wbr{}ใช้\wbr{}ได้\wbr{}เช่น \cmd{|}, \cmd{+}, \cmd{\{\}} เป็นต้น.\mymemo{อ่าน\wbr{}รา\wbr{}ยอะ\wbr{}เอียด\wbr{}เพิ่ม\wbr{}เติม\wbr{}ได้\wbr{}จาก \cmd{regexp(7)}}

%\subsubsection{โลภ\wbr{}มาก}
%การ\wbr{}ใช้ regular expression แสดง\wbr{}คำ\wbr{}ที่\wbr{}ต้องการ\wbr{}จะ\wbr{}เป็น\wbr{}การ\wbr{}จับ\wbr{}คู่\wbr{}ที่\wbr{}เรีย\wbr{}กว่า greedy match กล่าว\wbr{}คือ\wbr{}ถ้า\wbr{}มี\wbr{}คำ ``http://www.org.org''

\subsection{หา\wbr{}คำ, บรรทัด\wbr{}ที่\wbr{}ต้องการ\wbr{}ใน\wbr{}ไฟล์}
%การ\wbr{}แสดง\wbr{}ข้อ\wbr{}มูล\wbr{}ที่\wbr{}ต้องการ\wbr{}ใน\wbr{}ไฟล์\wbr{}ใน\wbr{}ที่\wbr{}นี้\wbr{}หมาย\wbr{}ถึง\wbr{}การ\wbr{}ใช้\wbr{}คำ\wbr{}หรือ pattern หา\wbr{}บรรทัด\wbr{}ที่\wbr{}อยู่\wbr{}ใน\wbr{}ไฟล์\wbr{}ออก\wbr{}มา\wbr{}แสดง\wbr{}ทาง\wbr{}หน้า\wbr{}จอ, หรือ\wbr{}ตรวจ\wbr{}สอบ\wbr{}ว่า\wbr{}ใน\wbr{}ไฟล์\wbr{}ไหน\wbr{}บ้าง\wbr{}ที่\wbr{}มี\wbr{}คำ\wbr{}ที่\wbr{}ต้องการ\wbr{}หา.
การ\wbr{}หา\wbr{}คำ\wbr{}หรือ\wbr{}บรรทัด\wbr{}ที่\wbr{}ต้องการ\wbr{}ใน\wbr{}ไฟล์\wbr{}เกิด\wbr{}บ่อย\wbr{}ครั้ง\wbr{}เมื่อ\wbr{}ผู้\wbr{}ใช้\wbr{}ต้องการ\wbr{}หา\wbr{}ข้อ\wbr{}มูล\wbr{}ใน\wbr{}ไฟล์\wbr{}แต่\wbr{}ไม่\wbr{}รู้\wbr{}ว่า\wbr{}อยู่\wbr{}ส่วน\wbr{}ไหน, หรือ\wbr{}มี\wbr{}ไฟล์\wbr{}หลาย\wbr{}ไฟล์\wbr{}ไม่\wbr{}รู้\wbr{}ว่า\wbr{}คำ\wbr{}ที่\wbr{}ต้องการ\wbr{}หา\wbr{}อยู่\wbr{}ใน\wbr{}ไฟล์\wbr{}ไหน.

คำ\wbr{}สั่ง \cmd{grep}\cindex{grep}\refcmd{grep} เป็น\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}จะ\wbr{}แสดง\wbr{}บรรทัด\wbr{}ที่\wbr{}มี\wbr{}คำ\wbr{}หรือ\wbr{}แบบ\wbr{}อย่าง (pattern) ที่\wbr{}ต้อง\wbr{}มา\wbr{}แสดง\wbr{}ทาง\wbr{}หน้า\wbr{}จอ. คำ\wbr{}สั่ง \cmd{grep} ที่\wbr{}ใช้\wbr{}ใน\wbr{}ลิ\wbr{}นุกซ์\wbr{}เป็น\wbr{}โปรแกรม\wbr{}จาก\wbr{}โครง\wbr{}การ GNU และ\wbr{}มี 3 แบบ\wbr{}ได้\wbr{}แก่
\begin{itemize}
\item \cmd{grep} ใช้\wbr{}หา\wbr{}คำ\wbr{}หรือ\wbr{}แบบ\wbr{}อย่าง\wbr{}ที่\wbr{}อยู่\wbr{}ใน\wbr{}ไฟล์. แบบ\wbr{}อย่าง\wbr{}ที่\wbr{}สามารถ\wbr{}ใช้\wbr{}ได้\wbr{}คือ re แบบ\wbr{}พื้น\wbr{}ฐาน.
\item \cmd{egrep}\cindex{egrep} ใช้\wbr{}หา\wbr{}คำ\wbr{}หรือ\wbr{}แบบ\wbr{}อย่าง\wbr{}ที่\wbr{}อยู่\wbr{}ใน\wbr{}ไฟล์, และ\wbr{}สามารถ\wbr{}ใช้ re แบบ\wbr{}เสริม\wbr{}ได้. อักษร ``e'' ที่\wbr{}อยู่\wbr{}หน้า\wbr{}ชื่อ\wbr{}คำ\wbr{}สั่ง ``grep'' หมาย\wbr{}ถึง extended regular expression. \cmd{egrep} เป็น\wbr{}เพียง\wbr{}แค่\wbr{}ซอฟต์\wbr{}ลิงค์\wbr{}ไป\wbr{}หา\wbr{}คำ\wbr{}สั่ง \cmd{grep} เท่า\wbr{}นั้น. ใน\wbr{}ความ\wbr{}เป็น\wbr{}จริง\wbr{}แล้ว\wbr{}คือ\wbr{}การ\wbr{}ใช้ \cmd{grep} กับ\wbr{}ตัว\wbr{}เลือก \cmd{-E} ซึ่ง\wbr{}เป็น\wbr{}การ\wbr{}ระบุ\wbr{}ให้\wbr{}ใช้ re แบบ\wbr{}เสริม\wbr{}ได้.
\item \cmd{fgrep}\cindex{fgrep} ใช้\wbr{}หา\wbr{}คำ\wbr{}ที่\wbr{}อยู่\wbr{}ใน\wbr{}ไฟล์. ถ้า\wbr{}ใน\wbr{}คำ\wbr{}ที่\wbr{}ต้องการ\wbr{}หา\wbr{}มี\wbr{}อักขระ\wbr{}ที่\wbr{}ใช้ re, \cmd{fgrep} จะ\wbr{}ถือ\wbr{}ว่า\wbr{}อักขระ\wbr{}นั้น\wbr{}มี\wbr{}ความ\wbr{}หมาย\wbr{}ตาม\wbr{}ที่\wbr{}เห็น, คือ\wbr{}ไม่\wbr{}ใช่ re. คำ\wbr{}สั่ง \cmd{grep} และ\wbr{}ตัว\wbr{}เลือก \cmd{-F} จะ\wbr{}ให้\wbr{}ผล\wbr{}เหมือน\wbr{}กับ\wbr{}คำ\wbr{}สั่ง \cmd{fgrep}.
\end{itemize}

การ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง\wbr{}นี้\wbr{}แบบ\wbr{}ง่าย\wbr{}ที่\wbr{}สุด\wbr{}คือ\wbr{}กำหนด\wbr{}คำ\wbr{}ที่\wbr{}ต้องการ\wbr{}หา\wbr{}เป็น\wbr{}อาร์กิวเ\wbr{}มนต์, และ\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}เป็น\wbr{}อาร์กิวเ\wbr{}มนต์\wbr{}ตัว\wbr{}ถัด\wbr{}ไป. ใน\wbr{}ตัว\wbr{}อย่าง\wbr{}เป็น\wbr{}การ\wbr{}ใช้ \cmd{grep} เพื่อ\wbr{}หา\wbr{}คำ\wbr{}ว่า \cmd{fail} ที่\wbr{}อยู่\wbr{}ใน\wbr{}ไฟล์ \cmd{/var/log/messages}\gindex{/var/log/message}\mymemo{ไฟล์ \cmd{/var/log/messages} เป็น\wbr{}ไฟล์\wbr{}ที่\wbr{}เก็บ log ของ\wbr{}ระบบ. หาก\wbr{}มี\wbr{}ข้อ\wbr{}ผิด\wbr{}พลาด\wbr{}ที่\wbr{}เกิด\wbr{}ขึ้น\wbr{}กับ\wbr{}ระบบ\wbr{}ปฏิบัติ\wbr{}การ\wbr{}หรือ\wbr{}โปรแกรม\wbr{}สำคัญ\wbr{}ต่างๆ\wbr{}ก็\wbr{}จะ\wbr{}ถูก\wbr{}บันทึก\wbr{}ไว้\wbr{}ใน\wbr{}ไฟล์\wbr{}นี้. ใน\wbr{}ตัว\wbr{}อย่าง\wbr{}จะ\wbr{}อ่าน\wbr{}ไฟล์\wbr{}นี้\wbr{}ด้วย root.}.
\begin{MyExample}[การ\wbr{}ใช้ \cmd{grep} เบื้อง\wbr{}ต้น.]
\begin{MyEx}
# \cin{grep fail /var/log/messages}
...
Jun  6 19:18:39 toybox FAT: Directory bread(block 274) failed
Jun  6 19:18:39 toybox FAT: Directory bread(block 275) failed
Jun  6 19:18:39 toybox FAT: Directory bread(block 276) failed
Jun  6 19:18:39 toybox FAT: Directory bread(block 277) failed
Jun  6 19:18:39 toybox FAT: Directory bread(block 278) failed
Jun 13 17:00:28 toybox hub 1-0:1.0: connect-debounce failed, port 2 disabled
Jun 15 23:44:00 toybox dictd[11844]: :D: foldoc "failure-directed testing" 1
Jun 26 00:53:39 toybox su(pam_unix)[27228]: authentication failure; \wrap
logname=poonlap uid=1000 euid=0 tty=pts/0 ruser=poonlap rhost=  user=root
Jun 26 00:53:41 toybox su[27228]: pam_authenticate: Authentication failure
Jul 11 12:36:08 toybox gdm(pam_unix)[7437]: authentication failure; \wrap
logname= uid=0 euid=0 tty=:0 ruser= rhost=
Jul 18 19:00:01 toybox su(pam_unix)[3314]: authentication failure; \wrap
logname=poonlap uid=1000 euid=0 tty=pts/2 ruser=poonlap rhost=  user=root
Jul 18 19:00:03 toybox su[3314]: pam_authenticate: Authentication failure
\end{MyEx}
\end{MyExample}
ใน\wbr{}กรณี\wbr{}ที่\wbr{}ไม่\wbr{}แน่\wbr{}ใจ\wbr{}ว่า\wbr{}คำ\wbr{}ที่\wbr{}ต้องการ\wbr{}หา\wbr{}เขียน\wbr{}ด้วย\wbr{}ตัว\wbr{}ใหญ่\wbr{}หรือ\wbr{}ตัว\wbr{}เล็ก, ให้\wbr{}ใช้\wbr{}ตัว\wbr{}เลือก \cmd{-i} \mymemo{\cmd{-i} เป็น\wbr{}ตัว\wbr{}เลือก\wbr{}แบบ\wbr{}สั้น\wbr{}ของ \cmd{--ignore-case}} เพื่อ\wbr{}ให้\wbr{}คำ\wbr{}สั่ง\wbr{}ไม่\wbr{}แยก\wbr{}แยะ\wbr{}ความ\wbr{}แตก\wbr{}ต่าง\wbr{}ระหว่าง\wbr{}อักษร\wbr{}ตัว\wbr{}ใหญ่\wbr{}กับ\wbr{}ตัว\wbr{}เล็ก. ถ้า\wbr{}หา\wbr{}คำ\wbr{}ว่า ``fail'' ก็\wbr{}จะ\wbr{}ได้ ``Fail'', ``FAIL'' ฯลฯ ด้วย.

ใน\wbr{}ทาง\wbr{}กลับ\wbr{}กัน, ถ้า\wbr{}ไม่\wbr{}ต้องการ\wbr{}บรรทัด\wbr{}ที่\wbr{}มี\wbr{}คำ\wbr{}ที่\wbr{}ระบุ\wbr{}ให้\wbr{}ใช้\wbr{}ตัว\wbr{}เลือก \cmd{-v}\mymemo{\cmd{-v} เป็น\wbr{}ตัว\wbr{}เลือก\wbr{}แบบ\wbr{}สั้น\wbr{}ของ \cmd{--invert-match}} กรอง\wbr{}บรรทัด\wbr{}ที่\wbr{}มี\wbr{}คำ\wbr{}นั้น\wbr{}ออก\wbr{}ไป.
ตัว\wbr{}อย่าง\wbr{}เช่น\wbr{}กรอง\wbr{}ข้อ\wbr{}มูล\wbr{}จาก\wbr{}ผล\wbr{}ลัพธ์\wbr{}ของ\wbr{}ตัว\wbr{}อย่าง\wbr{}ที่\wbr{}แล้ว\wbr{}โดย\wbr{}ไม่\wbr{}เอา\wbr{}บรรทัด\wbr{}ที่\wbr{}มี\wbr{}คำ\wbr{}ว่า ``FAT''.
\begin{MyExample}[ใช้ \cmd{grep} กรอง\wbr{}ข้อ\wbr{}มูล\wbr{}ที่\wbr{}ไม่\wbr{}ต้องการ.]
\begin{MyEx}
# \cin{grep fail /var/log/messages | grep -v FAT}
...
Jun 13 17:00:28 toybox hub 1-0:1.0: connect-debounce failed, port 2 disabled
Jun 15 23:44:00 toybox dictd[11844]: :D: foldoc "failure-directed testing" 1
Jun 26 00:53:39 toybox su(pam_unix)[27228]: authentication failure; \wrap
logname=poonlap uid=1000 euid=0 tty=pts/0 ruser=poonlap rhost=  user=root
Jun 26 00:53:41 toybox su[27228]: pam_authenticate: Authentication failure
Jul 11 12:36:08 toybox gdm(pam_unix)[7437]: authentication failure; \wrap
logname= uid=0 euid=0 tty=:0 ruser= rhost=
Jul 18 19:00:01 toybox su(pam_unix)[3314]: authentication failure; \wrap
logname=poonlap uid=1000 euid=0 tty=pts/2 ruser=poonlap rhost=  user=root
Jul 18 19:00:03 toybox su[3314]: pam_authenticate: Authentication failure
\end{MyEx}
\end{MyExample}

ให้\wbr{}พิจารณา\wbr{}ผล\wbr{}ลัพธ์\wbr{}ของ\wbr{}ตัว\wbr{}อย่าง\wbr{}การ\wbr{}ใช้ \cmd{grep} หา\wbr{}คำ\wbr{}ที่\wbr{}มี\wbr{}เครื่อง\wbr{}หมาย \cmd{-} นำ\wbr{}หน้า\wbr{}ตัว\wbr{}อักษร\wbr{}ต่อ\wbr{}ไป\wbr{}นี้.
\begin{MyExample}[การ\wbr{}ใช้ \cmd{grep} หา\wbr{}คำ\wbr{}ที่\wbr{}มี\wbr{}เครื่อง\wbr{}หมาย \cmd{-} นำ\wbr{}หน้า.]
\begin{MyEx}
$ \cin{ps -ef | grep '-bash'} \mycomment{คำ\wbr{}สั่ง \cmd{grep} ถือ\wbr{}ว่า \cmd{-bash} เป็น\wbr{}ตัว\wbr{}เลือก}
Usage: grep [OPTION]... PATTERN [FILE]...
Try `grep --help' for more information.
$ \cin{ps -ef | grep -e '-bash'} \mycomment{หรือ \cmd{grep -- '-bash'}}
poonlap   7777  7775  0 13:30 pts/0    00:00:00 -bash
poonlap   8087  7775  0 13:47 pts/1    00:00:00 -bash
poonlap   8092  7775  0 13:47 pts/2    00:00:00 -bash
poonlap  12751  8087  0 16:33 pts/1    00:00:00 grep -e '-bash'
\end{MyEx}
\end{MyExample}

การ\wbr{}ใช้ \cmd{grep} หา\wbr{}คำ \cmd{-bash}\mymemo{โปร\wbr{}เซส\wbr{}ที่\wbr{}มี\wbr{}เครื่อง\wbr{}หมาย \cmd{-} นำ\wbr{}หน้า\wbr{}มี\wbr{}ความ\wbr{}หมาย\wbr{}ว่า\wbr{}โป\wbr{}เซส\wbr{}นั้น\wbr{}เป็น\wbr{}เชลล์ล็\wbr{}อก\wbr{}อิน.} ครั้ง\wbr{}แรก\wbr{}จะ\wbr{}ล้ม\wbr{}เหลว\wbr{}และ\wbr{}เกิด error เพราะ\wbr{}จะ\wbr{}ถือ\wbr{}ว่า \cmd{-bash} เป็น\wbr{}ตัว\wbr{}เลือก\wbr{}ถึง\wbr{}แม้\wbr{}ว่า\wbr{}จะ\wbr{}ใช้ quote แล้ว\wbr{}ก็\wbr{}ตาม. ใน\wbr{}กรณี\wbr{}เช่น\wbr{}นี้ \cmd{grep} ให้\wbr{}ใช้\wbr{}ตัว\wbr{}เลือก \cmd{-e}\mymemo{\cmd{-e \textit{pattern}} เป็น\wbr{}ตัว\wbr{}เลือก\wbr{}แบบ\wbr{}สั้น\wbr{}ของ \cmd{--regexp=\textit{pattern}}. อย่าง\wbr{}สับ\wbr{}สน\wbr{}ระหว่าง\wbr{}ตัว\wbr{}เลือก \cmd{-e} กับ\wbr{}ตัว\wbr{}เลือก \cmd{-E} ซึ่ง\wbr{}มี\wbr{}ความ\wbr{}หมาย\wbr{}ต่าง\wbr{}กัน.} เพื่อ\wbr{}ระบุ\wbr{}คำ\wbr{}หรือ\wbr{}แบบ\wbr{}อย่าง\wbr{}ให้\wbr{}ชัดเจน.


ถ้า\wbr{}เรา\wbr{}มี\wbr{}คำ\wbr{}ที่\wbr{}ต้องการ\wbr{}หา\wbr{}มาก\wbr{}กว่า 2 คำ, และ\wbr{}คำ\wbr{}เหล่า\wbr{}นั้น\wbr{}อาจ\wbr{}จะ\wbr{}ไม่\wbr{}อยู่\wbr{}ใน\wbr{}บรรทัด\wbr{}เดียว\wbr{}กัน\wbr{}ให้\wbr{}ใช้\wbr{}ตัว\wbr{}เลือก \cmd{-e} ระบุ\wbr{}คำ\wbr{}หรือ\wbr{}แบบ\wbr{}อย่าง\wbr{}ที่\wbr{}ต้องการ, คำ\wbr{}ต่อ\wbr{}คำ.
\begin{MyExample}[หา\wbr{}คำ\wbr{}ตั้ง\wbr{}แต่\wbr{}สอง\wbr{}คำ\wbr{}ที่\wbr{}อยู่\wbr{}ใน\wbr{}ไฟล์.]
\begin{MyEx}
$ \cin{ps -ef | grep -e tty1 -e pts/2}
root      7531     1  0 13:27 tty1     00:00:00 /sbin/agetty 38400 tty1 linux
poonlap   8092  7775  0 13:47 pts/2    00:00:00 -bash
poonlap   1453  8092  0 14:55 pts/2    00:00:01 /usr/lib/mozilla/mozilla-bin
poonlap   1478  1453  0 14:55 pts/2    00:00:00 /usr/lib/mozilla/mozilla-bin
root      2779  8092  0 15:05 pts/2    00:00:00 su -
root      2782  2779  0 15:05 pts/2    00:00:00 -bash
poonlap   3221  8087  0 15:19 pts/1    00:00:00 grep -e tty1 -e pts/2
\end{MyEx}
\end{MyExample}%$
จาก\wbr{}ตัว\wbr{}อย่าง\wbr{}คือ\wbr{}การ\wbr{}หา\wbr{}บรรทัด\wbr{}ที่\wbr{}มี\wbr{}คำ\wbr{}ว่า tty1 หรือ pts/2. หรือ\wbr{}จะ\wbr{}ใช้ re ใน\wbr{}การ\wbr{}หา\wbr{}ซึ่ง\wbr{}จะ\wbr{}ให้\wbr{}ผล\wbr{}เหมือน\wbr{}กัน.
\begin{MyExample}[การ\wbr{}ใช้ re หา\wbr{}คำ\wbr{}สอง\wbr{}คำ\wbr{}ด้วย\wbr{}ข้อ\wbr{}แม้\wbr{}หรือ (OR).]
\begin{MyEx}
$ \cin{ps -ef | egrep 'tty1|pts/2'} \mycomment{หรือ \cmd{ps -ef | grep -E 'tty1|pts/2'}}
root      7531     1  0 13:27 tty1     00:00:00 /sbin/agetty 38400 tty1 linux
poonlap   8092  7775  0 13:47 pts/2    00:00:00 -bash
poonlap   1453  8092  0 14:55 pts/2    00:00:01 /usr/lib/mozilla/mozilla-bin
poonlap   1478  1453  0 14:55 pts/2    00:00:00 /usr/lib/mozilla/mozilla-bin
root      2779  8092  0 15:05 pts/2    00:00:00 su -
root      2782  2779  0 15:05 pts/2    00:00:00 -bash
poonlap   6622  8087  0 15:34 pts/1    00:00:00 egrep tty1|pts/2
\end{MyEx}
\end{MyExample}%$


\subsubsection{หา\wbr{}คำ\wbr{}ที่\wbr{}ต้องการ\wbr{}ว่า\wbr{}อยู่\wbr{}ใน\wbr{}ไฟล์\wbr{}ไหน}
เรา\wbr{}มา\wbr{}ลอง\wbr{}ดู\wbr{}ตัว\wbr{}อย่าง\wbr{}การ\wbr{}ใช้ \cmd{grep} ช่วย\wbr{}หา\wbr{}คำ\wbr{}ที่\wbr{}มี\wbr{}อยู่\wbr{}ใน\wbr{}ไฟล์\wbr{}โดย\wbr{}ที่\wbr{}เรา\wbr{}ไม่\wbr{}รู้\wbr{}ว่า\wbr{}คำ\wbr{}ที่\wbr{}ต้องการ\wbr{}หา\wbr{}นั้น\wbr{}อยู่\wbr{}ใน\wbr{}ไฟล์\wbr{}ไหน. สมมติ\wbr{}ว่า\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี\wbr{}ที่\wbr{}ทำ\wbr{}งาน\wbr{}อยู่\wbr{}คือ \cmd{/usr/lib/mozilla}. ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี\wbr{}นี้\wbr{}เป็น\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี\wbr{}ที่\wbr{}เก็บ\wbr{}ไฟล์\wbr{}ต่างๆ\wbr{}ที่\wbr{}จำ\wbr{}เป็น\wbr{}สำหรับเบ\wbr{}ราเ\wbr{}ซอร์ Mozilla มี\wbr{}ทั้ง\wbr{}ไฟล์\wbr{}และ\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี\wbr{}ย่อย\wbr{}อยู่\wbr{}มาก\wbr{}มาย\wbr{}ใน\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี\wbr{}นี้. สมมติ\wbr{}ว่า\wbr{}เรา\wbr{}ต้องการ\wbr{}หา\wbr{}ว่า\wbr{}มี\wbr{}ไฟล์\wbr{}ที่\wbr{}อะไร\wbr{}บ้าง\wbr{}ที่\wbr{}เกี่ยว\wbr{}ข้อง\wbr{}กับ\wbr{}ภาษา\wbr{}ไทย, ก็\wbr{}อาจ\wbr{}จะ\wbr{}ใช้\wbr{}แบบ\wbr{}อย่าง\wbr{}ที่\wbr{}ต้องการ\wbr{}หา\wbr{}เป็น\wbr{}คำ\wbr{}ว่า ``thai''.
\begin{MyExample}[หา\wbr{}ไฟล์\wbr{}ที่\wbr{}มี\wbr{}คำ\wbr{}ที่\wbr{}ต้องการ.]
\begin{MyEx}
$ \cin{pwd}
/usr/lib/mozilla
$ \cin{grep -ri thai .} \mycomment{\cmd{.} เป็น\wbr{}การ\wbr{}ระบุ\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี\wbr{}ปัจจุบัน}
Binary file ./chrome/en-US.jar matches \mycomment{บอ\wbr{}กว่า\wbr{}เป็น\wbr{}ไฟล์\wbr{}แบบไบ\wbr{}นารี}
Binary file ./chrome/comm.jar matches
... \thtt{ย่น\wbr{}ย่อ} ...
./res/charsetData.properties:x-thaittf-0.LangGroup              = th
./res/fonts/fontEncoding.properties:# Thai TTFs
./res/fonts/fontEncoding.properties:# code points used : Unicode Thai block + \wrap
about 10 PUA code points in U+F700,
... \thtt{ย่น\wbr{}ย่อ} ...
\end{MyEx}
\end{MyExample}

จาก\wbr{}ตัว\wbr{}อย่าง\wbr{}ข้าง\wbr{}บน, คำ\wbr{}สั่ง \cmd{grep} และ\wbr{}ตัว\wbr{}เลือก \cmd{-r}\mymemo{\cmd{-r} เป็น\wbr{}ตัว\wbr{}เลือก\wbr{}แบบ\wbr{}สั้น\wbr{}ของ \cmd{--recursive}. ตัว\wbr{}เลือก \cmd{-R} มี\wbr{}ความ\wbr{}หมาย\wbr{}เหมือน\wbr{}กัน.} จะ\wbr{}หา\wbr{}คำ\wbr{}ว่า ``thai'' ที่\wbr{}อยู่\wbr{}ใต้\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี\wbr{}ที่\wbr{}ทำ\wbr{}งาน\wbr{}ทั้ง\wbr{}หมด. และ\wbr{}ตัว\wbr{}เลือก \cmd{-i} จะ\wbr{}ไม่\wbr{}แยก\wbr{}แยะ\wbr{}ตัว\wbr{}อักษร\wbr{}ตัว\wbr{}ใหญ่\wbr{}หรือ\wbr{}ตัว\wbr{}เล็ก. เนื่อง\wbr{}จาก\wbr{}เป็น\wbr{}การ\wbr{}ใช้ \cmd{grep} หา\wbr{}คำ\wbr{}ใน\wbr{}ไฟล์\wbr{}หลาย\wbr{}ไฟล์, ผล\wbr{}ลัพธ์\wbr{}ที่\wbr{}ได้\wbr{}จะ\wbr{}แสดง\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}และ\wbr{}นำ\wbr{}หน้า\wbr{}ตาม\wbr{}ด้วย\wbr{}บรรทัด\wbr{}ที่\wbr{}มี\wbr{}คำ\wbr{}ที่\wbr{}ต้องการ\wbr{}หา. ผล\wbr{}ลัพธ์\wbr{}จะ\wbr{}ดู\wbr{}ลำบาก\wbr{}เพราะ\wbr{}มี\wbr{}ข้อ\wbr{}มูล\wbr{}มาก\wbr{}เกิน\wbr{}ไป. ถ้า\wbr{}ต้องการ\wbr{}ดู\wbr{}แค่\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}แต่\wbr{}ไม่\wbr{}ต้องการ\wbr{}ให้\wbr{}แสดง\wbr{}บรรทัด\wbr{}ที่\wbr{}มี\wbr{}คำ\wbr{}นั้น\wbr{}อยู่\wbr{}ให้\wbr{}ใช้\wbr{}ตัว\wbr{}เลือก \cmd{-l}\mymemo{\cmd{-l} เป็น\wbr{}ตัว\wbr{}เลือก\wbr{}ย่อ\wbr{}ของ \cmd{--files-with-matches}.} และ\wbr{}หลัง\wbr{}จาก\wbr{}นั้น\wbr{}ค่อย\wbr{}ดู\wbr{}เนื้อ\wbr{}หา\wbr{}ใน\wbr{}แต่\wbr{}ละ\wbr{}ไฟล์\wbr{}ที\wbr{}หลัง\wbr{}ก็\wbr{}ได้.
\begin{MyExample}[หา\wbr{}ไฟล์\wbr{}ที่\wbr{}มี\wbr{}คำ\wbr{}ที่\wbr{}ต้องการ\wbr{}โดย\wbr{}แสดง\wbr{}แค่\wbr{}ชื่อ\wbr{}ไฟล์.]
\begin{MyEx}
$ \cin{grep -lri thai .}
./chrome/en-US.jar
./chrome/comm.jar
... \thtt{ย่น\wbr{}ย่อ} ...
./res/fonts/fontEncoding.properties
... \thtt{ย่น\wbr{}ย่อ} ...
\end{MyEx}
\end{MyExample}%$

ตัว\wbr{}อย่าง\wbr{}การ\wbr{}หา\wbr{}ไฟล์\wbr{}ที่\wbr{}มี\wbr{}คำ\wbr{}ที่\wbr{}ต้องการ\wbr{}อยู่\wbr{}นี้\wbr{}มี\wbr{}ประโยชน์\wbr{}เช่น\wbr{}เวลา\wbr{}มี\wbr{}รหัส\wbr{}ต้น\wbr{}ฉบับ\wbr{}ของ\wbr{}โปรแกรม\wbr{}และ\wbr{}ต้องการ\wbr{}แก้\wbr{}ไข\wbr{}โปรแกรม\wbr{}นั้น. บาง\wbr{}ครั้ง\wbr{}อาจ\wbr{}จะ\wbr{}เริ่ม\wbr{}ต้น\wbr{}โดย\wbr{}การ\wbr{}หา\wbr{}ชื่อ\wbr{}ฟังก์ชัน, คีย์\wbr{}เวิร์ด\wbr{}ว่า\wbr{}อยู่\wbr{}ใน\wbr{}ไฟล์\wbr{}ไหน. จาก\wbr{}นั้น\wbr{}ค่อย\wbr{}ดู\wbr{}เนื้อ\wbr{}หา\wbr{}เป็น\wbr{}ไฟล์ๆ\wbr{}ไป\wbr{}ว่า\wbr{}ไฟล์\wbr{}ไหน\wbr{}เป็น\wbr{}ไฟล์\wbr{}ที่\wbr{}น่า\wbr{}จะ\wbr{}แก้\wbr{}ไข.



%\subsection{แบ่ง\wbr{}ไฟล์\wbr{}ตาม\wbr{}เงื่อน\wbr{}ไข}
%กลับ\wbr{}ไป\wbr{}ที่\wbr{}เรื่อง\wbr{}การ\wbr{}แบ่ง\wbr{}ไฟล์\wbr{}อีก\wbr{}ครั้ง. คำ\wbr{}สั่ง \cmd{csplit}\cindex{csplit} เป็น\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}ใช้\wbr{}แบ่ง\wbr{}ไฟล์\wbr{}เป็น\wbr{}ไฟล์\wbr{}ย่อยๆ\wbr{}คล้าย\wbr{}กับ\wbr{}คำ\wbr{}สั่ง \cmd{split} แต่\wbr{}คำ\wbr{}สั่ง \cmd{csplit} จะ\wbr{}ใช้\wbr{}กับ\wbr{}ไฟล์เท็กซ์\wbr{}และ\wbr{}สามารถ\wbr{}ระบุ\wbr{}เงื่อน\wbr{}ไข\wbr{}ตาม\wbr{}เนื้อ\wbr{}หา\wbr{}ใน\wbr{}ไฟล์\wbr{}เพื่อ\wbr{}แบ่ง\wbr{}เป็น\wbr{}ไฟล์\wbr{}ย่อยๆ\wbr{}ได้.









\section{\cmd{sed} และ \cmd{awk}}
ใน\wbr{}หน้า\wbr{}ที่ \pageref{sec:tr} ได้\wbr{}แน่\wbr{}นำ\wbr{}การ\wbr{}แก้\wbr{}ไข\wbr{}ไฟล์\wbr{}แบบ\wbr{}ง่ายๆ\wbr{}ด้วย\wbr{}คำ\wbr{}สั่ง \cmd{tr} ไป\wbr{}แล้ว. การ\wbr{}แก้\wbr{}ไข\wbr{}ไฟล์เท็กซ์\wbr{}โดย\wbr{}การ\wbr{}ใช้\wbr{}บรรทัด\wbr{}คำ\wbr{}สั่ง\wbr{}แบบ\wbr{}นี้\wbr{}มี\wbr{}ข้อ\wbr{}ดี\wbr{}ที่\wbr{}รวด\wbr{}เร็ว\wbr{}และ\wbr{}สามารถ\wbr{}เขียน\wbr{}เป็นสค\wbr{}ริปต์\wbr{}ให้\wbr{}ทำ\wbr{}งาน\wbr{}อัตโนมัติ\wbr{}ได้. กล่าว\wbr{}คือ\wbr{}เหมาะ\wbr{}สำหรับ\wbr{}การ\emph{ประมวล\wbr{}ผล\wbr{}แบบ batch (batch processing)}\myvocab{b}{batch}{การ\wbr{}ประมวล\wbr{}ผล\wbr{}ข้อ\wbr{}มูล\wbr{}โดย\wbr{}รวบ\wbr{}รวม\wbr{}กระทำ\wbr{}ตาม\wbr{}ลำดับ\wbr{}ที่\wbr{}กำหนด\wbr{}ไว้.} และ\wbr{}แก้\wbr{}ไข\wbr{}ไฟล์\wbr{}หลายๆ\wbr{}ไฟล์\wbr{}พร้อมๆ\wbr{}กัน. สำหรับ\wbr{}การ\wbr{}ทำ\wbr{}งาน\wbr{}ที่\wbr{}ไม่\wbr{}ได้\wbr{}ประโยชน์\wbr{}จาก\wbr{}การ\wbr{}ใช้\wbr{}บรรทัด\wbr{}สั่ง\wbr{}ตาม\wbr{}ที่\wbr{}ได้\wbr{}กล่าว\wbr{}ไป\wbr{}แล้ว\wbr{}ก็\wbr{}ให้\wbr{}ใช้\wbr{}บรรณาธิ\wbr{}กรณ์\wbr{}ใน\wbr{}การ\wbr{}แก้\wbr{}ไข.

\begin{figure}[!htb]
\plfigure{1.0}{awk.eps}{การ\wbr{}ทำ\wbr{}งาน\wbr{}ของ\wbr{}โปรแกรม\wbr{}คำ\wbr{}สั่ง \cmd{sed} และ \cmd{awk}.}{awk}
\end{figure}

ใน\wbr{}ช่วง\wbr{}นี้\wbr{}จะ\wbr{}แนะ\wbr{}นำ\wbr{}โปรแกรม\wbr{}คำ\wbr{}สั่ง 2 อย่าง\wbr{}ที่\wbr{}ใช้\wbr{}ใน\wbr{}การ\wbr{}เปลี่ยน\wbr{}แปลง\wbr{}แก้\wbr{}ไข\wbr{}ไฟล์เท็กซ์\wbr{}ได้\wbr{}ดี\wbr{}กว่า\wbr{}คำ\wbr{}สั่ง \cmd{tr}. คำ\wbr{}สั่ง\wbr{}ที่\wbr{}จะ\wbr{}แนะ\wbr{}นำ\wbr{}นี้\wbr{}ได้\wbr{}แก่ \cmd{sed} และ \cmd{awk} ซึ่ง\wbr{}เป็น\wbr{}ภาษา\wbr{}คอมพิวเตอร์\wbr{}แบบ\wbr{}หนึ่ง\wbr{}ที่\wbr{}ยอม\wbr{}รับ\wbr{}ว่า\wbr{}มี\wbr{}ประโยชน์\wbr{}ใน\wbr{}การ\wbr{}ประมวล\wbr{}ผล\wbr{}ไฟล์เท็กซ์\wbr{}แล้ว\wbr{}มัก\wbr{}ใช้\wbr{}ร่วม\wbr{}กับ\wbr{}เชลล์สค\wbr{}ริปต์.

\subsection{\cmd{sed}}
\cmd{sed} คือ \emph{stream editor}\gindex{stream editor} หมาย\wbr{}ถึง\wbr{}โปรแกรม\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}สามารถ\wbr{}แก้\wbr{}ไข\wbr{}ข้อ\wbr{}มูล\wbr{}ได้\wbr{}โดย\wbr{}รับ\wbr{}ข้อ\wbr{}มูล\wbr{}เป็น\wbr{}สาย\wbr{}อักษร (stream) บรรทัด\wbr{}ต่อ\wbr{}บรรทัด\wbr{}แล้ว\wbr{}ประมวล\wbr{}ผล\wbr{}ตาม\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}เตรียม\wbr{}ไว้. เนื่อง\wbr{}จาก \cmd{sed} เป็น\wbr{}โปรแกรม\wbr{}ที่\wbr{}ซับ\wbr{}ซ้อน\wbr{}ถึง\wbr{}ขั้น\wbr{}มี\wbr{}หนังสือ\wbr{}เฉพาะ\wbr{}สำหรับ\wbr{}คำ\wbr{}สั่ง\wbr{}นี้ \cite{sed}, ใน\wbr{}ที่\wbr{}นี่\wbr{}จะ\wbr{}แนะ\wbr{}นำ\wbr{}การ\wbr{}ใช้\wbr{}งาน\wbr{}เบื้อง\wbr{}ต้น\wbr{}เท่า\wbr{}นั้น.

คำ\wbr{}สั่ง \cmd{sed} มัก\wbr{}ใช้\wbr{}อยู่\wbr{}เชลล์สค\wbr{}ริปต์\wbr{}ใน\wbr{}รูป\wbr{}แบบ
\begin{MyVerbatim}
sed [-n] [-r] \{-e \textit{script} | -f \textit{script_file}\} [\textit{filename}]
\end{MyVerbatim}
ตัว\wbr{}เลือก \cmd{-e} หมาย\wbr{}ถึง\wbr{}รับ\wbr{}คำ\wbr{}สั่ง (\cmdit{script}) ของ \cmd{sed} จาก\wbr{}อาร์กิวเ\wbr{}มนต์\wbr{}เชลล์. สค\wbr{}ริปต์\wbr{}ที่\wbr{}ว่า\wbr{}นี้\wbr{}จะ\wbr{}มี\wbr{}รูป\wbr{}แบบ\wbr{}เป็น \cmd{[address]command} โดย\wbr{}ที่ \cmd{address} คือ\wbr{}ตำแหน่ง\wbr{}บรรทัด\wbr{}ที่\wbr{}ต้องการ\wbr{}ประมวล\wbr{}ผล, และ \cmd{command} คือ\wbr{}คำ\wbr{}สั่ง\wbr{}ของ \cmd{sed} ที่\wbr{}ต้องการ\wbr{}กระทำ\wbr{}กับ\wbr{}ข้อ\wbr{}มูล\wbr{}บรรทัด\wbr{}นั้น. โดย\wbr{}ปรกติ\wbr{}จะ\wbr{}ใช้\wbr{}เครื่อง\wbr{}หมาย quote คร่อมสค\wbr{}ริปต์\wbr{}เพื่อ\wbr{}ไม่\wbr{}ให้\wbr{}เชลล์\wbr{}ตี\wbr{}ความ\wbr{}หมาย\wbr{}ใน\wbr{}กรณี\wbr{}ที่\wbr{}มี\wbr{}อักษร\wbr{}พิเศษ\wbr{}สำหรับ\wbr{}เชลล์. \cmdit{filename} คือ\wbr{}ไฟล์\wbr{}ที่\wbr{}ต้องการ\wbr{}แก้\wbr{}ไข\wbr{}หรือ\wbr{}ถ้า\wbr{}ไม่\wbr{}ระบุ\wbr{}ก็\wbr{}จะ\wbr{}รับ\wbr{}ข้อ\wbr{}มูล\wbr{}จาก stdin. ตัว\wbr{}เลือก \cmd{-r}\mymemo{\cmd{-r} ย่อ\wbr{}มา\wbr{}จาก \cmd{--regexp-extended}} ใช้\wbr{}สำหรับ\wbr{}ระบุ RE แบบ\wbr{}เสริม.

คำ\wbr{}สั่ง\wbr{}แรก\wbr{}ที่\wbr{}จะ\wbr{}แนะ\wbr{}นำ\wbr{}คือ \cmd{p} ซึ่ง\wbr{}จะ\wbr{}แสดง\wbr{}ข้อ\wbr{}มูล\wbr{}บรรทัด\wbr{}ต่อ\wbr{}บรรทัด.\cmd{สมมติ\wbr{}ว่า\wbr{}ไฟล์\wbr{}ที่\wbr{}ต้องการ\wbr{}ประมวล\wbr{}ผล\wbr{}คือ \cmd{simple.html} ซึ่ง\wbr{}เป็น\wbr{}ไฟล์ HTML แบบ\wbr{}ง่ายๆ.}
\begin{MyExample}[ใช้ \cmd{sed}]
\begin{MyEx}
$ \cin{cat -n simple.html}
     1  <html>
     2  <head>
     3  <title>Simple HTML</title>
     4  </head>
     5  <body>
     6  This is a basic simple HTML file.
     7  <!-- This line is a comment -->
     8  </body>
     9  </html>
$ \cin{sed -e 'p' simple.html}
<html>
<html>
<head>
<head>
<title>Simple HTML</title>
<title>Simple HTML</title>
</head>
</head>
<body>
<body>
This is a basic simple HTML file.
This is a basic simple HTML file.
<!-- This line is a comment -->
<!-- This line is a comment -->
</body>
</body>
</html>
</html>
\end{MyEx}
\end{MyExample}

คำ\wbr{}สั่ง \cmd{sed} จะ\wbr{}มี\wbr{}พื้น\wbr{}ที่\wbr{}ใน\wbr{}หน่วย\wbr{}ความ\wbr{}จำ\wbr{}สำหรับ\wbr{}รับ\wbr{}ข้อ\wbr{}มูล\wbr{}เข้า\wbr{}บรรทัด\wbr{}ต่อ\wbr{}บรรทัด. พื้น\wbr{}ที่\wbr{}หน่วย\wbr{}ความ\wbr{}จำ\wbr{}นี้\wbr{}เรีย\wbr{}กว่า pattern space\gindex{pattern space} เป็น\wbr{}พื้น\wbr{}ที่\wbr{}สำหรับ\wbr{}ประมวล\wbr{}ผล\wbr{}ตาม\wbr{}ที่\wbr{}ได้\wbr{}รับ\wbr{}คำ\wbr{}สั่ง. โดย\wbr{}ปรกติ\wbr{}แล้ว\wbr{}คำ\wbr{}สั่ง \cmd{sed} จะ\wbr{}แสดง pattern space ที่\wbr{}ได้\wbr{}รับ\wbr{}การ\wbr{}ประมวล\wbr{}แล้ว\wbr{}ออก\wbr{}ทาง stdout โดย\wbr{}ปริยาย. เนื่อง\wbr{}จาก\wbr{}เรา\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{p}\mymemo{ใน\wbr{}กรณี\wbr{}ที่\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{p} มัก\wbr{}จะ\wbr{}ใช้\wbr{}ตัว\wbr{}เลือก \cmd{-n} เพื่อ\wbr{}ระงับ\wbr{}การ\wbr{}แสดง pattern space เพื่อ\wbr{}ไม่\wbr{}ให้\wbr{}แสดง\wbr{}ผล\wbr{}สอง\wbr{}ครั้ง.}, คำ\wbr{}สั่ง \cmd{sed} จึง\wbr{}แสดง\wbr{}ผล\wbr{}ที่\wbr{}อยู่\wbr{}ใน pattern space อีก\wbr{}ครั้ง.


\subsubsection{การ\wbr{}ระบุ\wbr{}ตำแหน่ง\wbr{}บรรทัด\wbr{}ขึ้น\wbr{}พื้น\wbr{}ฐาน}
การ\wbr{}ระบุ\wbr{}ตำแหน่ง\wbr{}บรรทัด\wbr{}แบบ\wbr{}ง่าย\wbr{}ที่\wbr{}สุด\wbr{}คือ\wbr{}การ\wbr{}ระบุ\wbr{}หมาย\wbr{}เลข\wbr{}บรรทัด. เช่น\wbr{}ถ้า\wbr{}ต้องการ\wbr{}แสดง\wbr{}บรรทัด\wbr{}ที่\wbr{}หนึ่ง\wbr{}ของ\wbr{}ข้อ\wbr{}มูล, ให้\wbr{}สั่ง\wbr{}คำ\wbr{}สั่ง \cmd{1p}. \cmd{1} คือ\wbr{}บรรทัด\wbr{}ที่ 1, \cmd{p} คือ\wbr{}แสดง\wbr{}บรรทัด (print). การ\wbr{}ใช้ \cmd{sed} จะ\wbr{}ใช้\wbr{}ตัว\wbr{}เลือก \cmd{-n} ด้วย\wbr{}เพื่อ\wbr{}ไม่\wbr{}แสดง pattern space โดย\wbr{}ปริยาย.\mymemo{ผู้\wbr{}อ่าน\wbr{}ลอง\wbr{}ไม่\wbr{}ใช้\wbr{}ตัว\wbr{}เลือก \cmd{-n} ดู\wbr{}เอง\wbr{}ว่า\wbr{}จะ\wbr{}เกิด\wbr{}อะไร\wbr{}ขึ้น.}
\begin{MyExample}[ใช้ \cmd{sed} แสดง\wbr{}บรรทัด\wbr{}ที่\wbr{}ต้องการ.]
\begin{MyEx}
$ \cin{sed -ne '1p' simple.html}
<html>
\end{MyEx}
\end{MyExample}%$

การ\wbr{}แสดง\wbr{}บรรทัด\wbr{}แบบ\wbr{}ต่อ\wbr{}เนื่อง\wbr{}เช่น\wbr{}บรรทัด\wbr{}ที่ 1 ถึง 4 ให้\wbr{}ใช้\wbr{}เครื่อง\wbr{}หมาย comma (\cmd{,}) คั่น\wbr{}ระหว่าง\wbr{}เลข\wbr{}บรรทัด.
\begin{MyExample}[ใช้ \cmd{sed} แสดง\wbr{}บรรทัด\wbr{}ที่\wbr{}ต้องการ\wbr{}แบบ\wbr{}ต่อ\wbr{}เนื่อง.]
\begin{MyEx}
$ \cin{sed -ne '1,4p' simple.html}
<html>
<head>
<title>Simple HTML</title>
</head>
\end{MyEx}
\end{MyExample}%$

การ\wbr{}แสดง\wbr{}บรรทัด\wbr{}แบบ\wbr{}ต่อ\wbr{}เนื่อง\wbr{}ยัง\wbr{}สามารถ\wbr{}จำนวน\wbr{}บรรทัด\wbr{}ที่\wbr{}ต้อง\wbr{}แสดง\wbr{}ได้\wbr{}ด้วย\wbr{}เช่น \cmd{2,+3p} หมาย\wbr{}ถึง\wbr{}การ\wbr{}แสดง\wbr{}บรรทัด\wbr{}ที่ 2 และ\wbr{}บรรทัด\wbr{}ถัด\wbr{}ไป\wbr{}อีก 3 บรรทัด.

\medskip
ใน\wbr{}กรณี\wbr{}ทั่ว\wbr{}ไป\wbr{}เรา\wbr{}มัก\wbr{}จะ\wbr{}ระบุ\wbr{}บรรทัด\wbr{}ที่\wbr{}ต้องการ\wbr{}ประมวล\wbr{}ผล\wbr{}โดย\wbr{}ระบุ\wbr{}คำ\wbr{}ที่\wbr{}อยู่\wbr{}ใน\wbr{}บรรทัด\wbr{}นั้น. ตัว\wbr{}อย่าง\wbr{}เช่น\wbr{}ถ้า\wbr{}ต้องการ\wbr{}แสดง\wbr{}ผล\wbr{}บรรทัด\wbr{}ที่\wbr{}เป็น\wbr{}หมาย\wbr{}เหตุ, เรา\wbr{}ไม่\wbr{}สามารถ\wbr{}ระบุ\wbr{}ด้วย\wbr{}หมาย\wbr{}เลข\wbr{}บรรทัด\wbr{}ได้\wbr{}เพราะ\wbr{}ไม่\wbr{}สามารถ\wbr{}รู้\wbr{}ล่วง\wbr{}หน้า\wbr{}ว่า\wbr{}บรรทัด\wbr{}ที่\wbr{}เป็น\wbr{}หมาย\wbr{}เหตุ\wbr{}นั้น\wbr{}เป็น\wbr{}บรรทัด\wbr{}ที่\wbr{}เท่า\wbr{}ไร. ใน\wbr{}กรณี\wbr{}นี้\wbr{}จะ\wbr{}ใช้ regular expression ระบุ\wbr{}ตำแหน่ง\wbr{}บรรทัด.

ตัว\wbr{}อย่าง\wbr{}เช่น\wbr{}ต้องการ\wbr{}แสดง\wbr{}บรรทัด\wbr{}ตั้ง\wbr{}แต่ \cmd{<body>} ถึง \cmd{</body>} สามารถ\wbr{}ทำ\wbr{}ได้\wbr{}ดัง\wbr{}นี้.
\begin{MyExample}[การ\wbr{}ระบุ\wbr{}ตำแหน่ง\wbr{}บรรทัด\wbr{}ด้วย regular expression]
\begin{MyEx}
$ \cin{sed -ne '/<body>/,/<\bs{}/body>/p' simple.html}
<body>
This is a basic simple HTML file.
<!-- This line is a comment -->
</body>
\end{MyEx}
\end{MyExample}%$
ส่วน\wbr{}ที่\wbr{}เป็น regular expression จะ\wbr{}คร่อม\wbr{}ด้วย\wbr{}เครื่อง\wbr{}หมาย slash (\cmd{/}).

\begin{table}[!htb]
\center
\caption{การ\wbr{}ระบุ\wbr{}ตำแหน่ง\wbr{}บรรทัด\wbr{}ของ \cmd{sed} เบื้อง\wbr{}ต้น.}\label{tab:sed_address}
\medskip
\begin{tabular}{lp{.7\textwidth}}
\toprule
\multicolumn{1}{c}{ตำแหน่ง\wbr{}บรรทัด} & \multicolumn{1}{c}{ความ\wbr{}หมาย}\\
\midrule
\cmdit{N} & บรรทัด\wbr{}ที่ \cmdit{N}.\\
\cmdit{N1,N2} & บรรทัด\wbr{}ที่ \cmdit{N1} ถึง\wbr{}บรรทัด\wbr{}ที่ \cmdit{N2}.\\
\cmdit{N,+n} & บรรทัด\wbr{}ที่ \cmdit{N} และ\wbr{}บรรทัด\wbr{}ถัด\wbr{}ไป\wbr{}อีก \cmdit{n} บรรทัด.\\
\cmd{\$} & บรรทัด\wbr{}สุด\wbr{}ท้าย.\\
\cmd{/\textit{re}/} & บรรทัด\wbr{}ที่\wbr{}ตรง\wbr{}กับ regular expression (\cmdit{re}) ที่\wbr{}กำหนด.\\
\bottomrule
\end{tabular}
\end{table}

\subsubsection{คำ\wbr{}สั่ง\wbr{}พื้น\wbr{}ฐาน\wbr{}ของ \cmd{sed}}
%ตา\wbr{}ราง\wbr{}ที่ \ref{tab:sed_command} แสดง\wbr{}คำ\wbr{}สั่ง\wbr{}พื้น\wbr{}ฐาน\wbr{}ของ \cmd{sed} ซึ่ง\wbr{}จะ\wbr{}อธิบาย\wbr{}ใน\wbr{}ช่วง\wbr{}นี้.
\begin{table}[!htb]
\center
\caption{คำ\wbr{}สั่ง\wbr{}พื้น\wbr{}ฐาน\wbr{}ของ \cmd{sed}.}\label{tab:sed_command}
\medskip
\begin{tabular}{lp{.7\textwidth}}
\toprule
\multicolumn{1}{c}{คำ\wbr{}สั่ง} & \multicolumn{1}{c}{คำ\wbr{}อธิบาย}\\
\midrule
\cmd{p} & แสดง\wbr{}ข้อ\wbr{}มูล\wbr{}ที่\wbr{}อยู่\wbr{}ใน\wbr{}บรรทัด\wbr{}บรรทัด.\\
\cmd{d} & ลบ\wbr{}บรรทัด.\\
\cmd{i} & แทรก\wbr{}บรรทัด.\\
\cmd{a} & เพิ่ม\wbr{}บรรทัด.\\
\cmd{c} & เปลี่ยน\wbr{}บรรทัด.\\
\cmd{s/\textit{re}/\textit{word}/[g]} & สับ\wbr{}เปลี่ยน\wbr{}คำ\wbr{}โดย\wbr{}ระบุ\wbr{}คำ\wbr{}ที่\wbr{}ต้อง\wbr{}สับ\wbr{}เปลี่ยน\wbr{}เป็น regular expression ด้วย\wbr{}คำ \cmdit{word} ที่\wbr{}ระบุ.\\
\bottomrule
\end{tabular}
\end{table}


%\paragraph{คำ\wbr{}สั่ง\wbr{}แสดง\wbr{}บรรทัด}
\medskip
คำ\wbr{}สั่ง\wbr{}แสดง\wbr{}บรรทัด\wbr{}ได้\wbr{}แก้\wbr{}คำ\wbr{}สั่ง \cmd{p} ซึ่ง\wbr{}ได้\wbr{}แสดง\wbr{}ตัว\wbr{}อย่าง\wbr{}ไป\wbr{}แล้ว. คำ\wbr{}สั่ง\wbr{}มัก\wbr{}จะ\wbr{}ใช้\wbr{}ร่วม\wbr{}กับ\wbr{}ตัว\wbr{}เลือก \cmd{-n} เพื่อ\wbr{}ให้\wbr{}แสดง\wbr{}เฉพาะ\wbr{}บรรทัด\wbr{}ที่\wbr{}ต้องการ.
%\subsubsection{ลบ\wbr{}บรรทัด}
\medskip
คำ\wbr{}สั่ง\wbr{}ลบ\wbr{}บรรทัด\wbr{}ได้\wbr{}แก่\wbr{}คำ\wbr{}สั่ง \cmd{d} ใช้\wbr{}ลบ\wbr{}บรรทัด\wbr{}ที่\wbr{}ต้องการ.
\begin{MyExample}[การ\wbr{}ใช้ \cmd{sed} ลบ\wbr{}บรรทัด\wbr{}ที่\wbr{}ต้องการ.]
\begin{MyEx}
$ \cin{sed -e '/<!--.*-->/'}
<html>
<head>
<title>Simple HTML</title>
</head>
<body>
This is a basic simple HTML file.
</body>
</html>
\end{MyEx}
\end{MyExample}%$
จาก\wbr{}ตัว\wbr{}อย่าง\wbr{}เป็น\wbr{}การ\wbr{}ลบ\wbr{}บรรทัด\wbr{}ที่\wbr{}เป็น\wbr{}หมาย\wbr{}เหตุ\wbr{}โดย\wbr{}ใช้ regular expression \cmd{<!--.*-->}. \cmd{.} จะ\wbr{}แทน\wbr{}ตัว\wbr{}อักขระ\wbr{}ใดๆ\wbr{}และ \cmd{*} เป็น\wbr{}การ\wbr{}บอ\wbr{}กว่า\wbr{}อักขระ\wbr{}สามารถ\wbr{}มี\wbr{}ต่อ\wbr{}ไป\wbr{}ได้\wbr{}เรื่อย\wbr{}หรือ\wbr{}ไม่\wbr{}มี\wbr{}ก็\wbr{}ได้.

%\subsubsection{การ\wbr{}แทรก\wbr{}บรรทัด}
\medskip
การ\wbr{}แทรก\wbr{}บรรทัด\wbr{}ด้วย\wbr{}คำ\wbr{}สั่ง \cmd{sed} มี\wbr{}สอง\wbr{}แบบ\wbr{}คือ\wbr{}แทรก\wbr{}บรรทัด\wbr{}ก่อน\wbr{}หน้า\wbr{}บรรทัด\wbr{}ที่\wbr{}ต้องการ (insert), และ\wbr{}แทรก\wbr{}บรรทัด\wbr{}หลัง\wbr{}บรรทัด\wbr{}ที่\wbr{}ต้องการ (append). การ\wbr{}แทรก\wbr{}บรรทัด\wbr{}ก่อน\wbr{}หน้า\wbr{}บรรทัด\wbr{}ที่\wbr{}ต้องการ\wbr{}จะ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{i} ที่\wbr{}แสดง\wbr{}ใน\wbr{}ตัว\wbr{}อย่าง\wbr{}ต่อ\wbr{}ไป\wbr{}นี้.
\begin{MyExample}[การ\wbr{}ใช้ \cmd{sed} แทรก\wbr{}บรรทัด\wbr{}ใหม่.]
\begin{MyEx}
$ \cin{ sed -e '/<\bs{}/head>/i\bs{}}
> \cin{<meta http-equiv="Content-Type" content="text/html">' simple.html}
<html>
<head>
<title>Simple HTML</title>
<meta http-equiv="Content-Type" content="text/html">
</head>
<body>
This is a basic simple HTML file.
<!-- This line is a comment -->
</body>
</html>
\end{MyEx}
\end{MyExample}%$
จาก\wbr{}ตัว\wbr{}อย่าง\wbr{}เป็น\wbr{}การ\wbr{}แทรก\wbr{}บรรทัด \cmd{<meta http-equiv="Content-Type" content="text/html">} ก่อน\wbr{}บรรทัด \cmd{</head>}. เครื่อง\wbr{}หมาย backslash (\cmd{\bs}) ที่\wbr{}เขียน\wbr{}หลัง\wbr{}คำ\wbr{}สั่ง \cmd{i} เป็น escape sequence เพื่อ\wbr{}เขียน\wbr{}สิ่ง\wbr{}ที่\wbr{}ต้องการ\wbr{}แทรก\wbr{}ใน\wbr{}บรรทัด\wbr{}ใหม่\wbr{}แทน\wbr{}ที่\wbr{}จะ\wbr{}เขียน\wbr{}ยาวๆ\wbr{}ติด\wbr{}กัน\wbr{}ไป.

การ\wbr{}แทรก\wbr{}บรรทัด\wbr{}หลัง\wbr{}บรรทัด\wbr{}ที\wbr{}ต้องการ\wbr{}ทำ\wbr{}ได้\wbr{}ด้วย\wbr{}คำ\wbr{}สั่ง \cmd{a} ซึ่ง\wbr{}มี\wbr{}การ\wbr{}ใช้\wbr{}งาน\wbr{}คล้าย\wbr{}กับ\wbr{}คำ\wbr{}สั่ง \cmd{i}.\mymemo{ให้\wbr{}ผู้\wbr{}อ่าน\wbr{}ลอง\wbr{}ปฏิบัติ\wbr{}ด้วย\wbr{}ตัว\wbr{}เอง.}

%\subsubsection{การ\wbr{}เปลี่ยน\wbr{}ข้อ\wbr{}มูล\wbr{}ทั้ง\wbr{}บรรทัด}
\medskip
การ\wbr{}เปลี่ยน\wbr{}ข้อ\wbr{}มูล\wbr{}ทั้ง\wbr{}บรรทัด\wbr{}จะ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{c} ซึ่ง\wbr{}ย่อ\wbr{}มา\wbr{}จาก\wbr{}คำ\wbr{}ว่า change หมาย\wbr{}ถึง\wbr{}ลบ\wbr{}ข้อ\wbr{}มูล\wbr{}ใน\wbr{}บรรทัด\wbr{}นั้น\wbr{}ออก\wbr{}แล้ว\wbr{}แทรก\wbr{}ข้อ\wbr{}มูล\wbr{}ใหม่\wbr{}ที่\wbr{}ป้อน\wbr{}ให้\wbr{}เข้า\wbr{}ไป\wbr{}ใน\wbr{}บรรทัด\wbr{}นั้น\wbr{}แทน.
\begin{MyExample}[การ\wbr{}เปลี่ยน\wbr{}ข้อ\wbr{}มูล\wbr{}ทั้ง\wbr{}บรรทัด\wbr{}ด้วย \cmd{sed}.]
\begin{MyEx}
$ \cin{sed -e '/This is a/c\bs{}}
> \cin{Hello World!' simple.html}
<html>
<head>
<title>Simple HTML</title>
</head>
<body>
Hello World!
<!-- This line is a comment -->
</body>
</html>
\end{MyEx}
\end{MyExample}%$
จะ\wbr{}เห็น\wbr{}ว่า\wbr{}บรรทัด\wbr{}ที่\wbr{}มี\wbr{}คำ\wbr{}ว่า \cmd{This is a} จะ\wbr{}ถูก\wbr{}แทน\wbr{}ด้วย \cmd{Hello World!} ตาม\wbr{}ที่\wbr{}ต้องการ.

%\subsubsection{การ\wbr{}สับ\wbr{}เปลี่ยน\wbr{}คำ}
\medskip
\cmd{sed} เป็น\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}นิยม\wbr{}ใน\wbr{}ใช้\wbr{}ใน\wbr{}การ\wbr{}สับ\wbr{}เปลี่ยน\wbr{}คำ (substitute) มาก\wbr{}ที่\wbr{}สุด\wbr{}เพราะ\wbr{}สามารถ\wbr{}ระบุ\wbr{}ส่วน\wbr{}ที่\wbr{}ต้องการ\wbr{}สับ\wbr{}เปลี่ยน\wbr{}กับ\wbr{}คำ\wbr{}ที่\wbr{}ต้องการ\wbr{}ได้\wbr{}ด้วย regular expression, และ\wbr{}คำ\wbr{}สั่ง \cmd{sed} ประมวล\wbr{}ผล\wbr{}ได้\wbr{}รวด\wbr{}เร็ว. การ\wbr{}สับ\wbr{}เปลี่ยน\wbr{}คำ\wbr{}ด้วย \cmd{sed} มี\wbr{}รูป\wbr{}แบบ\wbr{}ดัง\wbr{}นี้.

\begin{MyVerbatim}
s/\textit{re}/\textit{replacement}/[g]
\end{MyVerbatim}

\cmd{s} เป็น\wbr{}ส่วน\wbr{}เริ่ม\wbr{}คำ\wbr{}สั่ง\wbr{}ซึ่ง\wbr{}เป็น\wbr{}คำ\wbr{}ย่อ\wbr{}ของ substitute. ส่วน\wbr{}ที่\wbr{}ต้องการ\wbr{}สับ\wbr{}เปลี่ยน\wbr{}และ\wbr{}คำ\wbr{}ที่\wbr{}ต้องการ\wbr{}แทน\wbr{}จะคล่\wbr{}อม\wbr{}ด้วย\wbr{}เครื่อง\wbr{}หมาย slash (\cmd{/}). \cmd{g}\mymemo{\cmd{g} ย่อ\wbr{}มา\wbr{}จาก\wbr{}คำ\wbr{}สั่ง global.} เป็น\wbr{}คำ\wbr{}สั่ง\wbr{}เพิ่ม\wbr{}เติม\wbr{}ใช้\wbr{}สำหรับ\wbr{}สับ\wbr{}เปลี่ยน\wbr{}คำ\wbr{}ที่\wbr{}ต้องการ\wbr{}หลาย\wbr{}ครั้ง. โดย\wbr{}ปรกติ\wbr{}ถ้า\wbr{}ไม่\wbr{}ระบุ\wbr{}ตัว\wbr{}เลือก\wbr{}นี้ \cmd{sed} จะ\wbr{}สับ\wbr{}เปลี่ยน\wbr{}คำ\wbr{}เฉพาะ\wbr{}คำ\wbr{}ที่\wbr{}เจอ\wbr{}ครั้ง\wbr{}แรก\wbr{}เท่า\wbr{}นั้น.

\begin{MyExample}[การ\wbr{}ใช้ \cmd{sed} สับ\wbr{}เปลี่ยน\wbr{}คำ.]
\begin{MyEx}
$ \cin{ sed -ne 's/title/TITLE/p' simple.html}
<TITLE>Simple HTML</title>
$ \cin{ sed -ne 's/title/TITLE/gp' simple.html}
<TITLE>Simple HTML</TITLE>
\end{MyEx}
\end{MyExample}

ใน\wbr{}ส่วน\wbr{}ของ regular expression เรา\wbr{}สามารถ\wbr{}จับ\wbr{}กลุ่ม\wbr{}คำ\wbr{}ที่\wbr{}ต้องการ\wbr{}แล้ว\wbr{}อ้าง\wbr{}อิง\wbr{}ใช้\wbr{}ใน\wbr{}ภาย\wbr{}หลัง\wbr{}ได้. ตัว\wbr{}อย่าง\wbr{}ต่อ\wbr{}ไป\wbr{}นี้\wbr{}เป็น\wbr{}การ\wbr{}ใช้\wbr{}การ\wbr{}จับ\wbr{}กลุ่ม\wbr{}คำ\wbr{}แล้ว\wbr{}นำ\wbr{}มา\wbr{}ใช้\wbr{}ภาย\wbr{}หลัง\wbr{}ใน\wbr{}ช่วง\wbr{}คำ\wbr{}ที่\wbr{}จะ\wbr{}เปลี่ยน.
\begin{MyExample}[การ\wbr{}จำ\wbr{}กลุ่ม\wbr{}คำ\wbr{}ใน regular expression.]
\begin{MyEx}
$ \cin{sed -e 's/\bs{}(<\bs{}S+>\bs{})/\bs{}U\bs{}1/g' simple.html}
<HTML>
<HEAD>
<TITLE>Simple HTML</TITLE>
</HEAD>
<BODY>
This is a basic simple HTML file.
<!-- This line is a comment -->
</BODY>
</HTML>
\end{MyEx}
\end{MyExample}%$
คำ\wbr{}ที่\wbr{}ต้องการ\wbr{}จับ\wbr{}กลุ่ม\wbr{}จะคล่\wbr{}อม\wbr{}ด้วย\wbr{}เครื่อง\wbr{}หมาย backslash และ\wbr{}วง\wbr{}เล็บ, \cmd{\bs{}(\bs{})}. การ\wbr{}อ้าง\wbr{}อิง\wbr{}ส่วน\wbr{}ที่\wbr{}จับ\wbr{}กลุ่ม\wbr{}ไว้\wbr{}ใน\wbr{}ภาย\wbr{}หลัง\wbr{}จะ\wbr{}ใช้ \cmd{\bs{}\textit{N}} โดย\wbr{}ที่ \cmdit{N} เป็น\wbr{}ตัว\wbr{}เลข 1 ถึง 9. เช่น\wbr{}ถ้า\wbr{}มี\wbr{}การ\wbr{}จับ\wbr{}กลุ่ม\wbr{}ไม่\wbr{}หนึ่ง\wbr{}กลุ่ม\wbr{}และ\wbr{}ต้องการ\wbr{}อ้าง\wbr{}อิง\wbr{}ภาย\wbr{}หลัง\wbr{}ก็\wbr{}จะ\wbr{}เป็น \cmd{\bs{}1} เหมือน\wbr{}ใน\wbr{}ตัว\wbr{}อย่าง.

สำหรับ\wbr{}ส่วน\wbr{}ที่\wbr{}เป็น regular expression, \cmd{\bs{}S} แทน\wbr{}อักษร\wbr{}ใดๆ\wbr{}ที่\wbr{}ไม่\wbr{}ใช่\wbr{}ช่อง\wbr{}ว่าง\wbr{}เช่น\wbr{}ช่อง\wbr{}ไฟ\wbr{}หรือ\wbr{}แคร่. \cmd{+} เป็น\wbr{}การ\wbr{}ระบุ\wbr{}ว่า\wbr{}มี\wbr{}อักษร \cmd{\bs{}S} มาก\wbr{}กว่า\wbr{}หนึ่ง\wbr{}ตัว\wbr{}ขึ้น\wbr{}ไป. ช่วง\wbr{}ของ\wbr{}คำ\wbr{}ที่\wbr{}จะ\wbr{}เปลี่ยน\wbr{}มี\wbr{}การ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{\bs{}U} ให้\wbr{}เปลี่ยน\wbr{}คำ\wbr{}ที่\wbr{}ตาม\wbr{}หลัง\wbr{}มา\wbr{}ให้\wbr{}เป็น\wbr{}ตัว\wbr{}อักษร\wbr{}ตัว\wbr{}ใหญ่.

%\subsubsection{การ\wbr{}สั่ง\wbr{}คำ\wbr{}สั่ง\wbr{}มาก\wbr{}กว่า\wbr{}หนึ่ง\wbr{}อย่าง}
\medskip
คำ\wbr{}สั่ง\wbr{}ของ \cmd{sed} ก็\wbr{}คล้าย\wbr{}กับ\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}ใช้\wbr{}ใน\wbr{}เชลล์\wbr{}คือ\wbr{}มี\wbr{}อักขระ\wbr{}ที่\wbr{}บอก\wbr{}ถึง\wbr{}การ\wbr{}จบ\wbr{}คำ\wbr{}สั่ง\wbr{}แต่\wbr{}ละ\wbr{}คำ\wbr{}สั่ง. อักขระ\wbr{}ที่\wbr{}เป็น\wbr{}ตัว\wbr{}แบ่ง\wbr{}คำ\wbr{}สั่ง\wbr{}ได้\wbr{}แก่\wbr{}อักขระ\wbr{}ขึ้น\wbr{}บรรทัด\wbr{}ใหม่, และ\wbr{}อักขระ semicolon (\cmd{;}). ตัว\wbr{}อย่าง\wbr{}ต่อ\wbr{}ไป\wbr{}นี้\wbr{}จะ\wbr{}แสดง\wbr{}การ\wbr{}แบ่ง\wbr{}คำ\wbr{}สั่ง\wbr{}ด้วย\wbr{}อักขระ\wbr{}ทั้ง\wbr{}สอง\wbr{}แบบ.
\begin{MyExample}[ใช้\wbr{}คำ\wbr{}สั่ง\wbr{}ของ \cmd{sed} หลาย\wbr{}คำ\wbr{}สั่ง\wbr{}พร้อมๆ\wbr{}กัน.]
\begin{MyEx}
$ \cin{sed -ne '1p;4p' simple.html}
<html>
</head>
$ \cin{sed -ne '1p}
> \cin{4p' simple.html}
<html>
</head>
\end{MyEx}
\end{MyExample}

\medskip
วิธี\wbr{}อีก\wbr{}อย่าง\wbr{}ที่\wbr{}ใช้\wbr{}ได้\wbr{}คือ\wbr{}การ\wbr{}ใช้\wbr{}ตัว\wbr{}เลือก \cmd{-e} แบ่ง\wbr{}คำ\wbr{}สั่ง\wbr{}เช่น \cmd{-e '1p' -e '4p'} ก็\wbr{}จะ\wbr{}ให้\wbr{}ผล\wbr{}เหมือน\wbr{}กัน. ใน\wbr{}การ\wbr{}ใช้\wbr{}งาน\wbr{}จริง\wbr{}ถ้า\wbr{}มี\wbr{}การ\wbr{}สั่ง\wbr{}คำ\wbr{}สั่ง\wbr{}เป็น\wbr{}ชุด\wbr{}ความ\wbr{}จะ\wbr{}เขียน\wbr{}เป็นสค\wbr{}ริปต์\wbr{}เก็บ\wbr{}ไว้\wbr{}ใน\wbr{}ไฟล์\wbr{}แล้ว\wbr{}ใช้\wbr{}ตัว\wbr{}เลือก \cmd{-f} เรียกสค\wbr{}ริปต์\wbr{}มา\wbr{}ใช้\wbr{}แทน\wbr{}การ\wbr{}สั่ง\wbr{}คำ\wbr{}สั่ง \cmd{sed} ทาง\wbr{}บรรทัด\wbr{}คำ\wbr{}สั่ง.

%\subsubsection{การ\wbr{}จับ\wbr{}กลุ่ม\wbr{}คำ\wbr{}สั่ง}
\medskip
สมมติ\wbr{}ว่า\wbr{}เรา\wbr{}ต้องการ\wbr{}สั่ง\wbr{}คำ\wbr{}สั่ง\wbr{}เป็น\wbr{}ชุด\wbr{}กับ\wbr{}ตำแหน่ง\wbr{}ที่\wbr{}ต้องการ, ให้\wbr{}ใช้\wbr{}การ\wbr{}จับ\wbr{}กลุ่ม\wbr{}ของ\wbr{}คำ\wbr{}สั่ง\wbr{}ด้วย\wbr{}เครื่อง\wbr{}หมาย brace (\cmd{\{\}}).
\begin{MyExample}[การ\wbr{}จับ\wbr{}กลุ่ม\wbr{}คำ\wbr{}สั่ง\wbr{}ของ \cmd{sed}.]
\begin{MyEx}
$ \cin{sed -e '/<body>/,/<\bs{}/body>/\{}
> \cin{s/HTML/html/;s/line //\}' simple.html}
<html>
<head>
<title>Simple html</title>
</head>
<body>
This is a basic simple html file.
<!-- This is a comment -->
</body>
</html>
\end{MyEx}
\end{MyExample}%$
จาก\wbr{}ตัว\wbr{}อย่าง\wbr{}เป็น\wbr{}การ\wbr{}ใช้ \cmd{sed} ให้\wbr{}เปลี่ยน\wbr{}คำ\wbr{}ว่า HTML ให้\wbr{}เป็น html และ\wbr{}ลบ\wbr{}คำ\wbr{}ว่า line ออก\wbr{}ไป\wbr{}ตั้ง\wbr{}แต่\wbr{}บรรทัด \cmd{<body>} จน\wbr{}ถึง \cmd{<\bs{}body>}.


%\subsubsection{การ\wbr{}บันทึก\wbr{}ผล\wbr{}ลัพธ์}
\medskip
ผู้\wbr{}อ่าน\wbr{}จะสัง\wbr{}เกตุ\wbr{}เห็น\wbr{}ว่า\wbr{}คำ\wbr{}สั่ง \cmd{sed} จะ\wbr{}แสดง\wbr{}ผล\wbr{}ลัพธ์\wbr{}ออก\wbr{}ทาง stdout. เพราะ\wbr{}ฉะนั้น\wbr{}ถ้า\wbr{}ต้องการ\wbr{}จะ\wbr{}บันทึก\wbr{}ผล\wbr{}ลัพธ์\wbr{}นั้น\wbr{}ลง\wbr{}ไฟล์\wbr{}ก็ตั้\wbr{}อง\wbr{}ใช้\wbr{}การ\wbr{}รี\wbr{}ไดเ\wbr{}รก. สำหรับ\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}ที่\wbr{}ต้องการ\wbr{}เก็บ\wbr{}ผล\wbr{}ลัพธ์\wbr{}นั้น\wbr{}ต้อง\wbr{}เป็น\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}ที่\wbr{}ไม่\wbr{}ใช่\wbr{}ไฟล์\wbr{}ที่\wbr{}กำลัง\wbr{}ประมวล\wbr{}ผล, มิ\wbr{}ฉะนั้น\wbr{}ข้อ\wbr{}มูล\wbr{}จะ\wbr{}หาย\wbr{}ไป\mymemo{ข้อ\wbr{}ผิด\wbr{}พลาด\wbr{}ที่\wbr{}ควร\wbr{}ระวัง\wbr{}ของ\wbr{}การ\wbr{}ใช้\wbr{}รี\wbr{}ไดเ\wbr{}รก\wbr{}ให้\wbr{}ดู\wbr{}ตัว\wbr{}อย่าง\wbr{}จาก\wbr{}หน้า \pageref{ex:samefile}}. แต่\wbr{}การ\wbr{}รี\wbr{}ไดเ\wbr{}รก\wbr{}ผล\wbr{}ลัพธ์\wbr{}ลง\wbr{}ใน\wbr{}ไฟล์\wbr{}ใหม่\wbr{}นั้น\wbr{}ก็\wbr{}ไม่\wbr{}สะดวก\wbr{}เช่น\wbr{}กัน\wbr{}ถ้า\wbr{}เรา\wbr{}ต้องการ\wbr{}จะ\wbr{}แก้\wbr{}ไฟล์\wbr{}นั้น. เพราะ\wbr{}หลัง\wbr{}จาก\wbr{}ที่\wbr{}รี\wbr{}ไดเ\wbr{}รก\wbr{}แล้ว\wbr{}เรา\wbr{}ต้อง\wbr{}ทำ\wbr{}การ\wbr{}เปลี่ยน\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}ใหม่\wbr{}ให้\wbr{}เป็น\wbr{}ไฟล์\wbr{}ที่\wbr{}ต้องการ\wbr{}ที\wbr{}หลัง.

เพื่อ\wbr{}แก้\wbr{}ปัญหา\wbr{}ความ\wbr{}ไม่\wbr{}สะดวก\wbr{}นี้, เรา\wbr{}สามารถ\wbr{}ใช้\wbr{}ตัว\wbr{}เลือก \cmd{-i} เพื่อ\wbr{}ให้ \cmd{sed} แก้\wbr{}ไข\wbr{}ไฟล์\wbr{}ที่\wbr{}ต้องการ\wbr{}เลย, ไม่\wbr{}ต้อง\wbr{}แสดง\wbr{}ผล\wbr{}ออก\wbr{}ทาง stdout.
\begin{MyExample}[ให้ \cmd{sed} แก้\wbr{}ไฟล์\wbr{}โดย\wbr{}บันทึก\wbr{}ผล\wbr{}ลัพธ์\wbr{}ใน\wbr{}ไฟล์\wbr{}นั้น.]
\begin{MyEx}
$ \cin{sed -i.bak -e 's/\bs{}(<\bs{}S*>\bs{})/\bs{}U\bs{}1/g' simple.html}
$ \cin{ls}
simple.html simple.html.bak
$ \cin{cat simple.html}
<HTML>
<HEAD>
<TITLE>Simple HTML</TITLE>
</HEAD>
<BODY>
This is a basic simple HTML file.
<!-- This line is a comment -->
</BODY>
</HTML>
$ \cin{cat simple.html.bak}
<html>
<head>
<title>Simple HTML</title>
</head>
<body>
This is a basic simple HTML file.
<!-- This line is a comment -->
</body>
</html>
\end{MyEx}
\end{MyExample}

จาก\wbr{}ตัว\wbr{}อย่าง, ตัว\wbr{}เลือก \cmd{-i} มี\wbr{}อาร์กิวเ\wbr{}มนต์ \cmd{.bak} ซึ่ง\wbr{}คำ\wbr{}สั่ง \cmd{sed} จะ\wbr{}สร้าง\wbr{}ไฟล์\wbr{}ชื่อ \cmd{simple.html.bak} ให้\wbr{}เป็น\wbr{}ไฟล์\wbr{}สำรอง\wbr{}ที่\wbr{}มี\wbr{}เนื้อ\wbr{}หา\wbr{}เดิม\wbr{}ก่อน\wbr{}ที่\wbr{}จะ\wbr{}มี\wbr{}การ\wbr{}เปลี่ยน\wbr{}แปลง. ส่วน\wbr{}เนื้อ\wbr{}หา\wbr{}ของ\wbr{}ไฟล์ \cmd{simple.html} เป็น\wbr{}เนื้อ\wbr{}หา\wbr{}ที่ \cmd{sed} ได้\wbr{}ทำ\wbr{}การ\wbr{}เปลี่ยน\wbr{}แปลง\wbr{}เรียบ\wbr{}ร้อย\wbr{}แล้ว. การ\wbr{}ใช้ \cmd{sed} กับ\wbr{}ตัว\wbr{}เลือก \cmd{-i} ทำ\wbr{}ให้\wbr{}ผู้\wbr{}ใช้\wbr{}ไม่\wbr{}ต้อง\wbr{}รี\wbr{}ไดเ\wbr{}รก\wbr{}และ\wbr{}ยัง\wbr{}สามารถ\wbr{}เปลี่ยน\wbr{}ไฟล์\wbr{}กลับ\wbr{}เป็น\wbr{}อย่าง\wbr{}เก่า\wbr{}โดย\wbr{}ใช้\wbr{}ไฟล์\wbr{}สำรอง\wbr{}ที่\wbr{}สร้าง\wbr{}ไว้. ถ้า\wbr{}ไม่\wbr{}มี\wbr{}การ\wbr{}ให้\wbr{}อาร์กิวเ\wbr{}มนต์\wbr{}ส่วน\wbr{}ขยาย\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}ให้ \cmd{-i}, จะ\wbr{}ไม่\wbr{}มี\wbr{}การ\wbr{}ทำ\wbr{}ไฟล์\wbr{}สำรอง\wbr{}ให้.


\subsection{\cmd{awk}}
\cmd{awk} เป็น\wbr{}โปรแกรม\wbr{}คำ\wbr{}สั่ง\wbr{}สำหรับ\wbr{}ประมวล\wbr{}ผล\wbr{}ข้อ\wbr{}มูลเท็กซ์\wbr{}และ\wbr{}ราย\wbr{}งาน\wbr{}ผล. คำ\wbr{}สั่ง\wbr{}สั่ง \cmd{awk} มี\wbr{}มา\wbr{}นาน\wbr{}พร้อม\wbr{}กับ\wbr{}ระบบ\wbr{}ปฏิบัติ\wbr{}การ\wbr{}ยู\wbr{}นิกซ์\wbr{}สมัย\wbr{}แรกๆ. โปรแกรม\wbr{}นี้\wbr{}แรก\wbr{}สุด\wbr{}สร้าง\wbr{}โดย Alfred V. Aho, Peter J. Weinberger และ Brian Kernighan. คำ\wbr{}สั่ง \cmd{awk} ที่\wbr{}ใช้\wbr{}กัน\wbr{}ใน\wbr{}ลิ\wbr{}นุกซ์\wbr{}เป็น\wbr{}โปรแกรม\wbr{}ที่\wbr{}สร้าง\wbr{}ใหม่\wbr{}ให้\wbr{}เข้า\wbr{}กัน\wbr{}กับ \cmd{awk} ดั้งเดิม\wbr{}โดย Free Software Foundation มี\wbr{}ชื่อ\wbr{}ว่า \cmd{gawk}\cindex{gawk}. ใน\wbr{}ระบบ\wbr{}ทั่ว\wbr{}ไป\wbr{}ก็\wbr{}มัก\wbr{}จะ\wbr{}นิยม\wbr{}สร้าง \cmd{awk} ให้\wbr{}เป็น\wbr{}ซอฟต์\wbr{}ลิงค์\wbr{}ของ \cmd{gawk}.

คำ\wbr{}สั่ง \cmd{awk} เป็น\wbr{}ภาษา\wbr{}คอมพิวเตอร์\wbr{}แบบ\wbr{}หนึ่ง, มี\wbr{}หลัก\wbr{}การ\wbr{}การ\wbr{}ทำ\wbr{}งาน\wbr{}คล้าย \cmd{sed} คือ\wbr{}รับ\wbr{}ข้อ\wbr{}มูล\wbr{}เป็น\wbr{}บรรทัดๆ\wbr{}แต่\wbr{}มี\wbr{}ความ\wbr{}สามารถ\wbr{}มาก\wbr{}กว่า \cmd{sed} เช่น\wbr{}สร้าง\wbr{}ตัวแปร\wbr{}เก็บ\wbr{}ข้อ\wbr{}มูล\wbr{}ได้, มี\wbr{}ฟังก์ชัน\wbr{}คณิต\wbr{}ศาตร์\wbr{}ช่วย\wbr{}ประมวล\wbr{}ผล, มี\wbr{}ไวย\wbr{}กรณ์\wbr{}แยก\wbr{}เงื่อน\wbr{}ไข ฯลฯ. การ\wbr{}สั่ง\wbr{}คำ\wbr{}สั่ง \cmd{awk} สามารถ\wbr{}เขียน\wbr{}ไป\wbr{}คำ\wbr{}สั่ง\wbr{}ส่ง\wbr{}ทาง\wbr{}อาร์กิวเ\wbr{}มนต์\wbr{}หรือ\wbr{}จะ\wbr{}เขียน\wbr{}เป็น\wbr{}ไฟล์\wbr{}เก็บ\wbr{}ไว้\wbr{}แล้ว\wbr{}รับ\wbr{}คำ\wbr{}สั่ง\wbr{}จาก\wbr{}ไฟล์\wbr{}นั้น\wbr{}ก็\wbr{}ได้.

\begin{MyVerbatim}
awk [-f \textit{script}] '\textit{pattern} \{\textit{action}\}' [\textit{file_target}]
\end{MyVerbatim}

การ\wbr{}ระบุ pattern ของ\wbr{}คำ\wbr{}สั่ง \cmd{awk} จะ\wbr{}ใช้ regular expression เหมือน\wbr{}กับ\wbr{}คำ\wbr{}สั่ง \cmd{sed}. action จะ\wbr{}เป็น\wbr{}การ\wbr{}กระทำ\wbr{}ที่\wbr{}เกิด\wbr{}ขึ้น\wbr{}เมื่อ\wbr{}เจอ pattern ที่\wbr{}ต้องการ. เรา\wbr{}ลอง\wbr{}มา\wbr{}ดู\wbr{}ตัว\wbr{}อย่าง\wbr{}การ\wbr{}ใช้ \cmd{awk} ร่วม\wbr{}กับ\wbr{}คำ\wbr{}สั่ง\wbr{}อื่น\wbr{}ดัง\wbr{}นี้.
\begin{MyExample}[การ\wbr{}ใช้ \cmd{awk} เบื้อง\wbr{}ต้น.]\label{ex:basic_awk}
\begin{MyEx}
$ \cin{du -s /usr/* | head | awk '/X11/ \{print $0\}'}
164900  /usr/X11R6
\end{MyEx}
\end{MyExample}
จาก\wbr{}ตัว\wbr{}อย่าง, \cmd{awk} รับ\wbr{}ข้อ\wbr{}มูล\wbr{}จาก stdin ซึ่ง\wbr{}เป็น\wbr{}ผล\wbr{}ลัพธ์\wbr{}ของ\wbr{}คำ\wbr{}สั่ง \cmd{du} ซึ่ง\wbr{}แสดง\wbr{}การ\wbr{}ใช้\wbr{}พื้น\wbr{}ที่\wbr{}ของ\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี\wbr{}ต่างๆ\wbr{}ใต้ \cmd{/usr} และ\wbr{}ส่ง\wbr{}ต่อ\wbr{}ให้\wbr{}คำ\wbr{}สั่ง \cmd{head} เพื่อ\wbr{}ลด\wbr{}จำนวน\wbr{}ผล\wbr{}ลัพธ์\wbr{}ให้\wbr{}เหลือ 10 บรรทัด\mymemo{\cmd{head} จะ\wbr{}แสดง\wbr{}ข้อ\wbr{}มูล 10 บรรทัด\wbr{}แรก\wbr{}โดย\wbr{}ปริยาย\wbr{}ถ้า\wbr{}ไม่\wbr{}ระบุ\wbr{}จำนวน\wbr{}บรรทัด\wbr{}ที่\wbr{}ต้องการ.}. จาก\wbr{}นั้น\wbr{}ใช้ \cmd{awk} แสดง\wbr{}บรรทัด\wbr{}ที่\wbr{}มี\wbr{}คำ\wbr{}ว่า \cmd{X11}.

\subsubsection{แถว\wbr{}และ\wbr{}คอลัมน์}
\begin{figure}[!htb]
\plfigure{.8}{record_field.eps}{ความ\wbr{}สัมพันธ์\wbr{}ระหว่าง\wbr{}แถว\wbr{}และ\wbr{}คอลัมน์\wbr{}ใน\wbr{}ไฟล์.}{record_field}
\end{figure}

\cmd{awk} จะ\wbr{}รับ\wbr{}ข้อ\wbr{}มูล\wbr{}บรรทัด\wbr{}ต่อ\wbr{}บรรทัด\wbr{}เหมือน\wbr{}กับ\wbr{}คำ\wbr{}สั่ง \cmd{sed}. \cmd{awk} จะ\wbr{}เรียก\wbr{}ข้อ\wbr{}มูล\wbr{}ที่\wbr{}มี\wbr{}หน่วย\wbr{}เป็น\wbr{}บรรทัด\wbr{}ว่า\wbr{}แถว (row) หรือ \emph{record}\gindex{record}. นอก\wbr{}จาก\wbr{}นั้น\wbr{}ยัง\wbr{}แยก\wbr{}ข้อ\wbr{}มูล\wbr{}ใน\wbr{}บรรทัด\wbr{}ต่อ\wbr{}ไป\wbr{}อีก\wbr{}เป็น\wbr{}คอลัมน์ (column) หรือ \emph{field}\gindex{field}. เรา\wbr{}สามารถ\wbr{}มอง\wbr{}ไฟล์\wbr{}ให้\wbr{}เป็น\wbr{}ตา\wbr{}ราง\wbr{}ข้อ\wbr{}มูล\wbr{}แถว\wbr{}และ\wbr{}คอลัมน์, และ\wbr{}ใน\wbr{}คำ\wbr{}สั่ง \cmd{awk} จะ\wbr{}มี\wbr{}ตัวแปร\wbr{}แทน\wbr{}สำหรับ\wbr{}ข้อ\wbr{}มูล\wbr{}ใน\wbr{}แถว\wbr{}และ\wbr{}คอลัมน์\wbr{}ที่\wbr{}ต้องการ. ข้อ\wbr{}มูล\wbr{}คอลัมน์\wbr{}มี\wbr{}การ\wbr{}แบ่ง\wbr{}เป็น\wbr{}ช่วงๆ\wbr{}แยก\wbr{}ด้วย\wbr{}เครื่อง\wbr{}หมาย\wbr{}ที่\wbr{}กำหนด\wbr{}เช่น ช่อง\wbr{}ว่าง, colon เป็นต้น. จาก\wbr{}ตัว\wbr{}อย่าง\wbr{}ที่ \ref{ex:basic_awk}, อักษร\wbr{}ที่\wbr{}แบ่ง\wbr{}ข้อ\wbr{}มูล\wbr{}เป็น field ได้\wbr{}แก่\wbr{}ช่อง\wbr{}ว่าง. ตัวแปร\wbr{}ที่\wbr{}ใช้\wbr{}แทน\wbr{}ข้อ\wbr{}มล\wbr{}แถว\wbr{}ได้\wbr{}แก่ \cmd{\$0} ซึ่ง\wbr{}จะ\wbr{}หมาย\wbr{}ถึง\wbr{}บรรทัด\wbr{}ทั้ง\wbr{}บรรทัด. ส่วน\wbr{}ตัวแปร\wbr{}ที่\wbr{}ใช้\wbr{}แทน\wbr{}ข้อ\wbr{}มูล\wbr{}คอลัมน์\wbr{}แต่\wbr{}ละ\wbr{}คอลัมน์\wbr{}ได้\wbr{}แก่ \cmd{\$1}, \cmd{\$2} ไป\wbr{}เรื่อยๆ.

คำ\wbr{}สั่ง \cmd{awk} จะ\wbr{}ถือ\wbr{}ว่า\wbr{}อักขระ LF (line feed) เป็น\emph{ตัว\wbr{}แบ่ง\wbr{}แถว (record separator)} และ\wbr{}ถือ\wbr{}ว่า\wbr{}ช่อง\wbr{}ว่าง\wbr{}เป็น\emph{ตัว\wbr{}แบ่ง\wbr{}คอลัมน์ (field separator)} โดย\wbr{}ปริยาย. ดัง\wbr{}นั้น\wbr{}จาก\wbr{}ตัว\wbr{}อย่าง\wbr{}ที่ \ref{ex:awk_basic} ถ้า\wbr{}ต้องการ\wbr{}เปลี่ยน\wbr{}ลำดับ\wbr{}ผล\wbr{}ลัพธ์\wbr{}ของ \cmd{du} ให้\wbr{}ชื่อ\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี\wbr{}นำ\wbr{}หน้า\wbr{}ทำ\wbr{}ได้\wbr{}ดัง\wbr{}นี้.
\begin{MyExample}[การ\wbr{}ใช้\wbr{}ข้อ\wbr{}มูล\wbr{}คอลัมน์\wbr{}ใน \cmd{awk}.]
\begin{MyEx}
$ \cin{du -s /usr/* | head -n 5 | awk '\{print "line\t" NR, $2, $1\}'}
line    1 /usr/X11R6 164900
line    2 /usr/bin 156324
line    3 /usr/doc 0
line    4 /usr/i686-pc-linux-gnu 2532
line    5 /usr/include 54984
\end{MyEx}
\end{MyExample}%$

จาก\wbr{}ตัว\wbr{}อย่าง\wbr{}ไม่\wbr{}มี\wbr{}การ\wbr{}ระบุ\wbr{}รูป\wbr{}แบบ (pattern) ต้องการ, มี\wbr{}เฉพาะ\wbr{}คำ\wbr{}สั่ง (action) ซึ่ง\wbr{}คำ\wbr{}สั่ง\wbr{}นี้\wbr{}จะ\wbr{}อยู่\wbr{}ใน\wbr{}วง\wbr{}เล็บ\wbr{}ปีก\wbr{}กา\wbr{}และ\wbr{}กระทำ\wbr{}ทุก\wbr{}ครั้ง\wbr{}เมื่อ\wbr{}อ่าน\wbr{}ข้อ\wbr{}มูล\wbr{}บรรทัด\wbr{}ต่อ\wbr{}บรรทัด. \cmd{print} เป็น\wbr{}คำ\wbr{}สั่ง (action) ที่\wbr{}ใช้\wbr{}บ่อย, สามารถ\wbr{}ใช้\wbr{}แสดง\wbr{}คำ\wbr{}หรือ\wbr{}ตัวแปร. คำ\wbr{}ที่\wbr{}ต้องการ\wbr{}แสดง\wbr{}จะ\wbr{}ต้อง\wbr{}เขียน\wbr{}อยู่\wbr{}ใน single quote หรือ double quote. \cmd{NR} คือ\wbr{}ตัวแปร\wbr{}ประกอบ\wbr{}อยู่\wbr{}ภาย\wbr{}ใน (build-in variable) ใช้\wbr{}บอก\wbr{}จำนวน\wbr{}บรรทัด\wbr{}ที่\wbr{}ผ่าน\wbr{}การ\wbr{}ประมวล\wbr{}ผล\wbr{}แล้ว. ส่วน\wbr{}เครื่อง\wbr{}หมาย comma เป็น\wbr{}ตัว\wbr{}แบ่ง\wbr{}สิ่ง\wbr{}ที่\wbr{}ต้องการ\wbr{}พิมพ์\wbr{}ด้วย\wbr{}อักขระ\wbr{}ที่\wbr{}กำหนด\wbr{}ไว้\wbr{}ใน\wbr{}ตัวแปร\wbr{}พิเศษ \cmd{OFS} ซึ่ง\wbr{}จะ\wbr{}มี\wbr{}ค่า\wbr{}ปริยาย\wbr{}เป็น\wbr{}ช่อง\wbr{}ไฟ. ดัง\wbr{}นั้น\wbr{}ผล\wbr{}ของ\wbr{}คำ\wbr{}สั่ง \cmd{print} จะ\wbr{}แบ่ง\wbr{}ข้อ\wbr{}มูล\wbr{}แต่\wbr{}ละ\wbr{}คอลัมน์\wbr{}ด้วย\wbr{}ช่อง\wbr{}ไฟ. ให้\wbr{}สังเกต\wbr{}ว่า\wbr{}เวลา\wbr{}สั่ง\wbr{}คำ\wbr{}สั่ง \cmd{print} ที่\wbr{}หลัง\wbr{}คำ\wbr{}ว่า ``line'' คือ\wbr{}เครื่อง\wbr{}หมาย\wbr{}แคร่\wbr{}ไม่\wbr{}ใช่\wbr{}ช่อง\wbr{}ไฟ\wbr{}เพราะ\wbr{}ไม่\wbr{}ได้\wbr{}เขียน\wbr{}แยก\wbr{}ด้วย comma.

\begin{table}[!htb]
\caption{ตัวแปร\wbr{}ประกอบ\wbr{}อยู่\wbr{}ภาย\wbr{}ใน\wbr{}คำ\wbr{}สั่ง \cmd{awk}.}\label{tab:awk_var}
\medskip
\begin{tabular}{lp{.8\textwidth}}
\toprule
\multicolumn{1}{c}{ตัวแปร} & \multicolumn{1}{c}{คำ\wbr{}อธิบาย}\\
\midrule
\cmd{\$0} & ข้อ\wbr{}มูล\wbr{}ที่\wbr{}อยู่\wbr{}ใน\wbr{}บรรทัด\wbr{}ที่\wbr{}ประมวล\wbr{}ผล\wbr{}อยู่.\\
\cmd{\$1}, \cmd{\$2}, ... & ข้อ\wbr{}มูล\wbr{}ที่\wbr{}อยู่\wbr{}ใน\wbr{}แต่\wbr{}ละ\wbr{}คอลัมน์.\\
\cmd{NR} & จำนวน\wbr{}บรรทัด\wbr{}ที่\wbr{}ประมวล\wbr{}ผล\wbr{}ไป\wbr{}แล้ว.\\
\cmd{NF} & จำนวน\wbr{}คอลัมน์\wbr{}ที่\wbr{}มี\wbr{}อยู่\wbr{}ใน\wbr{}แถว.\\
\cmd{FS} & ตัว\wbr{}แบ่ง\wbr{}คอลัมน์\wbr{}สำหรับ\wbr{}การ\wbr{}อ่าน\wbr{}ข้อ\wbr{}มูล\wbr{}เข้า. ค่า\wbr{}โดย\wbr{}ปริยาย\wbr{}คือ\wbr{}ช่อง\wbr{}ว่าง.\\
\cmd{OFS} & ตัว\wbr{}แบ่ง\wbr{}คอลัมน์\wbr{}สำหรับ\wbr{}การ\wbr{}แสดง\wbr{}ผล. ค่า\wbr{}โดย\wbr{}ปริยาย\wbr{}คือ\wbr{}ช่อง\wbr{}ไฟ.\\
\cmd{RS} & ตัว\wbr{}แบ่ง\wbr{}แถว\wbr{}สำหรับ\wbr{}การ\wbr{}อ่าน\wbr{}ข้อ\wbr{}มูล\wbr{}เข้า. ค่า\wbr{}โดย\wbr{}ปริยาย\wbr{}คือ\wbr{}อักขระ LF.\\
\cmd{ORS} & ตัว\wbr{}แบ่ง\wbr{}แถว. ค่า\wbr{}โดย\wbr{}ปริยาย\wbr{}คือ\wbr{}อักขระ LF.\\
\bottomrule
\end{tabular}
\end{table}

\subsection{บล็อก\wbr{}พิเศษ}
ใน\wbr{}ไวย\wbr{}กรณ์\wbr{}ของ \cmd{awk} จะ\wbr{}มี\wbr{}บล็อก (block) พิเศษ\wbr{}คล้าย\wbr{}กับ\wbr{}บล็อก\wbr{}ที่คล่\wbr{}อม\wbr{}ด้วย\wbr{}เครื่อง\wbr{}หมา\wbr{}ยวง\wbr{}เล็บ\wbr{}ปีก\wbr{}กา\wbr{}เหมือน\wbr{}บล็อก\wbr{}คำ\wbr{}สั่ง. บล็อก\wbr{}พิเศษ\wbr{}ดัง\wbr{}กล่าว\wbr{}นี้\wbr{}ได้\wbr{}แก่ \cmd{BEGIN\{...\}} และ \cmd{END\{...\}}. บล็อก \cmd{BEGIN} มัก\wbr{}ใช้\wbr{}สำหรับ\wbr{}ตั้ง\wbr{}ค่า\wbr{}ตัวแปร\wbr{}เริ่ม\wbr{}ต้น\wbr{}หรือ\wbr{}กระทำ\wbr{}การ\wbr{}ก่อน\wbr{}ที่\wbr{}จะ\wbr{}ประมวล\wbr{}ผล\wbr{}ข้อ\wbr{}มูล\wbr{}ใน\wbr{}แต่\wbr{}ละ\wbr{}บรรทัด. บล็อก \cmd{END} เป็น\wbr{}ส่วน\wbr{}ที่\wbr{}กระทำ\wbr{}การ\wbr{}หลัง\wbr{}จาก\wbr{}การ\wbr{}ประมวล\wbr{}ผล\wbr{}ของ\wbr{}ทุก\wbr{}บรรทัด\wbr{}เสร็จ\wbr{}เรียบ\wbr{}ร้อย.

\begin{MyExample}[การ\wbr{}ใช้\wbr{}บล็อก\wbr{}พิเศษ\wbr{}ใน \cmd{awk}.]
\begin{MyEx}
$ \cin{awk 'BEGIN\{FS=":"; ORS="\bs{}n-----\bs{}n"\}}
> \cin{/root/ \{print "username:", $1 "\bs{}nuid:", $3\}' /etc/passwd}
username: root
uid: 0
-----
username: operator
uid: 11
-----
username: cvs
uid: 102
-----
\end{MyEx}
\end{MyExample}%$
%$ \cin{du -s /usr/* | head -n 5 | awk '}
%> \cin{BEGIN \{OFS=":"\}} \mycomment{หลัง \cmd{BEGIN} จะ\wbr{}ไม่\wbr{}เว้น\wbr{}วรรค\wbr{}ก็\wbr{}ได้}
%> \cin{\{print $1, $2\}'}
%164900:/usr/X11R6
%156324:/usr/bin
%0:/usr/doc
%2532:/usr/i686-pc-linux-gnu
%54984:/usr/include
จาก\wbr{}ตัว\wbr{}อย่าง\wbr{}เป็น\wbr{}การ\wbr{}ประมวล\wbr{}ผล\wbr{}ไฟล์ \cmd{/etc/passwd} ซึ่ง\wbr{}เป็น\wbr{}ไฟล์\wbr{}ที่\wbr{}เก็บ\wbr{}ชื่อ\wbr{}ผู้\wbr{}ใช้, uid, gid ฯลฯ. ข้อ\wbr{}มูล\wbr{}เหล่า\wbr{}นี้\wbr{}จะ\wbr{}มี\wbr{}เครื่อง\wbr{}หมาย colon แบ่ง\wbr{}เป็น\wbr{}คอลัมน์. ใน\wbr{}ตัว\wbr{}อย่าง\wbr{}จะ\wbr{}เป็น\wbr{}การ\wbr{}สกัด\wbr{}เอา\wbr{}ข้อ\wbr{}มูล\wbr{}จาก\wbr{}คอลัมน์\wbr{}ที่ 1 ซึ่ง\wbr{}ได้\wbr{}แก่\wbr{}ชื่อ\wbr{}ผู้\wbr{}ใช้\wbr{}และ\wbr{}ข้อ\wbr{}มูล\wbr{}จาก\wbr{}คอลัมน์\wbr{}ที่ 2 ซึ่ง\wbr{}ได้\wbr{}แก่ uid มา\wbr{}จัด\wbr{}เรียง\wbr{}แสดง\wbr{}ผล\wbr{}ใหม่. ใน\wbr{}บล็อก \cmd{BEGIN} จะ\wbr{}เป็น\wbr{}การ\wbr{}ตั้ง\wbr{}ค่า\wbr{}ตัวแปร\wbr{}พิเศษ \cmd{FS} ซึ่ง\wbr{}บอก\wbr{}ให้ \cmd{awk} รู้\wbr{}ว่า\wbr{}ตัว\wbr{}แบ่ง\wbr{}คอลัมน์\wbr{}คือ\wbr{}เครื่อง\wbr{}หมาย colon, และ\wbr{}ตั้ง\wbr{}ค่า \cmd{ORS} ให้\wbr{}แสดง \cmd{-----} หลัง\wbr{}จบ\wbr{}การ\wbr{}แสดง\wbr{}ข้อ\wbr{}มูล\wbr{}แต่\wbr{}ละ\wbr{}แถว. หลัง\wbr{}จาก\wbr{}นั้น\wbr{}จะ\wbr{}เป็น\wbr{}การ\wbr{}กระทำ\wbr{}การ\wbr{}กับ\wbr{}บรรทัด\wbr{}ที่\wbr{}มี\wbr{}คำ\wbr{}ว่า \cmd{root} โดย\wbr{}จัด\wbr{}รูป\wbr{}แบบ\wbr{}ใหม่\wbr{}ตาม\wbr{}ผล\wbr{}ที่\wbr{}แสดง\wbr{}ใน\wbr{}ตัว\wbr{}อย่าง.

\subsection{การ\wbr{}กระทำ\wbr{}ใน\wbr{}คำ\wbr{}สั่ง \cmd{awk}}
การ\wbr{}กระทำ (action) คือ\wbr{}การ\wbr{}ประมวล\wbr{}ผล\wbr{}ที่\wbr{}เกิด\wbr{}ขึ้น\wbr{}เมื่อ\wbr{}เจอ pattern ที่\wbr{}ต้องการ. จาก\wbr{}ตัว\wbr{}อย่าง\wbr{}ที่\wbr{}ผ่าน\wbr{}มา \cmd{print} เป็น\wbr{}การ\wbr{}กระทำ\wbr{}อย่าง\wbr{}หนึ่ง\wbr{}ที่\wbr{}ใช้\wbr{}แสดง\wbr{}ข้อ\wbr{}มูล\wbr{}ออก\wbr{}ทาง stdout. นอก\wbr{}จาก\wbr{}นี้\wbr{}แล้ว\wbr{}โปรแกรม \cmd{awk} ยัง\wbr{}รับ\wbr{}รู้\wbr{}คำ\wbr{}สั่ง\wbr{}อื่นๆ\wbr{}อีก\wbr{}ได้\wbr{}แก่.
\begin{itemize}
\item \emph{ตัว\wbr{}ปฏิบัติ\wbr{}การ (operator)}\myvocab{o}{operator}{\emph{ตัว\wbr{}ดำเ\wbr{}นิ\wbr{}การ} หรือ \emph{ตัว\wbr{}ปฏิบัติ\wbr{}การ}. คือ\wbr{}เครื่อง\wbr{}หมาย\wbr{}ที่\wbr{}มี\wbr{}ความ\wbr{}หมาย\wbr{}พิเศษ\wbr{}ใช้\wbr{}สำหรับ\wbr{}การ\wbr{}ประมวล\wbr{}ผล. เช่น \cmd{+} เป็น\wbr{}ตัว\wbr{}ปฏิบัติ\wbr{}การ\wbr{}ทาง\wbr{}คณิต\wbr{}ศาสตร์\wbr{}สำหรับ\wbr{}รวม\wbr{}ค่า\wbr{}ของ\wbr{}จำนวน\wbr{}สอง\wbr{}จำนวน. \cmd{\&\&} เป็น\wbr{}ตัว\wbr{}ปฏิบัติ\wbr{}การ\wbr{}ทาง\wbr{}ตรรกะ AND.} เช่น\wbr{}ตัว\wbr{}ปฏิบัติ\wbr{}การ\wbr{}เลข\wbr{}คณิต (\cmd{+}, \cmd{-}, \cmd{*}, \cmd{/}, \cmd{\%}), ตัว\wbr{}ปฏิบัติ\wbr{}การ\wbr{}ตรรกะ (\cmd{\&\&}, \cmd{||}) ฯลฯ.
\item ฟังก์ชัน\wbr{}คณิต\wbr{}ศาสตร์\wbr{}เช่น \cmd{cos}, \cmd{exp}, \cmd{log} ฯลฯ.
\item ฟังก์ชัน\wbr{}ประมวล\wbr{}ผล\wbr{}สาย\wbr{}อักษร\wbr{}เช่น \cmd{gsub}, \cmd{index}, \cmd{length}, \cmd{match} ฯลฯ.
\item ฟังก์ชัน\wbr{}ประกอบ\wbr{}ภาย\wbr{}ใน \cmd{awk} อื่นๆ\wbr{}เช่น \cmd{print}, \cmd{printf}, \cmd{system} ฯลฯ.
\end{itemize}
\begin{MyExample}[การ\wbr{}ใช้ \cmd{awk} หา\wbr{}ผล\wbr{}รวม\wbr{}ของ\wbr{}พื้น\wbr{}ที่\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี\wbr{}ที่\wbr{}ต้องการ.]
\begin{MyEx}
$ \cin{du -s /usr/X11R6 /usr/local |}
> \cin{awk '\{sum += $1\} END \{print "Total: " int(sum/1024) " KB"\}'}
Total: 246 KB
\end{MyEx}
\end{MyExample}
ตัว\wbr{}อย่าง\wbr{}ข้าง\wbr{}บน\wbr{}เป็น\wbr{}การ\wbr{}รวม\wbr{}ค่า\wbr{}จำนวนไบต์\wbr{}จาก\wbr{}คำ\wbr{}สั่ง \cmd{du} และ\wbr{}ใช้ \cmd{awk} เลือก\wbr{}เอา\wbr{}ตัว\wbr{}เลข\wbr{}จาก\wbr{}คอลัมน์\wbr{}แรก\wbr{}มา\wbr{}รวม\wbr{}กัน\wbr{}แล้\wbr{}วจะ\wbr{}แสดง\wbr{}ผล\wbr{}ให้\wbr{}ง่าย\wbr{}ขึ้น.

\medskip
ใน\wbr{}ที่\wbr{}ไม่\wbr{}สามารถ\wbr{}อธิบาย\wbr{}การ\wbr{}ใช้\wbr{}งาน \cmd{awk} ได้\wbr{}โดย\wbr{}ละเอียด\wbr{}เนื่อง\wbr{}จาก\wbr{}ความ\wbr{}ซับ\wbr{}ซ้อน\wbr{}ของ\wbr{}โปรแกรม\wbr{}ภาษา \cmd{awk}. สำหรับ\wbr{}ผู้\wbr{}ที่\wbr{}ต้องการ\wbr{}เรียน\wbr{}รู้\wbr{}การ\wbr{}ใช้\wbr{}โปรแกรม\wbr{}ภาษา \cmd{awk} อย่าง\wbr{}ละเอียด\wbr{}อาจ\wbr{}จะ\wbr{}เริ่ม\wbr{}จาก\wbr{}การ\wbr{}อ่าน manpage ของ\wbr{}คำ\wbr{}สั่ง \cmd{awk} เพื่อ\wbr{}ดู\wbr{}ราย\wbr{}ละเอียด\wbr{}เกี่ยว\wbr{}กับ\wbr{}ตัว\wbr{}เลือก, ตัวแปร, และ\wbr{}การ\wbr{}กระทำ\wbr{}ต่างๆ. หลัง\wbr{}จาก\wbr{}นั้น\wbr{}อาจ\wbr{}จะ\wbr{}หา\wbr{}ข้อ\wbr{}มูล\wbr{}ทาง\wbr{}อินเ\wbr{}ทอร์เน็ต\wbr{}หรือ\wbr{}หา\wbr{}หนังสือ\wbr{}ที่\wbr{}เกี่ยว\wbr{}กับ\wbr{}คำ\wbr{}สั่ง \cmd{awk} โดย\wbr{}ตรง\wbr{}ต่อ\wbr{}ไป \cite{sed}.



\section{คำ\wbr{}สั่ง\wbr{}อื่นๆ}
\subsection{การ\wbr{}บีบ\wbr{}อัด\wbr{}ไฟล์}
โปรแกรม\wbr{}คำ\wbr{}สั่ง\wbr{}สำหรับ\emph{บีบ\wbr{}อัด (compress)}\gindex{compress}\gindex{บีบ\wbr{}อัด} ไฟล์\wbr{}ใน\wbr{}ลิ\wbr{}นุกซ์\wbr{}มี\wbr{}หลาย\wbr{}ประเภท\wbr{}เช่น \cmd{compress}, \cmd{zip}, \cmd{gzip} และ \cmd{bzip2} เป็นต้น. โดย\wbr{}ปรกติ\wbr{}แล้ว\wbr{}ถ้า\wbr{}มี\wbr{}โปรแกรม\wbr{}บีบ\wbr{}อัด\wbr{}แล้ว\wbr{}ก็\wbr{}ต้อง\wbr{}มี\wbr{}โปรแกรม\wbr{}สำหรับ\emph{ขยาย (decompress)}\gindex{decompress}\gindex{ขยาย} ไฟล์\wbr{}ด้วย\wbr{}เป็น\wbr{}คู่\wbr{}กัน\wbr{}ไป\wbr{}เช่น \cmd{uncompress}, \cmd{unzip}, \cmd{gunzip} และ \cmd{bunzip2}. แต่\wbr{}ใน\wbr{}ความ\wbr{}เป็น\wbr{}จริง\wbr{}แล้ว\wbr{}โปรแกรม\wbr{}บีบ\wbr{}อัด\wbr{}มัก\wbr{}จะ\wbr{}มี\wbr{}ความ\wbr{}สามารถ\wbr{}ใน\wbr{}การ\wbr{}ขยาย\wbr{}ไฟล์\wbr{}ได้\wbr{}ใน\wbr{}ตัว\wbr{}เอง, ไม่\wbr{}จำ\wbr{}เป็น\wbr{}ต้อง\wbr{}มี\wbr{}โปรแกรม\wbr{}เฉพาะ\wbr{}สำหรับ\wbr{}การ\wbr{}ขยาย\wbr{}ไฟล์. ดัง\wbr{}นั้น\wbr{}จะ\wbr{}เห็น\wbr{}ว่า\wbr{}โปรแกรม\wbr{}ขยาย\wbr{}ไฟล์\wbr{}บาง\wbr{}อย่าง\wbr{}เช่น \cmd{gunzip} จะ\wbr{}เป็น soft link ไป\wbr{}หา\wbr{}โปรแกรม \cmd{gzip}, ไม่\wbr{}ได้\wbr{}เป็น\wbr{}โปรแกรม\wbr{}แยก\wbr{}ต่าง\wbr{}หาก.


คำ\wbr{}สั่ง\wbr{}บีบ\wbr{}อัด\wbr{}เหล่า\wbr{}นี้\wbr{}มี\wbr{}ส่วน\wbr{}ที่\wbr{}เหมือน\wbr{}กัน\wbr{}หลาย\wbr{}อย่าง\wbr{}ได้\wbr{}แก่
\begin{itemize}
\item รับ\wbr{}ข้อ\wbr{}มูล\wbr{}ได้\wbr{}จาก stdin หรือ\wbr{}ไฟล์. ถ้า\wbr{}ไม่\wbr{}มี\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}เป็น\wbr{}อาร์กิวเ\wbr{}มนต์\wbr{}ของ\wbr{}คำ\wbr{}สั่ง\wbr{}ก็\wbr{}จะ\wbr{}รับ\wbr{}ข้อ\wbr{}มูล\wbr{}จาก stdin.
\item ส่ง\wbr{}ข้อ\wbr{}มูล\wbr{}ที่\wbr{}บีบ\wbr{}อัด\wbr{}แล้ว\wbr{}ให้ stout หรือ\wbr{}บันทึก\wbr{}ลง\wbr{}ไฟล์.
\item มี\wbr{}ตัว\wbr{}เลือก\wbr{}ที่\wbr{}เหมือนๆ\wbr{}กัน. กล่าว\wbr{}คือ\wbr{}ถ้า\wbr{}จำ\wbr{}ตัว\wbr{}เลือก\wbr{}ของ\wbr{}โปรแกรม\wbr{}บีบ\wbr{}อัด\wbr{}อย่าง\wbr{}หนึ่ง\wbr{}ได้, ก็\wbr{}เอา\wbr{}ไป\wbr{}ใช้\wbr{}กับ\wbr{}โปรแกรม\wbr{}บีบ\wbr{}อัด\wbr{}อื่นๆ\wbr{}ได้\wbr{}ด้วย.
\end{itemize}
\begin{table}[tb]
\center
\caption{ตัว\wbr{}เลือก\wbr{}สำหรับ\wbr{}โปรแกรม\wbr{}บีบ\wbr{}อัด\wbr{}ข้อ\wbr{}มูล\wbr{}ทั่ว\wbr{}ไป.}\label{tab:compress_options}
\medskip
\begin{tabular}{lp{.7\textwidth}}
\toprule
\multicolumn{1}{c}{ตัว\wbr{}เลือก} & \multicolumn{1}{c}{ความ\wbr{}หมาย}\\
\midrule
\cmd{-c} & ส่ง\wbr{}ข้อ\wbr{}มูล\wbr{}ที่\wbr{}บีบ\wbr{}อัด\wbr{}แล้ว\wbr{}ออก\wbr{}ทาง stdout แทน\wbr{}ที่\wbr{}จะ\wbr{}บันทึก\wbr{}ลง\wbr{}ไฟล์.\\
\cmd{-d} & ขยาย\wbr{}ไฟล์. ถ้า\wbr{}ตัว\wbr{}เลือก\wbr{}นี้\wbr{}ใช้\wbr{}ร่วม\wbr{}กับ\wbr{}ตัว\wbr{}เลือก \cmd{-c} ก็\wbr{}จะ\wbr{}แสดง\wbr{}ข้อ\wbr{}มูล\wbr{}ที่\wbr{}ขยาย\wbr{}แล้ว\wbr{}ออก\wbr{}ทาง stdout.\\
\cmd{-t} & ทด\wbr{}สอบ\wbr{}ไฟล์\wbr{}ที่\wbr{}บีบ\wbr{}อัด\wbr{}แล้ว\wbr{}ว่า\wbr{}ถูก\wbr{}ต้อง\wbr{}หรือ\wbr{}ไม่.\\
\cmd{-v} & ย่อ\wbr{}มา\wbr{}จาก verbose. ใช้\wbr{}แสดง\wbr{}สถานะ\wbr{}การ\wbr{}ทำ\wbr{}งาน. โดย\wbr{}ปรกติ\wbr{}จะ\wbr{}บอก\wbr{}สัด\wbr{}ส่วน\wbr{}ของ\wbr{}ข้อ\wbr{}มูล\wbr{}ที่\wbr{}บีบ\wbr{}อัด\wbr{}แล้ว\wbr{}เทียบ\wbr{}กับ\wbr{}ข้อ\wbr{}มูล\wbr{}เดิม.\\
\bottomrule
\end{tabular}
\end{table}


\subsubsection{\cmd{compress}}
โปรแกรม\wbr{}คำ\wbr{}สั่ง \cmd{compress} เป็น\wbr{}โปรแกรม\wbr{}บีบ\wbr{}อัด\wbr{}เก่า\wbr{}แก่\wbr{}ที่\wbr{}มา\wbr{}จาก\wbr{}ยู\wbr{}นิกซ์\wbr{}ซึ่ง\wbr{}ใน\wbr{}ปัจจุบัน\wbr{}ไม่\wbr{}ค่อย\wbr{}ใช้\wbr{}กัน\wbr{}แล้ว. ถ้า\wbr{}ไม่\wbr{}มี\wbr{}อาร์กิวเ\wbr{}มนต์\wbr{}เป็น\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}ก็\wbr{}จะ\wbr{}รับ\wbr{}ข้อ\wbr{}มูล\wbr{}จาก stdin.
\begin{MyExample}[การ\wbr{}ใช้ \cmd{compress} บีบ\wbr{}อัด\wbr{}ข้อ\wbr{}มูล.]
\begin{MyEx}
$ \cin{ls -l big_foo}
-rw-r--r--    1 poonlap  users     1000000 Aug 11 22:39 big_foo
$ \cin{compress big_foo}
big_foo:  -- replaced with big_foo.Z Compression: 99.81%
\end{MyEx}
\end{MyExample}
ใน\wbr{}ตัว\wbr{}อย่าง\wbr{}มี\wbr{}การ\wbr{}ใช้\wbr{}ตัว\wbr{}เลือก \cmd{-v} เพื่อ\wbr{}ให้\wbr{}แสดง\wbr{}สถานะ\wbr{}การ\wbr{}ทำ\wbr{}งาน\wbr{}ของ\wbr{}คำ\wbr{}สั่ง. ใน\wbr{}กรณี\wbr{}นี้\wbr{}จะ\wbr{}แสดง\wbr{}สัด\wbr{}ส่วน\wbr{}ที่\wbr{}โปรแกรม\wbr{}สามารถ\wbr{}บีบ\wbr{}อัด\wbr{}ได้. ถ้า\wbr{}เป็น\wbr{}ไฟล์\wbr{}ที่\wbr{}ข้อ\wbr{}มูล\wbr{}สามารถ\wbr{}บีบ\wbr{}อัด\wbr{}ได้\wbr{}ก็\wbr{}จะ\wbr{}สร้าง\wbr{}ไฟล์\wbr{}ชื่อ\wbr{}เดียว\wbr{}กัน\wbr{}โดย\wbr{}มี\wbr{}ส่วน\wbr{}ขยาย\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}เป็น \cmd{.Z}\mymemo{ถ้า\wbr{}ผู้\wbr{}อ่าน\wbr{}เคย\wbr{}ดาว์น\wbr{}โหล\wbr{}ดร\wbr{}หัส\wbr{}โปรแกรม\wbr{}เก่าๆ\wbr{}ที่\wbr{}มี\wbr{}ส่วน\wbr{}ขยาย\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}เป็น \cmd{.Z} ก็\wbr{}จะ\wbr{}รู้\wbr{}ว่า\wbr{}ใช้ \cmd{compress} ใน\wbr{}การ\wbr{}บีบ\wbr{}อัด.}.

ตัว\wbr{}เลือก \cmd{-v} เป็น\wbr{}ตัว\wbr{}เลือก\wbr{}ที่\wbr{}สามารถ\wbr{}ใช้\wbr{}ได้\wbr{}กับ\wbr{}โปรแกรม\wbr{}บีบ\wbr{}อัด\wbr{}อื่น\wbr{}ได้\wbr{}ด้วย\wbr{}และ\wbr{}มี\wbr{}ประโยชน์\wbr{}ช่วย\wbr{}ให้\wbr{}ผู้\wbr{}ใช้\wbr{}รู้\wbr{}ว่า\wbr{}ข้อ\wbr{}มูล\wbr{}นั้น\wbr{}บีบ\wbr{}อัด\wbr{}ไป\wbr{}ได้\wbr{}เท่า\wbr{}ไร. ถ้า\wbr{}ต้องการ\wbr{}ขยาย\wbr{}ไฟล์\wbr{}ที่\wbr{}บีบ\wbr{}อัด\wbr{}ออก\wbr{}ให้\wbr{}ใช้\wbr{}ตัว\wbr{}เลือก \cmd{-d}.
\begin{MyExample}[ขยาย\wbr{}ไฟล์\wbr{}ที่\wbr{}ถูก\wbr{}บีบ\wbr{}อัด\wbr{}ออก\wbr{}ด้วย \cmd{compress}.]
\begin{MyEx}
$ \cin{compress -dv big_foo.Z}
big_foo.Z:  -- replaced with big_foo
\end{MyEx}
\end{MyExample}%$
จะ\wbr{}เห็น\wbr{}ว่า\wbr{}คำ\wbr{}สั่ง \cmd{compress} จะ\wbr{}ขยาย\wbr{}ไฟล์\wbr{}แล้ว\wbr{}เก็บ\wbr{}ข้อ\wbr{}มูล\wbr{}ใน\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}เดียว\wbr{}กัน\wbr{}แต่\wbr{}เอา\wbr{}ส่วน\wbr{}ขยาย\wbr{}ชื่อ\wbr{}ไฟล์ \cmd{.Z} ออก. ส่วน\wbr{}ไฟล์\wbr{}ที่\wbr{}ถูก\wbr{}บีบ\wbr{}อัด\wbr{}ก็\wbr{}จะ\wbr{}หาย\wbr{}ไป. ถ้า\wbr{}เรา\wbr{}ต้องการ\wbr{}ขยาย\wbr{}ไฟล์\wbr{}แล้ว\wbr{}เก็บ\wbr{}เป็น\wbr{}ไฟล์\wbr{}ชื่อ\wbr{}อื่น\wbr{}และ\wbr{}ไม่\wbr{}ต้องการ\wbr{}ให้\wbr{}ไฟล์\wbr{}ที่\wbr{}ถูก\wbr{}บีบ\wbr{}อัด\wbr{}แล้ว\wbr{}หาย\wbr{}ไป, ให้\wbr{}ใช้\wbr{}กล\wbr{}วิธี\wbr{}รี\wbr{}ไดเ\wbr{}รก.
\begin{MyExample}[ขยาย\wbr{}ไฟล์\wbr{}ที่\wbr{}ถูก\wbr{}บีบ\wbr{}อัด\wbr{}และ\wbr{}เก็บ\wbr{}ใน\wbr{}ไฟล์\wbr{}ด้วย\wbr{}การ\wbr{}รี\wbr{}ไดเ\wbr{}รก.]
\begin{MyEx}
$ \cin{compress -dc big_foo.Z > big_foo}
$ \cin{ls -l big_foo.Z big_foo}n
-rw-r--r--    1 poonlap  users     1000000 Aug 11 23:48 big_foo
-rw-r--r--    1 poonlap  users        1820 Aug 11 22:39 big_foo.Z
\end{MyEx}
\end{MyExample}

\subsubsection{\cmd{gzip}}
โปรแกรม\wbr{}คำ\wbr{}สั่ง \cmd{gzip}\cite{gzip} ย่อ\wbr{}มาก\wbr{}จา GNU zip ซึ่ง\wbr{}เป็น\wbr{}โปรแกรม\wbr{}บีบ\wbr{}อัด\wbr{}ที่\wbr{}พัฒนา\wbr{}ใน\wbr{}โครง\wbr{}การ GNU, Free Software Foundation เพื่อ\wbr{}มา\wbr{}แทน\wbr{}ที่\wbr{}โปรแกรม \cmd{compress}. คำ\wbr{}สั่ง \cmd{gzip} เป็น\wbr{}ที่\wbr{}นิยม\wbr{}กว้าง\wbr{}ขวาง\wbr{}สำหรับ\wbr{}การ\wbr{}บีบ\wbr{}อัด\wbr{}ข้อ\wbr{}มูล\wbr{}พอๆ\wbr{}กับ\wbr{}คำ\wbr{}สั่ง \cmd{bzip2}. ไฟล์\wbr{}ที่\wbr{}บีบ\wbr{}อัด\wbr{}ด้วย\wbr{}คำ\wbr{}สั่ง \cmd{gzip} มัก\wbr{}จะ\wbr{}มี\wbr{}ส่วน\wbr{}ขยาย\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}เป็น \cmd{.gz}.

การ\wbr{}ใช้\wbr{}งาน\wbr{}ของ\wbr{}คำ\wbr{}สั่ง \cmd{gzip}\cindex{gzip}\refcmd{gzip} โดย\wbr{}พื้น\wbr{}ฐาน\wbr{}จะ\wbr{}เหมือน\wbr{}กับ\wbr{}คำ\wbr{}สั่ง \cmd{compress} ที่\wbr{}ได้\wbr{}แนะ\wbr{}นำ\wbr{}ไป\wbr{}แล้ว. เมื่อ\wbr{}ให้\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}เป็น\wbr{}อาร์กิวเ\wbr{}มนต์\wbr{}ของ\wbr{}คำ\wbr{}สั่ง\wbr{}ก็\wbr{}จะ\wbr{}บีบ\wbr{}อัด\wbr{}ไฟล์\wbr{}นั้น\wbr{}และ\wbr{}เพิ่ม\wbr{}ส่วน\wbr{}ขยาย\wbr{}ชื่อ\wbr{}ไฟล์ \cmd{.gz}. การ\wbr{}ขยาย\wbr{}ไฟล์\wbr{}ที่\wbr{}ถูก\wbr{}บีบ\wbr{}อัด\wbr{}ก็\wbr{}ทำ\wbr{}ได้\wbr{}โดย\wbr{}ใช้\wbr{}ตัว\wbr{}เลือก \cmd{-d} หรือ\wbr{}คำ\wbr{}สั่ง \cmd{gunzip}. ถ้า\wbr{}ต้องการ\wbr{}รับ\wbr{}ข้อ\wbr{}มูล\wbr{}จาก stdin ให้\wbr{}ใช้\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}เป็น\wbr{}เครื่อง\wbr{}หมาย \cmd{-}.

ไฟล์\wbr{}หลาย\wbr{}ไฟล์\wbr{}ใน\wbr{}ระบบ\wbr{}ปฏิบัติ\wbr{}การ\wbr{}ลิ\wbr{}นุกซ์\wbr{}มัน\wbr{}จะ\wbr{}บีบ\wbr{}อัด\wbr{}ด้วย \cmd{gzip} เพื่อ\wbr{}ประหยัด\wbr{}พื้น\wbr{}ที่\wbr{}ฮาร์ดดิสก์\wbr{}เช่น ไฟล์\wbr{}ของ\wbr{}คู่\wbr{}มือ\wbr{}ใช้\wbr{}งาน\wbr{}ที่\wbr{}อยู่\wbr{}ใต้\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี \cmd{/usr/share/man}, ไฟล์\wbr{}ข้อ\wbr{}มูล\wbr{}ของ\wbr{}ชุด\wbr{}อักขระ\wbr{}ต่างๆ\wbr{}ที่\wbr{}อยู่\wbr{}ใต้\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี \cmd{/usr/share/i18n/charmaps} เป็นต้น. ไฟล์\wbr{}เหล่า\wbr{}นี้\wbr{}มัก\wbr{}จะ\wbr{}เป็น\wbr{}ไฟล์เท็กซ์. ถ้า\wbr{}ต้องการ\wbr{}ดู\wbr{}เนื้อ\wbr{}หา\wbr{}ของ\wbr{}ไฟล์\wbr{}เหล่า\wbr{}นี้\wbr{}เรา\wbr{}สามารถ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{zcat}\cindex{zcat} ดู\wbr{}เนื้อ\wbr{}หา\wbr{}ที่\wbr{}ขยาย\wbr{}ได้\wbr{}ทัน\wbr{}ที.
\begin{MyExample}[การ\wbr{}ใช้ \cmd{zcat} ดู\wbr{}ข้อ\wbr{}มูล\wbr{}จาก\wbr{}ไฟล์\wbr{}ที่\wbr{}บีบ\wbr{}อัด\wbr{}ไว้.]
\begin{MyEx}
$ \cin{zcat /usr/share/i18n/charmaps/UTF-8.gz}
<code_set_name> UTF-8
<comment_char> %
<escape_char> /
<mb_cur_min> 1
<mb_cur_max> 6

% alias ISO-10646/UTF-8
CHARMAP
<U0000>     /x00         NULL
<U0001>     /x01         START OF HEADING
...
\end{MyEx}
\end{MyExample}%$

เนื่อง\wbr{}จาก \cmd{gzip} มี\wbr{}จุด\wbr{}ประสงค์\wbr{}ที่\wbr{}สร้าง\wbr{}ขึ้น\wbr{}มา\wbr{}เพื่อ\wbr{}แทน \cmd{compress}, ดัง\wbr{}นั้น\wbr{}คำ\wbr{}สั่ง \cmd{gzip} ยัง\wbr{}สามารถ\wbr{}ขยาย\wbr{}ไฟล์\wbr{}ที่\wbr{}บีบ\wbr{}อัด\wbr{}ด้วย\wbr{}คำ\wbr{}สั่ง \cmd{compress} ได้\wbr{}ด้วย\mymemo{ขยาย\wbr{}ไฟล์\wbr{}ที่\wbr{}บีบ\wbr{}อัด\wbr{}ด้วย \cmd{zip} ก็\wbr{}ได้.}.

ตัว\wbr{}เลือก\wbr{}ที่\wbr{}น่า\wbr{}สน\wbr{}ใจ\wbr{}ของ\wbr{}คำ\wbr{}สั่ง \cmd{gzip} ได้\wbr{}แก่ \cmd{--fast} ซึ่ง\wbr{}เขียน\wbr{}แบบ\wbr{}ย่อ\wbr{}เป็น \cmd{-1}, และ\wbr{}ตัว\wbr{}เลือก \cmd{--best} ซึ่ง\wbr{}เขียน\wbr{}แบบ\wbr{}ย่อ\wbr{}เป็น \cmd{-9}. ตัว\wbr{}เลือก \cmd{-1} หมาย\wbr{}ถึง\wbr{}ให้ \cmd{gzip} บีบ\wbr{}อัด\wbr{}ไฟล์\wbr{}ให้\wbr{}เร็ว\wbr{}ที่\wbr{}สุด, ความ\wbr{}บีบ\wbr{}อัด\wbr{}ของ\wbr{}ข้อ\wbr{}มูล\wbr{}ต่ำ. ส่วน \cmd{-9} หมาย\wbr{}ถึง\wbr{}ให้ \cmd{gzip} บีบ\wbr{}อัด\wbr{}ไฟล์\wbr{}ให้\wbr{}มี\wbr{}ความ\wbr{}บีบ\wbr{}อัด\wbr{}สูง\wbr{}เท่า\wbr{}ที่\wbr{}จะ\wbr{}เป็น\wbr{}ไป\wbr{}ได้, ทำ\wbr{}ให้\wbr{}ใช้\wbr{}การ\wbr{}ประมวล\wbr{}ผล\wbr{}ช้า. การ\wbr{}ทำ\wbr{}งาน\wbr{}โดย\wbr{}ปริยาย\wbr{}จะ\wbr{}ใช้\wbr{}ระดับ\wbr{}ความเร็ว\wbr{}เป็น \cmd{-6}.

\begin{MyExample}[เปอร์\wbr{}เซนต์\wbr{}ความ\wbr{}บีบ\wbr{}อัด\wbr{}ตาม\wbr{}ตัว\wbr{}เลือก\wbr{}ของ \cmd{gzip}.]
\begin{MyEx}
$ \cin{i=1}
> \cin{while [ $i -lt 10 ]} \mycomment{กระทำ\wbr{}จน\wbr{}กว่า\wbr{}ค่า i จะ\wbr{}น้อย\wbr{}กว่า 10}
> \cin{do}
> \cin{echo -n $i: compression ratio}
> \cin{zcat /usr/share/i18n/charmaps/UTF-8.gz | gzip -cv$i - > /dev/null}
> \cin{i=$(($i+1))} \mycomment{เพิ่ม\wbr{}ค่า i}
> \cin{done}
1: compression ratio 80.4%
2: compression ratio 80.5%
3: compression ratio 80.8%
4: compression ratio 81.6%
5: compression ratio 82.8%
6: compression ratio 82.9%
7: compression ratio 83.2%
8: compression ratio 83.2%
9: compression ratio 83.2% \mycomment{บีบ\wbr{}อัด\wbr{}ได้\wbr{}มาก\wbr{}ที่\wbr{}สุด}
\end{MyEx}
\end{MyExample}


\subsubsection{\cmd{bzip2}}
\cmd{bzip2}\cindex{bzip2}\refcmd{bzip2} เป็น\wbr{}โปรแกรม\wbr{}บีบ\wbr{}อัด\wbr{}ที่\wbr{}พัฒนา\wbr{}หลัง\wbr{}จาก \cmd{gzip}, เผย\wbr{}แพร่\wbr{}ได้\wbr{}อย่าง\wbr{}อิสระ, ไม่\wbr{}มี\wbr{}ปัญหา\wbr{}ละเมิด\wbr{}สิทธิ\wbr{}บัตร\wbr{}ที่\wbr{}เกี่ยว\wbr{}กับ\wbr{}วิธี\wbr{}การ\wbr{}บีบ\wbr{}อัด, และ\wbr{}สามารถ\wbr{}บีบ\wbr{}อัด\wbr{}ได้\wbr{}แน่น\wbr{}กว่า \cmd{gzip}. โดย\wbr{}ปรกติ\wbr{}จะ\wbr{}พยายาม\wbr{}บีบ\wbr{}อัด\wbr{}ให้\wbr{}ได้\wbr{}ไฟล์\wbr{}มี\wbr{}ขนาด\wbr{}ประมาณ 10 ถึง 15 เปอร์\wbr{}เซนต์\wbr{}ของ\wbr{}ไฟล์\wbr{}เดิม \cite{bzip2}. การ\wbr{}ใช้\wbr{}และ\wbr{}ตัว\wbr{}เลือก\wbr{}โดย\wbr{}ทั่ว\wbr{}ไป\wbr{}ก็\wbr{}เหมือน\wbr{}กับ\wbr{}คำ\wbr{}สั่ง \cmd{compress} และ \cmd{gzip} ที่\wbr{}แนะ\wbr{}นำ\wbr{}ไป\wbr{}แล้ว.

\subsubsection{\cmd{zip} และ \cmd{unzip}}
โปรแกรม \cmd{zip}\cindex{zip}\cite{zip}\refcmd{zip} และ \cmd{unzip} ที่\wbr{}ใช้\wbr{}ใน\wbr{}ลิ\wbr{}นุกซ์\wbr{}มา\wbr{}จาก\wbr{}ลิ\wbr{}นุกซ์\wbr{}เป็น\wbr{}การ\wbr{}โปรแกรม\wbr{}ที่\wbr{}สร้าง\wbr{}สำหรับ\wbr{}บีบ\wbr{}อัด\wbr{}ขยาย\wbr{}ไฟล์\wbr{}ให้\wbr{}เข้า\wbr{}กัน\wbr{}ได้\wbr{}กับ\wbr{}โปรแกรม zip/unzip โดย PKWARE\mymemo{PKWARE เป็น\wbr{}บริษัท\wbr{}ที่\wbr{}เชี่ยว\wbr{}ชาญ\wbr{}และ\wbr{}ผลิต\wbr{}ซอฟต์แวร์\wbr{}ที่\wbr{}เกี่ยว\wbr{}กับ\wbr{}การ\wbr{}บีบ\wbr{}อัด\wbr{}หรือ\wbr{}ขยาย\wbr{}ข้อ\wbr{}มูล.} ที่\wbr{}กัน\wbr{}ใน\wbr{}ระบบ\wbr{}ปฏิบัติ\wbr{}การ DOS หรือ\wbr{}วิน\wbr{}โดวส์. เนื่อง\wbr{}จาก\wbr{}โปรแกรม \cmd{zip} และ \cmd{unzip} ใน\wbr{}ลิ\wbr{}นุกซ์\wbr{}เป็น\wbr{}โปรแกรม\wbr{}ที่\wbr{}พัฒนา\wbr{}เอง\wbr{}ให้\wbr{}เข้า\wbr{}กัน\wbr{}ได้\wbr{}กัน\wbr{}โปรแกรม\wbr{}ที่\wbr{}มี\wbr{}อยู่\wbr{}แล้ว\wbr{}บน\wbr{}วิน\wbr{}โดวส์, ดัง\wbr{}นั้น\wbr{}ความ\wbr{}สามารถ\wbr{}บาง\wbr{}อย่าง\wbr{}ที่\wbr{}โปรแกรม zip (pkzip) บน\wbr{}วิน\wbr{}โดวส์\wbr{}ทำ\wbr{}ได้, โปรแกรม \cmd{zip} และ \cmd{unzip} ใน\wbr{}ลิ\wbr{}นุกซ์\wbr{}อาจ\wbr{}จะ\wbr{}ทำ\wbr{}ไม่\wbr{}ได้. นอก\wbr{}จาก\wbr{}คำ\wbr{}สั่ง \cmd{zip} และ \cmd{unzip} แล้ว, ยัง\wbr{}มี\wbr{}โปรแกรม\wbr{}ที่\wbr{}เกี่ยว\wbr{}กับ \cmd{zip} ที่\wbr{}อยู่\wbr{}ใน\wbr{}ชุด\wbr{}เดียว\wbr{}กัน\wbr{}ด้วย\wbr{}ใน\wbr{}ตา\wbr{}ราง\wbr{}ที่ \ref{tab:zip}.

\begin{table}[!htb]
\center
\caption{ชุด\wbr{}โปรแกรม\wbr{}ที่\wbr{}เกี่ยว\wbr{}ข้อง\wbr{}กับ \cmd{zip}.}\label{tab:zip}
\medskip
\begin{tabular}{lp{.8\textwidth}}
\toprule
\multicolumn{1}{c}{โปรแกรม} & \multicolumn{1}{c}{คำ\wbr{}อธิบาย}\\
\midrule
\cmd{zip} & สำหรับ\wbr{}บีบ\wbr{}อัด\wbr{}ข้อ\wbr{}มูล.\\
\cmd{unzip} & สำหรับ\wbr{}ขยาย\wbr{}ข้อ\wbr{}มูล\wbr{}ที่\wbr{}บีบ\wbr{}อัด\wbr{}ด้วย \cmd{zip}.\\
\cmd{zipnote} & บันทึก\wbr{}หรือ\wbr{}ลบ\wbr{}หมาย\wbr{}เหตุ\wbr{}ใน\wbr{}ไฟล์ zip.\\
\cmd{zipsplit} & แบ่ง\wbr{}ไฟล์ zip เป็น\wbr{}ไฟล์\wbr{}ย่อยๆ.\\
\cmd{zipcloak} & เข้า\wbr{}รหัส\wbr{}หรือ\wbr{}ถอด\wbr{}รหัส\wbr{}สำหรับ\wbr{}ไฟล์ zip.\\
\bottomrule
\end{tabular}
\end{table}

โปรแกรม \cmd{zip} ไป\wbr{}โปรแกรม\wbr{}ที่\wbr{}สามารถ\wbr{}บีบ\wbr{}อัด\wbr{}ไฟล์\wbr{}หลายๆ\wbr{}ไฟล์\wbr{}แล้ว\wbr{}เก็บ\wbr{}เข้า\wbr{}ไว้\wbr{}ใน\wbr{}ไฟล์\wbr{}เดียว. เมื่อ\wbr{}ขยาย\wbr{}ไฟล์\wbr{}ที่\wbr{}เก็บ\wbr{}ไฟล์\wbr{}ไว้\wbr{}หลายๆ\wbr{}ไฟล์\wbr{}ออก\wbr{}มา\wbr{}ก็\wbr{}จะ\wbr{}คง\wbr{}สภาพ\wbr{}โครง\wbr{}สร้าง\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี\wbr{}ไว้\wbr{}ให้\wbr{}ด้วย. จุด\wbr{}นี้\wbr{}แตก\wbr{}ต่าง\wbr{}จาก\wbr{}โปรแกรม\wbr{}บีบ\wbr{}อัด\wbr{}พวก \cmd{compress} ซึ่ง\wbr{}ไม่\wbr{}สามารถ\wbr{}บีบ\wbr{}อัด\wbr{}รวม\wbr{}ไฟล์\wbr{}หลาย\wbr{}ไฟล์\wbr{}เข้า\wbr{}ใน\wbr{}ไฟล์\wbr{}เดียว.

การ\wbr{}ใช้ \cmd{zip} จะ\wbr{}มี\wbr{}ไวย\wbr{}กรณ์\wbr{}ที่\wbr{}ต่าง\wbr{}จะ \cmd{compress} ที่\wbr{}ต้อง\wbr{}ตั้ง\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}ที่\wbr{}จะ\wbr{}เป็น archive\myvocab{a}{archive}{การ\wbr{}เก็บ\wbr{}ไฟล์, เอก\wbr{}สาร\wbr{}สำคัญ\wbr{}ไว้. ถ้า\wbr{}เป็น\wbr{}คำ\wbr{}นาม\wbr{}จะ\wbr{}หมาย\wbr{}ถึง\wbr{}เอก\wbr{}สาร\wbr{}ที่\wbr{}เก็บ\wbr{}ไว้\wbr{}เช่น\wbr{}เอก\wbr{}สาร\wbr{}สำรอง\wbr{}หรือ\wbr{}เอก\wbr{}สาร\wbr{}สำคัญ.} ให้\wbr{}เป็น\wbr{}อาร์กิวเ\wbr{}มนต์\wbr{}แล้ว\wbr{}อาร์กิวเ\wbr{}มนต์\wbr{}ถัด\wbr{}ไป\wbr{}เป็น\wbr{}ราย\wbr{}การ\wbr{}ไฟล์\wbr{}ที่\wbr{}ต้องการ\wbr{}เก็บ\wbr{}ไว้\wbr{}ใน\wbr{}ไฟล์ zip (ไฟล์ archive) ที่\wbr{}ตั้ง\wbr{}ชื่อ\wbr{}ไว้.
\begin{MyExample}[การ\wbr{}ใช้ \cmd{zip}.]
\begin{MyEx}
$ \cin{zip -j foo /etc/passwd /etc/X11/XF86Config}
  adding: passwd (deflated 65%)
  adding: XF86Config (deflated 69%)
\end{MyEx}
\end{MyExample}%$
จาก\wbr{}ตัว\wbr{}อย่าง\wbr{}มี\wbr{}การ\wbr{}ใช้\wbr{}ตัว\wbr{}เลือก \cmd{-j} เพื่อ\wbr{}เก็บ\wbr{}เฉพาะ\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}อย่าง\wbr{}เดียว\wbr{}โดย\wbr{}ไม่\wbr{}เก็บ\wbr{}ส่วน\wbr{}ที่\wbr{}เป็น\wbr{}ชื่อ path เช่น\wbr{}ชื่อ\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี. หลัง\wbr{}จาก\wbr{}ที่\wbr{}คำ\wbr{}สั่ง \cmd{zip} ทำ\wbr{}งาน\wbr{}เรียบ\wbr{}ร้อย\wbr{}แล้\wbr{}วจะ\wbr{}สร้าง\wbr{}ไฟล์ \cmd{foo.zip} ไว้\wbr{}ใน\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี\wbr{}ที่\wbr{}ทำ\wbr{}งาน\wbr{}อยู่. ถ้า\wbr{}ขยาย\wbr{}ไฟล์\wbr{}ที่\wbr{}ถูก\wbr{}บีบ\wbr{}อัด\wbr{}นี้\wbr{}แล้ว\wbr{}ก็\wbr{}จะ\wbr{}ได้\wbr{}ไฟล์ \cmd{passwd} และ\wbr{}ไฟล์ \cmd{XF86Config} อยู่\wbr{}ใน\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี\wbr{}ที่\wbr{}ทำ\wbr{}การ\wbr{}ขยาย\wbr{}ไฟล์\wbr{}นั้น.

ถ้า\wbr{}ต้องการ\wbr{}จะ\wbr{}บีบ\wbr{}อัด\wbr{}และ\wbr{}เก็บ\wbr{}ไฟล์\wbr{}เข้า\wbr{}ใน\wbr{}ไฟล์ zip เพิ่ม\wbr{}เติม\wbr{}ก็\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง\wbr{}แบบ\wbr{}เดียว\wbr{}กัน. ตัว\wbr{}อย่าง\wbr{}ต่อ\wbr{}ไป\wbr{}นี้\wbr{}จะ\wbr{}ไม่\wbr{}ใช้\wbr{}ตัว\wbr{}เลือก \cmd{-j} ซึ่ง\wbr{}จะ\wbr{}เก็บ\wbr{}เอา\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}แบบ full path ไว้\wbr{}ใน\wbr{}ไฟล์ zip.

\begin{MyExample}[การ\wbr{}เพิ่ม\wbr{}ไฟล์\wbr{}เข้า\wbr{}ใน\wbr{}ไฟล์ zip.]
\begin{MyEx}
$ \cin{ zip foo /etc/group}
  adding: etc/group (deflated 47%)
\end{MyEx}
\end{MyExample}%$

ถ้า\wbr{}ต้องการ\wbr{}ดู\wbr{}ไฟล์\wbr{}ที่\wbr{}บีบ\wbr{}อัด\wbr{}อยู่\wbr{}ใน\wbr{}ไฟล์ zip, ให้\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง\wbr{}สั่ง \cmd{unzip}\cindex{unzip}\refcmd{unzip} กับ\wbr{}ตัว\wbr{}เลือก \cmd{-t}\mymemo{หรือ\wbr{}ใช้\wbr{}ตัว\wbr{}เลือก \cmd{-l} เพื่อ\wbr{}ที่\wbr{}จะ\wbr{}แสดง\wbr{}ราย\wbr{}การ\wbr{}ไฟล์\wbr{}อย่าง\wbr{}เดียว, ไม่\wbr{}ตรวจ\wbr{}สอบ\wbr{}ไฟล์.} เพื่อ\wbr{}ทด\wbr{}สอบ (test) ไฟล์ zip และ\wbr{}แสดง\wbr{}ราย\wbr{}การ\wbr{}ไฟล์\wbr{}ที่\wbr{}อยู่\wbr{}ใน\wbr{}ไฟล์ zip นั้น.
\begin{MyExample}[]
\begin{MyEx}
$ \cin{unzip -t foo.zip} \mycomment{จะ\wbr{}ไม่\wbr{}เขียน\wbr{}ส่วน\wbr{}ขยาย\wbr{}ชื่อ\wbr{}ไฟล์ .zip ก็\wbr{}ได้}
Archive:  foo.zip
    testing: passwd                   OK
    testing: XF86Config               OK
    testing: etc/group                OK
No errors detected in compressed data of foo.zip.
\end{MyEx}
\end{MyExample}%$
จะ\wbr{}เห็น\wbr{}ได้\wbr{}ว่า\wbr{}ถ้า\wbr{}ไม่\wbr{}ใช้\wbr{}ตัว\wbr{}เลือก \cmd{-j} ตอน\wbr{}ที่\wbr{}บีบ\wbr{}อัด\wbr{}ไฟล์, คำ\wbr{}สั่ง \cmd{zip} จะ\wbr{}เก็บ\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}แบบ\wbr{}ตาม\wbr{}ที่\wbr{}ระบุ\wbr{}โดย\wbr{}จะ\wbr{}ลบ\wbr{}เครื่อง\wbr{}หมาย slash (\cmd{/}) ถ้า\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}นั้น\wbr{}ขึ้น\wbr{}ต้น\wbr{}ด้วย\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี\wbr{}รูท. สำหรับ\wbr{}การ\wbr{}ขยาย\wbr{}ไฟล์ zip โดย\wbr{}ปรกติ\wbr{}จะ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{unzip} โดย\wbr{}ที่\wbr{}ไม่\wbr{}มี\wbr{}ตัว\wbr{}เลือก.

คำ\wbr{}สั่ง \cmd{zip} และ \cmd{unzip} ยัง\wbr{}มี\wbr{}ตัว\wbr{}เลือก\wbr{}อื่นๆ\wbr{}มาก\wbr{}มาย\wbr{}ซึ่ง\wbr{}ผู้\wbr{}อ่าน\wbr{}สามารถ\wbr{}อ่าน\wbr{}ราย\wbr{}ละเอียด\wbr{}ได้\wbr{}จาก\wbr{}คู่\wbr{}มือ\wbr{}การ\wbr{}ใช้\wbr{}งาน.


\subsection{การ\wbr{}ทำ\wbr{}สำรอง\wbr{}ไฟล์\wbr{}ทั้ง\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี}
คำ\wbr{}สั่ง\wbr{}บีบข\wbr{}อัด\wbr{}ข้อ\wbr{}มูล\wbr{}เช่น \cmd{compress}, \cmd{gzip} และ \cmd{bzip2} ไม่\wbr{}สามารถ\wbr{}รวม\wbr{}ไฟล์\wbr{}เป็น\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี\wbr{}ได้. การ\wbr{}ที่\wbr{}จะ\wbr{}บีบ\wbr{}อัด\wbr{}ไฟล์\wbr{}ทั้ง\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี\wbr{}แล้ว\wbr{}กระจาย\wbr{}ออก\wbr{}มา\wbr{}ให้\wbr{}เป็น\wbr{}โครง\wbr{}สร้าง\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี\wbr{}และ\wbr{}ไฟล์\wbr{}เหมือน\wbr{}เดิม\wbr{}ต้อง\wbr{}ใช้\wbr{}โปรแกรม\wbr{}อื่น\wbr{}ช่วย. และ\wbr{}โปรแกรม\wbr{}ที่\wbr{}นิยม\wbr{}ใช้\wbr{}ใน\wbr{}การ\wbr{}แบบ\wbr{}นี้\wbr{}ได้\wbr{}แก่ \cmd{tar}.

คำ\wbr{}สั่ง \cmd{tar}\cindex{tar}\refcmd{tar} ย่อ\wbr{}มา\wbr{}จาก\wbr{}คำ\wbr{}ว่า tape archive ซึ่ง\wbr{}เดิม\wbr{}ที\wbr{}ใช้\wbr{}สำหรับ\emph{สำรอง (backup)} ไฟล์\wbr{}บันทึก\wbr{}ลง\wbr{}ใน\wbr{}เทป. แต่\wbr{}คำ\wbr{}สั่ง \cmd{tar} ยัง\wbr{}สามารถ\wbr{}รวม\wbr{}ไฟล์\wbr{}ต่างๆ\wbr{}เก็บ\wbr{}ไว้\wbr{}เป็น\wbr{}ไฟล์\wbr{}เดียว\wbr{}ก็\wbr{}ได้. หลัง\wbr{}จาก\wbr{}นั้น\wbr{}ใช้ \cmd{gzip} หรือ \cmd{bzip2} บีบ\wbr{}อัด\wbr{}ต่อ\wbr{}เพื่อ\wbr{}ให้\wbr{}ขนาด\wbr{}เล็ก\wbr{}ลง.

คำ\wbr{}สั่ง \cmd{tar} เป็น\wbr{}คำ\wbr{}สั่ง\wbr{}สำหรับ\wbr{}สร้าง\wbr{}ไฟล์ archive (\cmd{.tar}) และ\wbr{}กระจาย\wbr{}ไฟล์\wbr{}ต่างๆ\wbr{}ที่\wbr{}อยู่\wbr{}ใน archive โดย\wbr{}จะ\wbr{}แยก\wbr{}หน้า\wbr{}ที่\wbr{}ตาม\wbr{}ตัว\wbr{}เลือก\wbr{}ที่\wbr{}ใช้.

\begin{table}[!htb]
\caption{ตัว\wbr{}เลือก\wbr{}ที่\wbr{}ใช้\wbr{}บ่อย\wbr{}ของ\wbr{}คำ\wbr{}สั่ง \cmd{tar}.}\label{tab:tar}
\medskip
\begin{tabular}{lp{.7\textwidth}}
\toprule
\multicolumn{1}{c}{ตัว\wbr{}เลือก} & \multicolumn{1}{c}{ความ\wbr{}หมาย}\\
\midrule
\cmd{-c} & สร้าง\wbr{}ไฟล์ archive.\\
\cmd{-x} & กระจาย\wbr{}ไฟล์ archive.\\
\cmd{-f \textit{filename.tar}} & ระบุ\wbr{}ชื่อ\wbr{}ไฟล์ archive.\\
\cmd{-r} & เพิ่ม\wbr{}ไฟล์\wbr{}เข้า\wbr{}ไป\wbr{}ใน\wbr{}ไฟล์ archive ที่\wbr{}มี\wbr{}อยู่\wbr{}แล้ว.\\
\cmd{-t} & ทด\wbr{}สอบ\wbr{}และ\wbr{}แสดง\wbr{}ราย\wbr{}การ\wbr{}ไฟล์\wbr{}ที่\wbr{}อยู่\wbr{}ใน\wbr{}ไฟล์ archive.\\
\cmd{-v} & แสดง\wbr{}สถานะ\wbr{}การ\wbr{}ทำ\wbr{}งาน.\\
\cmd{-z} & บีบ\wbr{}อัด\wbr{}หรือ\wbr{}คลาย\wbr{}ไฟล์ archive ด้วย \cmd{gzip}.\\
\cmd{-j} & บีบ\wbr{}อัด\wbr{}หรือ\wbr{}คลาย\wbr{}ไฟล์ archive ด้วย \cmd{bzip2}.\\
\cmd{-p} & รักษา\wbr{}สิทธิ์\wbr{}การ\wbr{}ใช้\wbr{}ไฟล์\wbr{}ที่\wbr{}ทำ\wbr{}การ archive.\\
\cmd{-O} & กระจาย\wbr{}ไฟล์\wbr{}ที่\wbr{}อยู่\wbr{}ใน archive ออก\wbr{}ทาง stdout.\\
\bottomrule
\end{tabular}
\end{table}

ต่อ\wbr{}ไป\wbr{}นี้\wbr{}เป็น\wbr{}ตัว\wbr{}อย่าง\wbr{}การ\wbr{}สร้าง\wbr{}ไฟล์ archive ของ\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี\wbr{}ชื่อ \cmd{bar} และ\wbr{}ไฟล์\wbr{}ต่างๆ\wbr{}ที่\wbr{}อยู่\wbr{}ใน\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี.
\begin{MyExample}[การ\wbr{}สร้าง\wbr{}ไฟล์\wbr{}สำรอง\wbr{}ข้อ\wbr{}มูล\wbr{}ด้วย \cmd{tar}.]
\begin{MyEx}
$ \cin{tar -czvf bar.tar.gz bar} \mycomment{จะ\wbr{}ระบุ\wbr{}ตัว\wbr{}เลือก\wbr{}เป็น \cmd{czvf} ก็\wbr{}ได้}
bar/
bar/foo1
bar/foo2
bar/foo3/
bar/foo3/foo4
\end{MyEx}
\end{MyExample}%$
ผู้\wbr{}ใช้\wbr{}ต้อง\wbr{}เขียน\wbr{}ส่วน\wbr{}ขยาย\wbr{}ชื่อ\wbr{}ไฟล์ \cmd{.tar.gz} เอง\wbr{}ซึ่ง\wbr{}จะ\wbr{}ไม่\wbr{}เหมือน\wbr{}คำ\wbr{}สั่ง \cmd{zip} ที่\wbr{}จะ\wbr{}เติม\wbr{}ส่วน\wbr{}ขยาย\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}ให้. ถ้า\wbr{}ต้องการ\wbr{}ส่ง\wbr{}ข้อ\wbr{}มูล\wbr{}ออก\wbr{}ทาง stdout, ให้\wbr{}เปลี่ยน\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}เป็น \cmd{-}. จาก\wbr{}ตัว\wbr{}อย่าง\wbr{}มี\wbr{}การ\wbr{}บีบ\wbr{}อัด\wbr{}ด้วย \cmd{gzip} จึง\wbr{}เขียน\wbr{}ส่วน\wbr{}ขยาย\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}เป็น \cmd{.tar.gz}\mymemo{บ้าง\wbr{}ก็\wbr{}เขียน \cmd{.tar.gz} เป็น \cmd{.tgz} แล้ว\wbr{}แต่\wbr{}บุคคล.}. ถ้า\wbr{}ใช้\wbr{}ตัว\wbr{}เลือก \cmd{-j} ก็\wbr{}อาจ\wbr{}ให้\wbr{}ใช้\wbr{}ส่วน\wbr{}ขยาย\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}เป็น \cmd{bz2} เพื่อ\wbr{}ความ\wbr{}ชัดเจน.

เมื่อ\wbr{}สร้าง\wbr{}ไฟล์ archive เรียบ\wbr{}ร้อย\wbr{}แล้ว\wbr{}สามารถ\wbr{}ตรวจ\wbr{}สอบ\wbr{}ไฟล์\wbr{}ที่\wbr{}สร้าง\wbr{}ได้\wbr{}ด้วย\wbr{}ตัว\wbr{}เลือก \cmd{-t}.
\begin{MyExample}[ตรวจ\wbr{}สอบ\wbr{}ไฟล์ archive.]
\begin{MyEx}
$ \cin{tar tzvf bar.tar.gz} \mycomment{ต่อ\wbr{}ไป\wbr{}นี้\wbr{}จะ\wbr{}ไม่\wbr{}พิมพ์\wbr{}เครื่อง\wbr{}หมาย \cmd{-} เวลา\wbr{}ใช้\wbr{}ตัว\wbr{}เลือก}
drwxr-xr-x poonlap/users     0 2004-08-15 19:47:53 bar/
-rw-r--r-- poonlap/users     0 2004-08-15 19:47:49 bar/foo1
-rw-r--r-- poonlap/users     0 2004-08-15 19:47:49 bar/foo2
drwxr-xr-x poonlap/users     0 2004-08-15 19:48:00 bar/foo3/
-rw-r--r-- poonlap/users     0 2004-08-15 19:48:00 bar/foo3/foo4
\end{MyEx}
\end{MyExample}%$
การ\wbr{}ใช้\wbr{}ตัว\wbr{}เลือก \cmd{-t} นอก\wbr{}จาก\wbr{}จะ\wbr{}เป็น\wbr{}การ\wbr{}ทด\wbr{}สอบ\wbr{}ว่า\wbr{}ไฟล์ archive ที่\wbr{}สร้าง\wbr{}ขึ้น\wbr{}มี\wbr{}ข้อ\wbr{}ผิด\wbr{}พลาด\wbr{}หรือ\wbr{}ไม่\wbr{}แล้ว\wbr{}ยัง\wbr{}สามารถ\wbr{}ดู\wbr{}ราย\wbr{}การ\wbr{}ไฟล์\wbr{}ที่\wbr{}อยู่\wbr{}ใน archive ได้\wbr{}ด้วย. ไฟล์\wbr{}ต้น\wbr{}ฉบับ\wbr{}หรือ\wbr{}โปรแกรม\wbr{}บาง\wbr{}อย่าง\wbr{}เผย\wbr{}แพร่\wbr{}ใน\wbr{}รูป\wbr{}ของ\wbr{}ไฟล์ archive, ดัง\wbr{}นั้น\wbr{}ก่อน\wbr{}ที่\wbr{}จะ\wbr{}กระจาย\wbr{}ไฟล์\wbr{}ควร\wbr{}จะ\wbr{}ตรวจ\wbr{}สอบ\wbr{}และ\wbr{}ดู\wbr{}ราย\wbr{}การ\wbr{}ไฟล์\wbr{}ก่อน\wbr{}ว่า\wbr{}ข้าง\wbr{}ใน\wbr{}ว่า\wbr{}มี\wbr{}การ\wbr{}วาง\wbr{}โครง\wbr{}สร้าง\wbr{}ไฟล์\wbr{}อย่าง\wbr{}ไร, มี\wbr{}ความ\wbr{}ผิด\wbr{}พลาด\wbr{}หรือ\wbr{}ไม่. เช่น\wbr{}ถ้า\wbr{}เรา\wbr{}รู้\wbr{}ว่า\wbr{}ใน\wbr{}ไฟล์ archive ไม่\wbr{}มี\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี\wbr{}ย่อย, เวลา\wbr{}กระจาย\wbr{}ไฟล์\wbr{}ออก\wbr{}มา\wbr{}ก็\wbr{}จะ\wbr{}สร้าง\wbr{}ไฟล์\wbr{}ที่\wbr{}กระจาย\wbr{}มา\wbr{}อยู่\wbr{}ใน\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี\wbr{}ที่\wbr{}ทำ\wbr{}งาน\wbr{}อยู่\wbr{}ซึ่ง\wbr{}ใน\wbr{}บาง\wbr{}ครั้ง\wbr{}ไม่\wbr{}เป็น\wbr{}ที่\wbr{}ต้องการ. ใน\wbr{}กรณี\wbr{}นี้\wbr{}เรา\wbr{}ก็\wbr{}สามารถ\wbr{}สร้าง\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี\wbr{}แล้ว\wbr{}ไป\wbr{}กระจาย\wbr{}ไฟล์ archive ไว้\wbr{}ใน\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี\wbr{}ที่\wbr{}เตรียม\wbr{}ไว้.

สำหรับ\wbr{}การ\wbr{}กระจาย\wbr{}ไฟล์ archive ให้\wbr{}เปลี่ยน\wbr{}ตัว\wbr{}เลือก\wbr{}จาก \cmd{-c} ให้\wbr{}เป็น \cmd{x} ซึ่ง\wbr{}จะ\wbr{}หมาย\wbr{}ถึง\wbr{}การ\wbr{}กระจาย\wbr{}เอา\wbr{}ไฟล์\wbr{}ทุก\wbr{}ไฟล์\wbr{}ออก\wbr{}มา\wbr{}จาก\wbr{}ไฟล์ archive. ใน\wbr{}กรณี\wbr{}ที่\wbr{}ต้องการ\wbr{}เลือก\wbr{}เฉพาะ\wbr{}ไฟล์\wbr{}ที่\wbr{}ต้องการ\wbr{}ออก\wbr{}มา\wbr{}จาก\wbr{}ไฟล์ archive เท่า\wbr{}นั้น\wbr{}ให้\wbr{}ระบุ\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}ที่\wbr{}ต้องการ\wbr{}เป็น\wbr{}อาร์กิวเ\wbr{}มนต์\wbr{}ต่อ\wbr{}ท้าย\wbr{}ชื่อ\wbr{}ไฟล์ archive. การ\wbr{}สำรวจ\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}ที่\wbr{}อยู่\wbr{}ใน archive ให้\wbr{}ใช้\wbr{}ตัว\wbr{}เลือก \cmd{-t} ที่\wbr{}แนะ\wbr{}นำ\wbr{}ไป\wbr{}แล้ว.

ตัว\wbr{}อย่าง\wbr{}เช่น\wbr{}ถ้า\wbr{}ต้องการ\wbr{}เอา\wbr{}ไฟล์ \cmd{bar/foo1} และ\wbr{}ไฟล์ \cmd{bar/foo3/foo4} ออก\wbr{}มา\wbr{}จาก\wbr{}ไฟล์ \cmd{bar.tar.gz} สามารถ\wbr{}ทำ\wbr{}ได้\wbr{}ตาม\wbr{}ตัว\wbr{}อย่าง\wbr{}ต่อ\wbr{}ไป\wbr{}นี้.
\begin{MyExample}[กระจาย\wbr{}ไฟล์\wbr{}ที่\wbr{}เลือก\wbr{}ออก\wbr{}จาก archive.]
\begin{MyEx}
$ \cin{tar xzvf bar.tar.gz bar/foo1  bar/foo3/foo4}
bar/foo1
bar/foo3/foo4
\end{MyEx}
\end{MyExample}%$

\subsection{แปลงไบ\wbr{}นารี\wbr{}ให้\wbr{}เป็นเท็กซ์}
ใน\wbr{}สมัย\wbr{}ที่\wbr{}อีเ\wbr{}มล\wbr{}เริ่ม\wbr{}ใช้\wbr{}ใหม่ๆ, การ\wbr{}ส่ง\wbr{}ไฟล์ไบ\wbr{}นารี\wbr{}เช่น\wbr{}รูป\wbr{}ภาพ\wbr{}ไม่\wbr{}สามารถ\wbr{}ทำ\wbr{}ได้\wbr{}ง่ายๆ\wbr{}เหมือน\wbr{}ปัจจุบัน\wbr{}เพราะ\wbr{}ตอน\wbr{}นั้น\wbr{}ยัง\wbr{}ไม่\wbr{}มี\wbr{}มาตร\wbr{}ฐาน\wbr{}แน่\wbr{}นอน\wbr{}รอง\wbr{}รับ, และ\wbr{}ข้อ\wbr{}มูล\wbr{}ที่\wbr{}ส่ง\wbr{}ผ่านเ\wbr{}มล\wbr{}นั้น\wbr{}จะ\wbr{}เป็น\wbr{}อักขระ ASCII คือ\wbr{}ข้อ\wbr{}มูล\wbr{}แบบ 7 บิต\wbr{}เท่า\wbr{}นั้น \cite{smtp}. วิธี\wbr{}ที่\wbr{}นิยม\wbr{}ใช้\wbr{}กัน\wbr{}ใน\wbr{}ตอน\wbr{}นั้น\wbr{}คือ\wbr{}แปลง\wbr{}ข้อ\wbr{}มูลไบ\wbr{}นารี\wbr{}ให้\wbr{}เป็น\wbr{}อักขระ ASCII ทั้ง\wbr{}หมด, แล้ว\wbr{}ส่ง\wbr{}ข้อ\wbr{}มูล\wbr{}นั้น\wbr{}ทางเ\wbr{}มล. การ\wbr{}แปลง\wbr{}ข้อ\wbr{}มูลไบ\wbr{}นารี\wbr{}เป็น\wbr{}ข้อ\wbr{}มูลเท็กซ์ ASCII นี้\wbr{}จะ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{uuendcode}\cindex{uuencode}\refcmd{uuencode}. ใน\wbr{}ทาง\wbr{}กลับ\wbr{}กัน, การ\wbr{}แปลง\wbr{}ข้อ\wbr{}มูลเท็กซ์ ASCII กลับ\wbr{}ให้\wbr{}เป็น\wbr{}ข้อ\wbr{}มูลไบ\wbr{}นารี\wbr{}จะ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{uudecode}\cindex{uudecode}.

\begin{MyExample}[แปลง\wbr{}ข้อ\wbr{}มูลไบ\wbr{}นารี\wbr{}ให้\wbr{}เป็น\wbr{}ข้อ\wbr{}มูลเท็กซ์ ASCII.]
\begin{MyEx}
$ \cin{uuencode -m image.png output_image.png > image.png.txt}
$ \cin{cat image.png.txt}
begin-base64 644 output_image.png
iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/
AP+gvaeTAAAA/0lEQVR42p2RvUrDUBSAv0q7dRXRB3AQBXFzU9AtTn0KR9HB
wc21PkoH8QHM6lKKQiAV+wBC+iem5p5zEgeT0Ejj4IXDhcP3cf7gP293bzsA
sqW4rmMb+Z91724ACMMRr8M3fP+pAu4f7DDoB53mcnI8fWd9o83m1iHe2WlF
CMMRg37Qqwgvz0Me7v0/2y9bKhKXV+d43slK+PioQ1nh0e/hxGGqzD/mqCgi
iqggiTCZzgBoAmuFFMefqP6AKoqoYmI4ERKXlEK7EBZxjKjlsGGmqBgigjgp
hRZAFEWMJzM0F9QU1RRTxdKURfxVztICLn4dri5uGys2VrfNDMi+AQ4ck5cN
bJUqAAAAAElFTkSuQmCC
====
\end{MyEx}
\end{MyExample}

จาก\wbr{}ตัว\wbr{}อย่าง, ชื่อ\wbr{}ไฟล์\wbr{}ที่\wbr{}ต้องการ\wbr{}เข้า\wbr{}รหัส\wbr{}ได้\wbr{}แก่ \cmd{image.png} จะ\wbr{}เป็น\wbr{}อาร์กิวเ\wbr{}มนต์\wbr{}ของ\wbr{}คำ\wbr{}สั่ง. ส่วน \cmd{output\_image.png} จะ\wbr{}เป็น\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}ที่\wbr{}จะ\wbr{}กำหนด\wbr{}ใน\wbr{}ผล\wbr{}ลัพธ์\wbr{}ของ\wbr{}การ\wbr{}เข้า\wbr{}รหัส\wbr{}ซึ่ง\wbr{}จะ\wbr{}ใช้\wbr{}ชื่อ\wbr{}อะไร\wbr{}ก็\wbr{}ได้\wbr{}หรือ\wbr{}ชื่อ\wbr{}เหมือน\wbr{}กับ\wbr{}ไฟล์ไบ\wbr{}นารี\wbr{}ที่\wbr{}ต้องการ\wbr{}เข้า\wbr{}รหัส\wbr{}ก็\wbr{}ได้. ชื่อ\wbr{}ไฟล์\wbr{}นี้\wbr{}จะ\wbr{}ใช้\wbr{}เวลา\wbr{}ถอด\wbr{}รหัส\wbr{}ด้วย\wbr{}คำ\wbr{}สั่ง \cmd{uudecode}. คำ\wbr{}สั่ง \cmd{uudecode} จะ\wbr{}สร้าง\wbr{}ไฟล์\wbr{}ตาม\wbr{}ที่\wbr{}ระบุ\wbr{}ใน\wbr{}ข้อ\wbr{}มูล\wbr{}ซึ่ง\wbr{}ใน\wbr{}ที่\wbr{}นี้\wbr{}คือ\wbr{}ไฟล์ \cmd{output\_image.png} แล้ว\wbr{}ถอด\wbr{}รหัส\wbr{}ข้อ\wbr{}มูล\wbr{}ลง\wbr{}ใน\wbr{}ไฟล์\wbr{}นั้น. เนื่อง\wbr{}จาก\wbr{}ผล\wbr{}ลัพธ์\wbr{}ของ\wbr{}คำ\wbr{}สั่ง \cmd{uuencode} จะ\wbr{}แสดง\wbr{}ที่ stdout, ดัง\wbr{}นั้น\wbr{}ต้อง\wbr{}รี\wbr{}ไดเ\wbr{}รก\wbr{}บันทึก\wbr{}ลง\wbr{}ไฟล์\wbr{}เอง.

ตัว\wbr{}เลือก \cmd{-m} หมาย\wbr{}ถึง\wbr{}การ\wbr{}ใช้\wbr{}การ\wbr{}เข้า\wbr{}รหัส\wbr{}แบบ base64 %
\myvocab{b}{base64}{วิธี\wbr{}การ\wbr{}เข้า\wbr{}รหัส\wbr{}ข้อ\wbr{}มูลไบ\wbr{}นารี\wbr{}ให้\wbr{}เป็นเท็กซ์ ASCII โดย\wbr{}ใช้\wbr{}อักขระ 65 ตัว\wbr{}ได้\wbr{}แก่ \cmd{A-Z}, \cmd{a-z}, \cmd{0-9}, \cmd{+}, \cmd{/} และ \cmd{=} \cite{base64}.}%
 ถ้า\wbr{}ไม่\wbr{}ระบุ\wbr{}ตัว\wbr{}เลือก\wbr{}นี้\wbr{}จะ\wbr{}ใช้\wbr{}การ\wbr{}เข้า\wbr{}รหัส\wbr{}แบบ UU ซึ่ง\wbr{}เป็น\wbr{}วิธี\wbr{}การ\wbr{}เข้า\wbr{}รหัส\wbr{}ที่\wbr{}เก่า\wbr{}กว่า\wbr{}และ\wbr{}โดย\wbr{}ทั่ว\wbr{}ไป\wbr{}การ\wbr{}เข้า\wbr{}รหัส\wbr{}แบบ base64 จะ\wbr{}เป็น\wbr{}ที่\wbr{}นิยม\wbr{}มาก\wbr{}กว่า UU.

ตัว\wbr{}อย่าง\wbr{}ต่อ\wbr{}ไป\wbr{}นี้\wbr{}เป็น\wbr{}การ\wbr{}ถอด\wbr{}รหัส\wbr{}ข้อ\wbr{}มูล\wbr{}จาก\wbr{}ผล\wbr{}ลัพธ์\wbr{}ของ\wbr{}คำ\wbr{}สั่ง \cmd{uuencode} แปลง\wbr{}กลับ\wbr{}เป็น\wbr{}ข้อ\wbr{}มูลไบ\wbr{}นารี\wbr{}เดิม.
\begin{MyExample}[แปลง\wbr{}ข้อ\wbr{}มูลเท็กซ์ ASCII กลับ\wbr{}ไปไบ\wbr{}นารี.]
\begin{MyEx}
$ \cin{ls output_image.png} \mycomment{ยัง\wbr{}ไม่\wbr{}มี\wbr{}ไฟล์\wbr{}ชื่อ \cmd{output_image.png}}
ls: output_image.png: No such file or directory
$ \cin{uudecode image.png.txt}
$ \cin{file output_image.png}
output_image.png: PNG image data, 12 x 12, 8-bit/color RGBA, non-interlaced
\end{MyEx}
\end{MyExample}%$
หลัง\wbr{}จาก\wbr{}ที่\wbr{}คำ\wbr{}สั่ง \cmd{uudecode} ทำ\wbr{}งาน\wbr{}เรียบ\wbr{}ร้อย\wbr{}แล้ว, จะ\wbr{}ได้\wbr{}ไฟล์\wbr{}ชื่อ \cmd{output\_image.png} ซึ่ง\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}นี้\wbr{}เป็น\wbr{}ชื่อ\wbr{}ที่\wbr{}ระบุ\wbr{}ไว้\wbr{}ใน\wbr{}ไฟล์ \cmd{image.png.txt}. ถ้า\wbr{}ต้องการ\wbr{}เปลี่ยน\wbr{}เป็น\wbr{}ไฟล์\wbr{}ชื่อ\wbr{}อื่น, สามารถ\wbr{}ใช้\wbr{}ตัว\wbr{}เลือก \cmd{-o} ระบุ\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}ผล\wbr{}ลัพธ์\wbr{}ที่\wbr{}ต้องการ\wbr{}ได้.

\subsection{บันทึก\wbr{}สิ่ง\wbr{}ที่\wbr{}แสดง\wbr{}ในเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล}
การ\wbr{}ทำ\wbr{}งาน\wbr{}โดย\wbr{}ใช้เ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}มี\wbr{}ข้อ\wbr{}ดี\wbr{}อย่าง\wbr{}หนึ่ง\wbr{}คือ\wbr{}ถ่าย\wbr{}ทอด\wbr{}ที่\wbr{}เห็น, สิ่ง\wbr{}ที่\wbr{}พิมพ์\wbr{}ให้\wbr{}คน\wbr{}อื่น\wbr{}รับ\wbr{}รู้\wbr{}ได้\wbr{}ง่าย\wbr{}เพราะ\wbr{}ทุก\wbr{}อย่าง\wbr{}เป็น\wbr{}อักขระ\wbr{}ที่\wbr{}มนุษย์\wbr{}เข้า\wbr{}ใจ\wbr{}อ่าน\wbr{}ได้, ก็\wbr{}อป\wbr{}ปี้\wbr{}ได้. การ\wbr{}บันทึก\wbr{}สิ่ง\wbr{}ที่\wbr{}พิมพ์\wbr{}หรือ\wbr{}สิ่ง\wbr{}ที่\wbr{}แสดง\wbr{}ใน\wbr{}หน้า\wbr{}จอ\wbr{}ทำ\wbr{}ได้\wbr{}ด้วย\wbr{}คำ\wbr{}สั่ง \cmd{script}\cindex{script}\refcmd{script}. คำ\wbr{}สั่ง \cmd{script} จะ\wbr{}สร้าง\wbr{}ไฟล์\wbr{}และ\wbr{}บันทึก\wbr{}สิ่ง\wbr{}ที่\wbr{}ผู้\wbr{}ใช้\wbr{}พิมพ์, ผล\wbr{}ลัพธ์\wbr{}ที่\wbr{}แสดง\wbr{}ทาง\wbr{}หน้า\wbr{}จอ\wbr{}ทุก\wbr{}อย่าง. ผู้\wbr{}ใช้\wbr{}สามารถ\wbr{}เก็บ\wbr{}ไฟล์\wbr{}นี้\wbr{}ไว้\wbr{}ดู\wbr{}ภาย\wbr{}หลัง\wbr{}เก็บ\wbr{}ไว้\wbr{}เป็นล็\wbr{}อก, หรือ\wbr{}ส่ง\wbr{}ให้\wbr{}คน\wbr{}อื่น\wbr{}ดู.

\begin{MyExample}[บันทึก\wbr{}หน้า\wbr{}จอเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}ด้วย \cmd{script}.]
\begin{MyEx}
$ \cin{script} \mycomment{ถ้า\wbr{}ไม่\wbr{}ระบุ\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}จะ\wbr{}เก็บ\wbr{}ทุก\wbr{}อย่าง\wbr{}ไว้\wbr{}ใน\wbr{}ไฟล์ \cmd{typescript}}
Script started, file is typescript \mycomment{บันทึก\wbr{}ทุก\wbr{}อย่าง\wbr{}ที่\wbr{}เห็น\wbr{}เริ่ม\wbr{}จาก\wbr{}บรรทัด\wbr{}นี้}
$ \cin{echo "Everything will be in typescript"}
Everything will be in typescript
$ \cin{exit} \mycomment{หรือ \cmd{C-d}}
Script done, file is typescript \mycomment{จบ\wbr{}การ\wbr{}บันทึก}
$ \cin{cat typescript}
Script started on Sun Oct  3 23:52:44 2004 \mycomment{เริ่ม\wbr{}เนื้อ\wbr{}หา\wbr{}ของ\wbr{}ไฟล์ \cmd{typescript}}
$ echo "Everything will be in typescript"
Everything will be in typescript
$ exit

Script done on Sun Oct  3 23:53:06 2004 \mycomment{จบ\wbr{}เนื้อ\wbr{}หา\wbr{}ของ\wbr{}ไฟล์ \cmd{typescript}}
\end{MyEx}
\end{MyExample}
คำ\wbr{}สั่ง \cmd{script} บันทึก\wbr{}ทุก\wbr{}อย่าง\wbr{}ที่\wbr{}ปรากฏ\wbr{}บน\wbr{}หน้า\wbr{}จอ\wbr{}ไม่\wbr{}ว่า\wbr{}จะ\wbr{}เป็น\wbr{}ข้อ\wbr{}มูล\wbr{}เข้า, ข้อ\wbr{}มูล\wbr{}ออก\wbr{}ลง\wbr{}ใน\wbr{}ไฟล์\wbr{}ชื่อ \cmd{typescript} ถ้า\wbr{}ไม่\wbr{}มี\wbr{}การ\wbr{}ระบุ\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}เป็น\wbr{}อาร์กิวเ\wbr{}มนต์. ไฟล์\wbr{}ที่\wbr{}ใช้\wbr{}บันทึก\wbr{}ข้อ\wbr{}มูล\wbr{}บนเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}ไป\wbr{}ครั้ง\wbr{}หนึ่ง\wbr{}แล้ว\wbr{}สามารถ\wbr{}นำ\wbr{}มา\wbr{}เขียน\wbr{}ข้อ\wbr{}มูล\wbr{}ต่อ\wbr{}อีก\wbr{}ที\wbr{}ด้วย \cmd{script} โดย\wbr{}ใช้\wbr{}ตัว\wbr{}เลือก \cmd{-a}.\mymemo{\cmd{-a} หมาย\wbr{}ถึง append.}

%\subsection{จับ\wbr{}เวลา\wbr{}การ\wbr{}ทำ\wbr{}งาน\wbr{}ของ\wbr{}โปรแกรม}
%คำ\wbr{}สั่ง \cmd{time}\cindex{time} เป็น\wbr{}คำ\wbr{}สั่ง\wbr{}ใช้\wbr{}จับ\wbr{}เวลา\wbr{}การ\wbr{}ทำ\wbr{}งาน\wbr{}ของ\wbr{}โปรแกรม\wbr{}และ\wbr{}แสดง\wbr{}ค่า\wbr{}ต่างๆ\wbr{}เกี่ยว\wbr{}กับ\wbr{}ทรัพยากร\wbr{}ที่\wbr{}ใช้\wbr{}เช่น\wbr{}เวลา\wbr{}ที่\wbr{}หน่วย\wbr{}ประมวล\wbr{}ใช้\wbr{}ไป\wbr{}กับ\wbr{}โปรแกรม, การ\wbr{}ใช้\wbr{}งาน\wbr{}หน่วย\wbr{}ความ\wbr{}จำ\wbr{}เป็นต้น.

%\begin{MyExample}[จับ\wbr{}เวลา\wbr{}การ\wbr{}ใช้\wbr{}งาน\wbr{}ของ\wbr{}โปรแกรม.]
%\begin{MyEx}
%$ \cin{time md5sum aowthai-5.5.91-i386-cd1.iso}
%de8f5b05ae03595a53a1f516457e95f6  aowthai-5.5.91-i386-cd1.iso
%
%real    1m47.260s \mycomment{ระยะ\wbr{}เวลา\wbr{}ตั้ง\wbr{}แต่\wbr{}เริ่ม\wbr{}ทำ\wbr{}งาน\wbr{}จน\wbr{}จบ\wbr{}การ\wbr{}ทำ\wbr{}งาน}
%user    0m2.822s \mycomment{ระยะ\wbr{}เวลา\wbr{}ที่\wbr{}หน่วย\wbr{}ประมวล\wbr{}ผล\wbr{}ใช้\wbr{}สั่ง\wbr{}คำ\wbr{}สั่ง}
%sys     0m0.767s \mycomment{}
%\end{MyEx}
%\end{MyExample}


\subsection{ส่ง\wbr{}อาร์กิวเ\wbr{}มนต์\wbr{}ด้วย\wbr{}คำ\wbr{}สั่ง \cmd{xargs}}
การ\wbr{}ใช้\wbr{}ไวล์\wbr{}คาร์ด\wbr{}เพื่อ\wbr{}แทน\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}หลาย\wbr{}ไฟล์\wbr{}พร้อม\wbr{}กัน\wbr{}เป็น\wbr{}อาร์กิวเ\wbr{}มนต์\wbr{}ส่ง\wbr{}ให้\wbr{}คำ\wbr{}สั่ง\wbr{}มี\wbr{}ความ\wbr{}สะดวก\wbr{}อย่าง\wbr{}ยิ่ง\wbr{}ถ้า\wbr{}ต้องการ\wbr{}ทำ\wbr{}งาน\wbr{}รวด\wbr{}เดียว. เช่น\wbr{}คำ\wbr{}สั่ง \cmd{rm *} จะ\wbr{}ลบ\wbr{}ไฟล์\wbr{}ทุก\wbr{}ไฟล์\wbr{}ที่\wbr{}อยู่\wbr{}ใน\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี\wbr{}ที่\wbr{}ทำ\wbr{}งาน\wbr{}อยู่. ใน\wbr{}บาง\wbr{}ครั้ง\wbr{}ถ้า\wbr{}จำนวน\wbr{}ไฟล์\wbr{}ใน\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี\wbr{}มี\wbr{}มาก\wbr{}เกิน\wbr{}ไป\wbr{}จะ\wbr{}เกิน\wbr{}ข้อ\wbr{}ผิด\wbr{}พลาด\wbr{}ว่า \cmd{Argument list too long}. ใน\wbr{}กรณี\wbr{}เช่น\wbr{}นี้\wbr{}สามารถ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{xargs}\cindex{xargs}\refcmd{xargs} ช่วย\wbr{}รับ\wbr{}ข้อ\wbr{}มูล\wbr{}จาก stdin แล้ว\wbr{}ส่ง\wbr{}เป็น\wbr{}อาร์กิวเ\wbr{}มนต์\wbr{}ใน\wbr{}จำนวน\wbr{}ที่\wbr{}เหมาะ\wbr{}สม\wbr{}ให้\wbr{}กับ\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}ต้องการ\wbr{}สั่ง.

\begin{MyExample}[ใช้ \cmd{xargs} ส่ง\wbr{}อาร์กิวเ\wbr{}มนต์\wbr{}ให้\wbr{}คำ\wbr{}สั่ง\wbr{}อื่น.]
\begin{MyEx}
$ \cin{rm -f *}
-bash: /bin/rm: Argument list too long
$ \cin{ls | xargs rm -f}
\end{MyEx}
\end{MyExample}

จาก\wbr{}ตัว\wbr{}อย่าง\wbr{}ข้าง\wbr{}บน, การ\wbr{}สั่ง\wbr{}คำ\wbr{}สั่ง \cmd{rm -f *} จะ\wbr{}เกิด\wbr{}ข้อ\wbr{}ผิด\wbr{}พลาด\wbr{}ซึ่ง\wbr{}ข้อ\wbr{}ผิด\wbr{}พลาด\wbr{}นี้\wbr{}มา\wbr{}จาก\wbr{}เชลล์\wbr{}ซึ่ง\wbr{}ไม่\wbr{}สามารถ\wbr{}แทน\wbr{}ค่า\wbr{}ไวล์\wbr{}การ์ด \cmd{*} ด้วย\wbr{}จำนวน\wbr{}ไฟล์\wbr{}ทั้ง\wbr{}หมด\wbr{}ที่\wbr{}มี\wbr{}อยู่\wbr{}ใน\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี\wbr{}ปัจจุบัน\wbr{}ได้\wbr{}เพราะ\wbr{}มี\wbr{}จำนวน\wbr{}มาก\wbr{}เกิน\wbr{}ไป. ใน\wbr{}กรณี\wbr{}ที่\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{xargs}, เรา\wbr{}จะ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{ls} โดย\wbr{}ส่ง\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}ทั้ง\wbr{}หมด\wbr{}ที่\wbr{}มี\wbr{}อยู่\wbr{}ใน\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี\wbr{}ให้ \cmd{xargs} แล้ว \cmd{xargs} จะ\wbr{}แบ่ง\wbr{}ราย\wbr{}การ\wbr{}ไฟล์\wbr{}ใน\wbr{}จำนวน\wbr{}ที่\wbr{}เหมาะ\wbr{}สม\wbr{}ส่ง\wbr{}เป็น\wbr{}อาร์กิวเ\wbr{}มนต์\wbr{}ของ\wbr{}คำ\wbr{}สั่ง \cmd{rm -f} ต่อ\wbr{}ไป. ข้อ\wbr{}มูล\wbr{}นำ\wbr{}เข้า\wbr{}ของ\wbr{}คำ\wbr{}สั่ง \cmd{xargs} ใน\wbr{}ที่\wbr{}นี้\wbr{}เป็น\wbr{}ราย\wbr{}การ\wbr{}ไฟล์\wbr{}ใน\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี, ดัง\wbr{}นั้น\wbr{}อาจ\wbr{}จะ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{find .} แทน \cmd{ls} ก็\wbr{}ได้.

ใน\wbr{}ระบบ\wbr{}ปฏิบัติ\wbr{}การ\wbr{}ลิ\wbr{}นุกซ์\wbr{}จะ\wbr{}มี\wbr{}ข้อ\wbr{}จำกัด\wbr{}ของ\wbr{}หน่วย\wbr{}ความ\wbr{}จำ\wbr{}ที่\wbr{}สามารถ\wbr{}ใช้\wbr{}กับ\wbr{}ราย\wbr{}การ\wbr{}อาร์กิวเ\wbr{}มนต์\wbr{}ของ\wbr{}โปรแกรม. ด้วย\wbr{}เหตุ\wbr{}นี้\wbr{}เอง\wbr{}ถ้า\wbr{}มี\wbr{}การ\wbr{}ใช้\wbr{}ไวล์\wbr{}คาร์ด\wbr{}แทน\wbr{}ชื่อ\wbr{}ไฟล์, เชลล์\wbr{}จะ\wbr{}ขยาย\wbr{}ความ\wbr{}ให้\wbr{}เป็น\wbr{}ราย\wbr{}การ\wbr{}ชื่อ\wbr{}ไฟล์. ถ้า\wbr{}จำนวน\wbr{}ไฟล์\wbr{}มี\wbr{}มาก\wbr{}เกิน\wbr{}ขีด\wbr{}จำกัด\wbr{}ก็\wbr{}จะ\wbr{}เกิด\wbr{}ข้อ\wbr{}ผิด\wbr{}พลาด\wbr{}ตาม\wbr{}ตัว\wbr{}อย่าง\wbr{}ข้าง\wbr{}บน.

คำ\wbr{}สั่ง \cmd{getconf}\cindex{getconf}\index{arg\_max@ARG\_MAX} เป็น\wbr{}คำ\wbr{}สั่ง\wbr{}ใช้\wbr{}แสดง\wbr{}ค่า\wbr{}เฉพาะ\wbr{}ของ\wbr{}ระบบ\wbr{}เช่น\wbr{}ถ้า\wbr{}ต้องการ\wbr{}สำรวจ\wbr{}ขีด\wbr{}จำ\wbr{}กับ\wbr{}หน่วย\wbr{}ความ\wbr{}จำ\wbr{}ที่\wbr{}ใช้\wbr{}เก็บ\wbr{}ราย\wbr{}การ\wbr{}อาร์กิวเ\wbr{}มนต์\wbr{}สามารถ\wbr{}ทำ\wbr{}ได้\wbr{}ตาม\wbr{}ตัว\wbr{}อย่าง\wbr{}ต่อ\wbr{}ไป\wbr{}นี้.
\begin{MyExample}[สำรวจ\wbr{}ขีด\wbr{}จำกัด\wbr{}หน่วย\wbr{}ความ\wbr{}จำ\wbr{}ที่\wbr{}ใช้\wbr{}เก็บ\wbr{}ราย\wbr{}การ\wbr{}อาร์กิวเ\wbr{}มนต์.]
\begin{MyEx}
$ \cin{getconf ARG_MAX}
131072
\end{MyEx}
\end{MyExample}%$
\cmd{ARG\_MAX} คือ\wbr{}ชื่อ\wbr{}ตัวแปร\wbr{}ที่\wbr{}เก็บ\wbr{}ค่า\wbr{}ขีด\wbr{}จำกัด\wbr{}หน่วย\wbr{}ความ\wbr{}จำ\wbr{}สำหรับ\wbr{}ราย\wbr{}การ\wbr{}อาร์กิวเ\wbr{}มนต์\wbr{}ของ\wbr{}ระบบ. จะ\wbr{}เห็น\wbr{}ว่า\wbr{}ขีด\wbr{}จำกัด\wbr{}หน่วย\wbr{}ความ\wbr{}จำ\wbr{}อยู่\wbr{}ที่ 131,072 ไบต์, หรือ\wbr{}แปลง\wbr{}เป็นหน่\wbr{}วนกิ\wbr{}โบไบต์\wbr{}คือ 128 กิโลไบต์\mymemo{$131072 \div 1024 = 128$}. ถ้า\wbr{}อาร์กิวเ\wbr{}มนต์\wbr{}ทั้ง\wbr{}หมด\wbr{}มี\wbr{}ขนาด\wbr{}เกิน 128 กิโลไบต์, เชลล์\wbr{}จะ\wbr{}แสดง\wbr{}ข้อ\wbr{}ผิด\wbr{}พลาด \cmd{Argument list too long}. ส่วน\wbr{}คำ\wbr{}สั่ง \cmd{xargs} จะ\wbr{}ส่ง\wbr{}อาร์กิวเ\wbr{}มนต์\wbr{}ให้\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}ต้องการ\wbr{}โดย\wbr{}มี\wbr{}ขนาด\wbr{}ไม่\wbr{}เกิน\wbr{}ขีด\wbr{}จำกัด\wbr{}หน่วย\wbr{}ความ\wbr{}จำ\wbr{}ที่\wbr{}ว่า\wbr{}นี้. หมาย\wbr{}ความ\wbr{}ว่า\wbr{}คำ\wbr{}สั่ง \cmd{xargs} จะ\wbr{}เรียก\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง\wbr{}เช่น\wbr{}ใน\wbr{}ตัว\wbr{}อย่าง\wbr{}ได้\wbr{}แก่ \cmd{rm} หลายๆ\wbr{}ครั้ง\wbr{}เพื่อ\wbr{}ไม่\wbr{}ให้\wbr{}เกิด\wbr{}ข้อ\wbr{}ผิด\wbr{}พลาด\wbr{}จำนวน\wbr{}อาร์กิวเ\wbr{}มนต์\wbr{}มาก\wbr{}เกิน\wbr{}ไป.




\section{เชลล์สค\wbr{}ริปต์}
\emph{เชลล์สค\wbr{}ริปต์ (shell script)} คือ\wbr{}ไฟล์เท็กซ์\wbr{}ที่\wbr{}รวม\wbr{}คำ\wbr{}สั่ง\wbr{}เชลล์\wbr{}ต่างๆ\wbr{}เพื่อ\wbr{}ใช้\wbr{}ทำ\wbr{}งาน\wbr{}อย่าง\wbr{}ใด\wbr{}อย่าง\wbr{}หนึ่ง. เชลล์สค\wbr{}ริปต์\wbr{}สร้าง\wbr{}ขึ้น\wbr{}มา\wbr{}เพื่อ\wbr{}งาน\wbr{}เฉพาะ\wbr{}อย่าง\wbr{}หรือ\wbr{}สร้าง\wbr{}โปรแกรม\wbr{}ใหม่\wbr{}ขึ้น\wbr{}มา\wbr{}โดย\wbr{}อาศัย\wbr{}คำ\wbr{}สั่ง\wbr{}ต่างๆ\wbr{}ที่\wbr{}ใช้\wbr{}ได้\wbr{}ใน\wbr{}เชลล์. งาน\wbr{}ที่\wbr{}เหมาะ\wbr{}กับ\wbr{}เชลล์สค\wbr{}ริปต์\wbr{}มัก\wbr{}เป็น\wbr{}งาน\wbr{}แบบ batch คือ\wbr{}เป็น\wbr{}งาน\wbr{}ที่\wbr{}มี\wbr{}ขั้น\wbr{}ตอน\wbr{}ที่\wbr{}แน่\wbr{}นอน, และ\wbr{}มัก\wbr{}ไม่\wbr{}ต้องการ\wbr{}การ\wbr{}โต้\wbr{}ตอบ\wbr{}จาก\wbr{}ผู้\wbr{}ใช้ (หรือ\wbr{}จะ\wbr{}มี\wbr{}การ\wbr{}โต้\wbr{}ตอบ\wbr{}กับ\wbr{}ผู้\wbr{}ใช้\wbr{}ก็\wbr{}ได้). ชื่อ\wbr{}เชลล์สค\wbr{}ริปต์\wbr{}มี\wbr{}ความ\wbr{}หมาย\wbr{}ใน\wbr{}ตัว\wbr{}อยู่\wbr{}แล้ว\wbr{}ว่า\wbr{}ใช้\wbr{}เชลล์\wbr{}เป็น\wbr{}ตัวแปร\wbr{}คำ\wbr{}สั่ง\wbr{}ต่างๆ\wbr{}ที่\wbr{}อยู่\wbr{}ใน\wbr{}ไฟล์. เชลล์\wbr{}ที่\wbr{}ใช้\wbr{}ใน\wbr{}หนังสือ\wbr{}เล่ม\wbr{}นี้\wbr{}จะ\wbr{}หมาย\wbr{}ถึง\wbr{}เชลล์ bash. ไวย์\wbr{}กรณ์\wbr{}ต่างๆ\wbr{}จะ\wbr{}เข้า\wbr{}กัน\wbr{}ได้\wbr{}หรือ\wbr{}คล้าย\wbr{}กับ\wbr{}เชลล์ Bourn, Ksh. สำหรับ\wbr{}ผู้\wbr{}ที่\wbr{}ต้องการ\wbr{}เขียน\wbr{}เชลล์สค\wbr{}ริปต์\wbr{}ด้วย csh ต้อง\wbr{}อ่าน\wbr{}คู่\wbr{}มือ\wbr{}หรือ\wbr{}หนังสือ\wbr{}เกี่ยว\wbr{}กับ csh โดย\wbr{}เฉพาะ\wbr{}เนื่อง\wbr{}จาก\wbr{}มี\wbr{}ไวย์\wbr{}กรณ์\wbr{}ที่\wbr{}ต่างๆ\wbr{}กัน.

\subsection{สร้าง\wbr{}เชลล์สค\wbr{}ริปต์}
เชลล์สค\wbr{}ริปต์\wbr{}เป็น\wbr{}ไฟล์เท็กซ์\wbr{}ธรรม\wbr{}ดา, สามารถ\wbr{}สร้าง\wbr{}ด้วย\wbr{}บรรณาธิ\wbr{}กรณ์\wbr{}ใดๆ\wbr{}ก็\wbr{}ได้\wbr{}แล้ว\wbr{}แต่\wbr{}สะดวก. บรรทัด\wbr{}แรก\wbr{}ของ\wbr{}ไฟล์\wbr{}ต้อง\wbr{}ขึ้น\wbr{}ต้น\wbr{}ด้วย\wbr{}เครื่อง\wbr{}หมาย \cmd{\#!}\mymemo{หนังสือ\wbr{}บาง\wbr{}เล่ม\wbr{}เรียก \cmd{\#!} ว่า Shabang.} ตาม\wbr{}ด้วย full path ของ\wbr{}โปรแกรม\wbr{}เชลล์\wbr{}ซึ่ง\wbr{}โดย\wbr{}ปรกติ\wbr{}คือ \cmd{/bin/sh}. สำหรับ\wbr{}ระบบ\wbr{}ยู\wbr{}นิกซ์\wbr{}ที่\wbr{}มี\wbr{}เชลล์ bash ไว้\wbr{}ใน\wbr{}ที่\wbr{}อื่นๆ\wbr{}เช่น \cmd{/usr/local/bash} ก็\wbr{}ใช้\wbr{}ให้ full path ที่\wbr{}เหมาะ\wbr{}สม.

\begin{MyExample}[ตัว\wbr{}อย่าง\wbr{}การ\wbr{}สร้าง\wbr{}เชลล์สค\wbr{}ริปต์\wbr{}และ\wbr{}รัน.]
\begin{MyEx}
$ \cin{cat <<EOF > test} \mycomment{นี่\wbr{}เป็น\wbr{}แค่\wbr{}ตัว\wbr{}อย่าง. ใน\wbr{}ความ\wbr{}เป็น\wbr{}จริง\wbr{}ให้\wbr{}ใช้\wbr{}บรรณาธิ\wbr{}กรณ์\wbr{}ที่\wbr{}ถนัด\wbr{}สร้าง.}
> \cin{#!/bin/sh} \mycomment{บรรทัด\wbr{}แรก\wbr{}ของ\wbr{}เชลล์สค\wbr{}ริปต์}
> \cin{# This is line is a comment.}
> \cin{echo "Hello world!" # From here is comment.}
> \cin{EOF}
$ \cin{ls -l test}
-rw-r--r--    1 poonlap  users          30 Oct  5 22:20 test
$ \cin{chmod +x test} \mycomment{อนุญาต\wbr{}ให้\wbr{}กระทำ\wbr{}การ\wbr{}ได้}
$ \cin{ls -l test}
-rwxr-xr-x    1 poonlap  users          30 Oct  5 22:20 test
$ \cin{./test} \mycomment{เขียน \cmd{./} นำ\wbr{}หน้า\wbr{}เพื่อ\wbr{}ระบุ\wbr{}ว่า\wbr{}อยู่\wbr{}ที่\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี\wbr{}ปัจจุบัน\wbr{}ให้\wbr{}ชัดเจน}
Hello world!
\end{MyEx}
\end{MyExample}%$

ไฟล์\wbr{}ที่\wbr{}เป็นสค\wbr{}ริปต์\wbr{}นั้น\wbr{}จะ\wbr{}มี\wbr{}ชื่อ\wbr{}อะไร\wbr{}ก็\wbr{}ได้. อาจ\wbr{}จะ\wbr{}เติม\wbr{}ส่วน\wbr{}ขยาย\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}ด้วย \cmd{.sh} ก็\wbr{}ได้\wbr{}เพื่อ\wbr{}ให้\wbr{}สื่อ\wbr{}ความ\wbr{}หมาย\wbr{}ให้\wbr{}ชัดเจน\wbr{}ว่า\wbr{}เป็น\wbr{}เชลล์สค\wbr{}ริปต์. ส่วน\wbr{}ขยาย\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}นี้\wbr{}จะ\wbr{}เป็น\wbr{}อะไร\wbr{}ก็\wbr{}ได้ \cmd{.pl}, \cmd{.exe}, \cmd{.a} ฯลฯ หรือ\wbr{}ไม่\wbr{}มี\wbr{}ก็\wbr{}ได้\wbr{}เพราะ\wbr{}ลิ\wbr{}นุกซ์\wbr{}ไม่\wbr{}ได้\wbr{}แยก\wbr{}แยก\wbr{}ประเภท\wbr{}ไฟล์\wbr{}ด้วย\wbr{}ชื่อ\wbr{}ไฟล์. หลัง\wbr{}จาก\wbr{}ที่\wbr{}สร้าง\wbr{}ไฟล์\wbr{}เรียบ\wbr{}ร้อย\wbr{}แล้ว, ยัง\wbr{}ไม่\wbr{}สามารถ\wbr{}กระทำ\wbr{}การ\wbr{}ได้\wbr{}ทัน\wbr{}ที. ต้อง\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{chmod} เพื่อ\wbr{}ตั้ง\wbr{}สิทธิ์\wbr{}การ\wbr{}ใช้\wbr{}ไฟล์\wbr{}ให้\wbr{}กระทำ\wbr{}การ\wbr{}ได้. หลัง\wbr{}จาก\wbr{}นั้น\wbr{}จึง\wbr{}สามารถ\wbr{}รัน\wbr{}เชลล์สค\wbr{}ริปต์\wbr{}ได้\wbr{}เหมือน\wbr{}โปรแกรม\wbr{}ทั่ว\wbr{}ไป. ให้\wbr{}สังเกต\wbr{}ว่า\wbr{}ใน\wbr{}ตัว\wbr{}อย่าง\wbr{}จะ\wbr{}รัน\wbr{}เชลล์สค\wbr{}ริปต์\wbr{}ด้วย \cmd{./test} แทน\wbr{}ที่\wbr{}จะ\wbr{}ใช้ \cmd{test} เป็น\wbr{}การ\wbr{}ระบุ\wbr{}ให้\wbr{}ชัดเจน\wbr{}ว่า \cmd{test} เป็น\wbr{}ไฟล์\wbr{}ที่\wbr{}อยู่\wbr{}ใน\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี\wbr{}ปัจจุบัน \cmd{./} มิ\wbr{}เช่น\wbr{}นั้น \cmd{test} จะ\wbr{}หมาย\wbr{}ถึง\wbr{}คำ\wbr{}สั่ง \cmd{/usr/bin/test}.

สรุป\wbr{}ขั้น\wbr{}ตอน\wbr{}การ\wbr{}สร้าง\wbr{}เชลล์สค\wbr{}ริปต์.
\begin{enumerate}
\item ใช้\wbr{}บรรณาธิ\wbr{}กรณ์\wbr{}ที่\wbr{}ถนัด\wbr{}สร้าง\wbr{}เชลล์สค\wbr{}ริปต์. บรรทัด\wbr{}แรก\wbr{}ต้อง\wbr{}ขึ้น\wbr{}ต้น\wbr{}ด้วย \cmd{\#!} แล้ว\wbr{}ตาม\wbr{}ด้วย full path ของ\wbr{}เชลล์\wbr{}เช่น \cmd{\#!/bin/sh}.
\item ตั้ง\wbr{}ค่า\wbr{}สิทธิ์\wbr{}การ\wbr{}ใช้\wbr{}ไฟล์\wbr{}เชลล์สค\wbr{}ริปต์\wbr{}ให้\wbr{}กระทำ\wbr{}การ\wbr{}ได้ (executable) ด้วย\wbr{}คำ\wbr{}สั่ง \cmd{chmod +x}.
\item รัน\wbr{}เชลล์สค\wbr{}ริปต์. เพื่อ\wbr{}ความ\wbr{}ชัดเจน\wbr{}ให้\wbr{}ระบุ\wbr{}เป็น path สัมพันธ์\wbr{}เช่น \cmd{./test} เป็นต้น.
\end{enumerate}

\subsection{หมาย\wbr{}เหตุ}
\emph{หมาย\wbr{}เหตุ (comment)} คือ\wbr{}ส่วน\wbr{}ที่\wbr{}เชลล์\wbr{}จะ\wbr{}ไม่\wbr{}ตี\wbr{}ความ. เรา\wbr{}สามารถ\wbr{}ใช้\wbr{}หมาย\wbr{}เหตุ\wbr{}เขียน\wbr{}บันทึก\wbr{}เตือน\wbr{}จำ, หรือ\wbr{}เขียน\wbr{}อธิบาย\wbr{}การ\wbr{}ทำ\wbr{}งาน\wbr{}ของ\wbr{}เชลล์สค\wbr{}ริปต์\wbr{}ก็\wbr{}ได้. ส่วน\wbr{}ที่\wbr{}เป็น\wbr{}หมาย\wbr{}เหตุ\wbr{}ใน\wbr{}เชลล์\wbr{}จะ\wbr{}เป็น\wbr{}ส่วน\wbr{}ที่\wbr{}อยู่\wbr{}ถัด\wbr{}จาก\wbr{}เครื่อง\wbr{}หมาย \cmd{\#} ไป\wbr{}จน\wbr{}สุด\wbr{}บรรทัด. เครื่อง\wbr{}หมาย \cmd{\#} ไม่\wbr{}จำ\wbr{}เป็นต้น\wbr{}อยู่\wbr{}ต้น\wbr{}บรรทัด\wbr{}ก็\wbr{}ได้.

\subsection{ตัวแปร}
\emph{ตัวแปร (variable)} มี\wbr{}ความ\wbr{}สำคัญ\wbr{}อย่าง\wbr{}ยิ่ง\wbr{}ใน\wbr{}การ\wbr{}เขียน\wbr{}โปรแกรม\wbr{}รวม\wbr{}ถึง\wbr{}เชลล์สค\wbr{}ริปต์\wbr{}ด้วย. ชื่อ\wbr{}ตัวแปร\wbr{}ไม่\wbr{}ควร\wbr{}มี\wbr{}ตัว\wbr{}อักษร\wbr{}ที่\wbr{}มี\wbr{}ความ\wbr{}หมาย\wbr{}พิเศษ\wbr{}สำหรับ\wbr{}เชลล์. ตัวแปร\wbr{}ใน\wbr{}เชลล์สค\wbr{}ริปต์\wbr{}ไม่\wbr{}มี\emph{ประเภท (type)}, กล่าว\wbr{}คือ\wbr{}ตัวแปร\wbr{}สามารถ\wbr{}เก็บ\wbr{}ข้อ\wbr{}มูล\wbr{}เช่นเท็กซ์, ตัว\wbr{}เลข ได้\wbr{}โดย\wbr{}ที่\wbr{}ไม่\wbr{}ต้อง\wbr{}ระบุ\wbr{}ให้\wbr{}เชลล์\wbr{}รู้\wbr{}แน่\wbr{}ชัด\wbr{}ว่า\wbr{}ค่าที่\wbr{}อยู่\wbr{}ใน\wbr{}ตัวแปร\wbr{}นั้น\wbr{}เป็น\wbr{}อะไร (ประเภท\wbr{}อะไร).

\subsubsection{การ\wbr{}กำหนด\wbr{}ตัวแปร}
การ\wbr{}กำหนด\wbr{}ตัวแปร\wbr{}ใน\wbr{}เชลล์\wbr{}จะ\wbr{}ใช้\wbr{}เครื่อง\wbr{}หมาย \cmd{=} มี\wbr{}ไวย\wbr{}กรณ์\wbr{}ดัง\wbr{}นี้
\begin{MyVerbatim}
\textit{variable}=\textit{value}
\end{MyVerbatim}
ให้\wbr{}สังเกต\wbr{}ว่า\wbr{}ตำแหน่ง\wbr{}ข้าง\wbr{}หน้า\wbr{}และ\wbr{}หลัง\wbr{}เครื่อง\wbr{}หมาย \cmd{=} ต้อง\wbr{}ไม่\wbr{}มี\wbr{}ช่อง\wbr{}ว่าง\wbr{}เพราะ\wbr{}เชลล์\wbr{}จะ\wbr{}ถือ\wbr{}ว่า\wbr{}ช่อง\wbr{}ว่าง\wbr{}เป็น\wbr{}ตัว\wbr{}แบ่ง\wbr{}อาร์กิวเ\wbr{}มนต์. ค่า\wbr{}ตัวแปร\wbr{}ที่\wbr{}เป็น\wbr{}สาย\wbr{}อักขระ\wbr{}มัก\wbr{}จะ\wbr{}ใช้ double quote หรือ single quote คล่\wbr{}อม. ส่วน\wbr{}ค่า\wbr{}ตัวแปร\wbr{}ที่\wbr{}เป็น\wbr{}ตัว\wbr{}เลข\wbr{}มัก\wbr{}จะ\wbr{}เขียน\wbr{}เป็น\wbr{}ตัว\wbr{}เลข\wbr{}โดดๆ. นอก\wbr{}จาก\wbr{}นั้น\wbr{}ค่า\wbr{}ของ\wbr{}ตัวแปร\wbr{}อาจ\wbr{}จะ\wbr{}ตั้ง\wbr{}ได้\wbr{}จาก\wbr{}ผล\wbr{}ลัพธ์\wbr{}ของ\wbr{}คำ\wbr{}สั่ง\wbr{}อื่นๆ\wbr{}โดย\wbr{}ใช้\wbr{}การ\wbr{}แทน\wbr{}ค่า\wbr{}คำ\wbr{}สั่ง (command substitution). ชื่อ\wbr{}ของ\wbr{}ตัวแปร\wbr{}ไม่\wbr{}ควร\wbr{}ใช้\wbr{}ตัว\wbr{}อักขระ\wbr{}ที่\wbr{}มี\wbr{}ความ\wbr{}หมาย\wbr{}พิเศษ\wbr{}สำหรับ\wbr{}เชลล์. แนะ\wbr{}นำ\wbr{}ให้\wbr{}ใช้\wbr{}ตัว\wbr{}อักษร\wbr{}ภาษา\wbr{}อังกฤษ\wbr{}ผสม\wbr{}กับ\wbr{}ตัว\wbr{}เลข\wbr{}หรือ\wbr{}เครื่อง\wbr{}หมาย \cmd{\_} เวลา\wbr{}ตั้ง\wbr{}ชื่อ\wbr{}ตัวแปร.


\begin{MyExample}[การ\wbr{}กำหนด\wbr{}ตัวแปร\wbr{}ใน\wbr{}เชลล์สค\wbr{}ริปต์.]
\begin{MyEx}
c="Hello world" \mycomment{ใช้ quote เพราะ\wbr{}มี\wbr{}ช่อง\wbr{}ว่าง}
file=test.sh \mycomment{ไม่\wbr{}ใช้ quote}
my_count=1 \mycomment{ค่า\wbr{}ตัวแปร\wbr{}เป็น\wbr{}ตัว\wbr{}เลข. จะ\wbr{}ใช้ quote หรือ\wbr{}ไม่\wbr{}ก็\wbr{}ได้}
day1=`date` \mycomment{ค่า\wbr{}ตัวแปร\wbr{}เป็น\wbr{}ผล\wbr{}ลัพธ์\wbr{}ของ\wbr{}คำ\wbr{}สั่ง \cmd{date} มี\wbr{}ผล\wbr{}เหมือน\wbr{}กับ \cmd{day1=\$\{date\}}}
\end{MyEx}
\end{MyExample}


\subsubsection{การ\wbr{}อ้าง\wbr{}อิง\wbr{}ค่า\wbr{}ตัวแปร}
เวลา\wbr{}แสดง\wbr{}ค่า\wbr{}ตัวแปร\wbr{}จะ\wbr{}ใช้\wbr{}เครื่อง\wbr{}หมาย \cmd{\$} นำ\wbr{}หน้า\wbr{}ชื่อ\wbr{}ตัวแปร.
\begin{MyExample}[การ\wbr{}แสดง\wbr{}ค่า\wbr{}ตัวแปร\wbr{}เชลล์.]
\begin{MyEx}
echo $c \mycomment{ผล\wbr{}ลัพธ์ \cmd{Hello world}}
echo $\{file\}ell \mycomment{ผล\wbr{}ลัพธ์ \cmd{test.shell}}
echo "$my_count" \mycomment{ผล\wbr{}ลัพธ์ \cmd{1}}
echo Today is $day1 \mycomment{ผล\wbr{}ลัพธ์ \cmd{Today is Tue Oct 5 23:59:33 JST 2004}}
\end{MyEx}
\end{MyExample}

ผู้\wbr{}ใช้\wbr{}สามารถ\wbr{}ระบุ\wbr{}ช่วง\wbr{}ที่\wbr{}เป็น\wbr{}ตัวแปร\wbr{}ได้\wbr{}ด้วย\wbr{}เครื่อง\wbr{}หมาย \cmd{\{\}} คร่อม\wbr{}ส่วน\wbr{}ที่\wbr{}เป็น\wbr{}ชื่อ\wbr{}ตัวแปร\wbr{}ที่\wbr{}ต้องการ. เช่น \cmd{\$\{file\}ell} หมาย\wbr{}ถึง\wbr{}การ\wbr{}แสดง\wbr{}ค่า\wbr{}ของ\wbr{}ตัวแปร \cmd{\$file} ถ้า\wbr{}ไม่\wbr{}มี\wbr{}เครื่อง\wbr{}หมา\wbr{}ยวง\wbr{}เล็บ \cmd{\{\}} จะ\wbr{}ตี\wbr{}ความ\wbr{}เป็น\wbr{}ค่า\wbr{}ของ\wbr{}ตัวแปร \cmd{\$fileell} แทน. สำหรับ\wbr{}ค่า\wbr{}ของ\wbr{}ตัวแปร\wbr{}ที่\wbr{}ที่\wbr{}ไม่\wbr{}มี\wbr{}จริง, หรือ\wbr{}ไม่\wbr{}ได้\wbr{}กำหนด\wbr{}ไว้\wbr{}จะ\wbr{}เป็น\wbr{}ความ\wbr{}ว่าง\wbr{}เปล่า.

\subsubsection{ตัวแปร\wbr{}พิเศษ}
ใน\wbr{}เชลล์ bash จะ\wbr{}มี\wbr{}ตัวแปร\wbr{}พิเศษ\wbr{}ซึ่ง\wbr{}ใช้\wbr{}อ้าง\wbr{}อิง\wbr{}และ\wbr{}ไม่\wbr{}สามารถ\wbr{}ตั้ง\wbr{}ค่า\wbr{}ได้. ตัวแปร\wbr{}เหล่า\wbr{}นี้\wbr{}ได้\wbr{}แก่
\begin{itemize}
\item \cmd{\$0} หมาย\wbr{}ถึง\wbr{}ชื่อ\wbr{}ของ\wbr{}เชลล์สค\wbr{}ริปต์.
\item \cmd{\$1}, \cmd{\$2}, ... ค่า\wbr{}อาร์กิวเ\wbr{}มนต์\wbr{}ของ\wbr{}เชลล์สค\wbr{}ริปต์\wbr{}ตัว\wbr{}ที่ 1, 2, ... ไป\wbr{}เรื่อยๆ.
\item \cmd{\$*} ค่า\wbr{}ของ\wbr{}อาร์กิวเ\wbr{}มนต์\wbr{}ทั้ง\wbr{}หมด\wbr{}แบ่ง\wbr{}ด้วย\wbr{}เครื่อง\wbr{}หมาย space. ถ้า\wbr{}ใช้\wbr{}เครื่อง\wbr{}หมาย double quote คล่\wbr{}อม\wbr{}จะ\wbr{}เป็น\wbr{}การ\wbr{}รวม\wbr{}อาร์กิวเ\wbr{}มนต์\wbr{}ทุก\wbr{}ตัว\wbr{}ให้\wbr{}เป็น\wbr{}ค่า\wbr{}ค่า\wbr{}เดียว\wbr{}และ\wbr{}ใช้\wbr{}เครื่อง\wbr{}หมาย\wbr{}ที่\wbr{}กำหนด\wbr{}ใน\wbr{}ตัวแปร \cmd{IFS} แบ่ง\wbr{}ระหว่าง\wbr{}อาร์กิวเ\wbr{}มนต์.
\item \cmd{\$@} ค่า\wbr{}ของ\wbr{}อาร์กิวเ\wbr{}มนต์\wbr{}ทั้ง\wbr{}หมด\wbr{}แบ่ง\wbr{}ด้วย\wbr{}เครื่อง\wbr{}หมาย space. ถ้า\wbr{}ใช้\wbr{}เครื่อง\wbr{}หมาย double quote คล่\wbr{}อม\wbr{}จะ\wbr{}เป็น\wbr{}การ\wbr{}รวม\wbr{}อาร์กิวเ\wbr{}มนต์\wbr{}ทุก\wbr{}ตัว\wbr{}ให้\wbr{}เป็น\wbr{}ค่า\wbr{}ค่า\wbr{}เดียว\wbr{}และ\wbr{}ใช้\wbr{}เครื่อง\wbr{}หมาย space แบ่ง\wbr{}ระหว่าง\wbr{}อาร์กิวเ\wbr{}มนต์.
\item \cmd{\$\#} จำนวน\wbr{}อาร์กิวเ\wbr{}มนต์\wbr{}ของ\wbr{}เชลล์สค\wbr{}ริปต์.
\item \cmd{\$?} ค่า\wbr{}สถานะ\wbr{}จบ\wbr{}การ\wbr{}ทำ\wbr{}งาน\wbr{}ของ\wbr{}คำ\wbr{}สั่ง\wbr{}ล่า\wbr{}สุด.
\item \cmd{\$\$} โปร\wbr{}เซส ID ของ\wbr{}เชลล์\wbr{}ที่\wbr{}ทำ\wbr{}งาน\wbr{}อยู่.
\end{itemize}

\begin{MyExample}[แสดง\wbr{}ค่า\wbr{}ตัวแปร\wbr{}พิเศษ\wbr{}ของ\wbr{}เชลล์.]
\begin{MyEx}
$ \cin{cat -n special_vars.sh}
     1  #!/bin/sh
     2  IFS=":"
     3  echo Script name: $0
     4  echo Arguments: "$*"
     5  echo Arguments: "$@"
     6  echo Number of arguments: $#
     7  echo Process ID: $$
$ \cin{./special_vars.sh arg1 arg2}
Script name: ./special_vars.sh
Arguments: arg1:arg2
Arguments: arg1 arg2
Number of arguments: 2
Process ID: 28842
\end{MyEx}
\end{MyExample}

นอก\wbr{}จาก\wbr{}นี้\wbr{}ยัง\wbr{}มี\wbr{}ตัวแปร\wbr{}เชลล์\wbr{}ซึ่ง\wbr{}เป็น\wbr{}สื่อ\wbr{}ความ\wbr{}หมาย\wbr{}เช่น
\begin{itemize}
\item \cmd{\$BASH} ชื่อ\wbr{}ไฟล์\wbr{}เต็ม\wbr{}ของ\wbr{}เชลล์\wbr{}ที่\wbr{}กระทำ\wbr{}การ\wbr{}อยู่.
\item \cmd{\$BASH\_VERSION} รุ่น\wbr{}ของ\wbr{}เชลล์ bash.
\item \cmd{\$HOSTNAME} ชื่อ\wbr{}โฮส\wbr{}ของ\wbr{}เครื่อง\wbr{}ที่\wbr{}ทำ\wbr{}งาน\wbr{}อยู่.
\item \cmd{\$OLDPWD} ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี\wbr{}ก่อน\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี\wbr{}ปัจจุบัน.
\item \cmd{\$PPID} ID ของ\wbr{}โปร\wbr{}เซส\wbr{}แม่\wbr{}ที่\wbr{}กระทำ\wbr{}การ\wbr{}เชลล์.
\item \cmd{\$RANDOM} ค่า\wbr{}สุ่ม\wbr{}ตัว\wbr{}เลข\wbr{}ระหว่าง 0 ถึง 32767.
\item \cmd{\$SECONDS} จำนวน\wbr{}วินาที\wbr{}ตั้ง\wbr{}แต่\wbr{}เชลล์\wbr{}ทำ\wbr{}งาน.
\item \cmd{\$UID} uid ของ\wbr{}ผู้\wbr{}ที่\wbr{}ใช้\wbr{}เชลล์.
\item \cmd{\$IFS} ย่อ\wbr{}มา\wbr{}จาก\wbr{}คำ\wbr{}ว่า Internal Field Separator. เป็น\wbr{}ตัวแปร\wbr{}ที่\wbr{}กำหนด\wbr{}อักขระ\wbr{}ที่\wbr{}ใช้\wbr{}แบ่ง\wbr{}คำ. ค่า\wbr{}ปริยาย\wbr{}จะ\wbr{}เป็น space, tab และ newline.
\end{itemize}
ราย\wbr{}การ\wbr{}ตัวแปร\wbr{}ทั้ง\wbr{}หมด\wbr{}และ\wbr{}ราย\wbr{}ละเอียด\wbr{}ของ\wbr{}ตัวแปร\wbr{}เหล่า\wbr{}นี้\wbr{}สามารถ\wbr{}อ่าน\wbr{}ได้\wbr{}จาก\wbr{}คู่\wbr{}มือ\wbr{}ของ \cmd{bash(1)}.

\subsection{การ\wbr{}ใช้\wbr{}เครื่อง\wbr{}หมาย\wbr{}คำ\wbr{}พูด}
\emph{Quoting} คือ\wbr{}การ\wbr{}เขียน\wbr{}สาย\wbr{}อักขระ\wbr{}โดย\wbr{}ใช้\wbr{}เครื่อง\wbr{}หมาย\wbr{}คำ\wbr{}พูดคล่\wbr{}อม. เครื่อง\wbr{}หมาย\wbr{}คำ\wbr{}พูด\wbr{}นี้\wbr{}ยัง\wbr{}แบ่ง\wbr{}เป็น double quote และ single quote ซึ่ง\wbr{}ให้\wbr{}ผล\wbr{}ต่าง\wbr{}กัน.

สาย\wbr{}อักขระ\wbr{}ที่\wbr{}คร่อม\wbr{}ด้วยครื่\wbr{}อง\wbr{}หมาย double quote, สิ่ง\wbr{}ที่\wbr{}เขียน\wbr{}จะ\wbr{}มี\wbr{}ความ\wbr{}หมาย\wbr{}ตาม\wbr{}ตัว\wbr{}อักษร\wbr{}ยก\wbr{}เว้น \cmd{\$}, \cmd{`} และ \cmd{\bs} ที่\wbr{}เชลล์\wbr{}จะ\wbr{}ขยาย\wbr{}ความ\wbr{}พิเศษ. ถ้า\wbr{}มี\wbr{}เครื่อง\wbr{}หมาย \cmd{\$} อยู่\wbr{}ใน double quote, เชลล์\wbr{}จะ\wbr{}ขยาย\wbr{}ความ\wbr{}ว่า\wbr{}มี\wbr{}การ\wbr{}อ้าง\wbr{}อิง\wbr{}ตัวแปร. ถ้า\wbr{}มี\wbr{}เครื่อง\wbr{}หมาย \cmd{`} (back quote) , เชลล์\wbr{}จะ\wbr{}ขยาย\wbr{}ความ\wbr{}ว่า\wbr{}มี\wbr{}การ\wbr{}แทน\wbr{}ผล\wbr{}ลัพธ์\wbr{}คำ\wbr{}สั่ง. สำหรับ\wbr{}เครื่อง\wbr{}หมาย \cmd{\bs} ที่\wbr{}อยู่\wbr{}ใน double quote, เชลล์\wbr{}จะ\wbr{}ขยาย\wbr{}ความ\wbr{}พิเศษ\wbr{}ก็\wbr{}ต่อ\wbr{}เมื่อ\wbr{}มี\wbr{}เครื่อง\wbr{}หมาย \cmd{\$}, \cmd{`}, \cmd{"}, \cmd{\bs} หรือ\wbr{}อักขระ newline (เกิด\wbr{}จาก\wbr{}การ\wbr{}กด\wbr{}คีย์ Enter). ถ้า\wbr{}อักขระ\wbr{}ที่\wbr{}ตาม\wbr{}หลัง \cmd{\bs} เป็น\wbr{}อักขระ\wbr{}อื่นๆ\wbr{}นอก\wbr{}เหนือก\wbr{}จาก\wbr{}นี้\wbr{}เช่น \cmd{\bs{}n}, ก็\wbr{}จะ\wbr{}มี\wbr{}ความ\wbr{}หมาย\wbr{}ตาม\wbr{}ตัว\wbr{}อักษร\wbr{}คือ\wbr{}เครื่อง\wbr{}หมาย \cmd{\bs} แล้ว\wbr{}ตาม\wbr{}ด้วย \cmd{n}. สาย\wbr{}อักขระ\wbr{}ที่\wbr{}คร่อม\wbr{}ด้วย\wbr{}เครื่อง\wbr{}หมาย single quote จะ\wbr{}มี\wbr{}ความ\wbr{}หมาย\wbr{}ตาม\wbr{}ตัว\wbr{}อักษร\wbr{}ทุก\wbr{}อย่าง.

\begin{MyExample}[Quoting แบบ\wbr{}ต่างๆ.]
\begin{MyEx}
$ \cin{cat -n quote.sh}
     1  #!/bin/sh
     2  echo "Today is `date`."
     3  echo "UID is $UID."
     4  echo "Dollar sign \bs{}$, Back quote \bs{}`, Double quote \bs{}", Backslash \bs{}\bs{}"
     5  echo "There is no special meaning \bs{}n"
     6  echo 'Dollar signe \bs{}$, Back quote \bs{}`, Double quote \bs{}", Backslash \bs{}\bs{}'
$ \cin{./quote.sh}
Today is Thu Oct  7 22:24:24 JST 2004.
UID is 1000.
Dollar sign $, Back quote `, Double quote ", Backslash \bs
There is no special meaning \bs{}n
Dollar signe \bs{}$, Back quote \bs{}`, Double quote \bs{}", Backslash \bs\bs
\end{MyEx}
\end{MyExample}%$

สำหรับ\wbr{}อักขระ\wbr{}ที่\wbr{}ไม่\wbr{}สามารถ\wbr{}พิมพ์\wbr{}ด้วย\wbr{}แป้น\wbr{}พิมพ์\wbr{}สามารถ\wbr{}เขียน\wbr{}ได้\wbr{}ด้วย\wbr{}เขียน\wbr{}เครื่อง\wbr{}หมาย \cmd{\$} แล้ว\wbr{}ตาม\wbr{}ด้วย \cmd{'\textit{string}'} โดย\wbr{}ที่ \cmdit{string} เป็น\wbr{}สาย\wbr{}อักขระ escape sequence ที่\wbr{}แสดง\wbr{}ตา\wbr{}ราง\wbr{}ที่ \ref{tab:escape_char}.

\begin{table}[!htb]
\center
\caption{วีธี\wbr{}ใช้\wbr{}อักขระ\wbr{}พิเศษ\wbr{}ใน\wbr{}เชลล์.}\label{tab:escape_char}
\medskip
\begin{tabular}{lll}
\toprule
\multicolumn{1}{c}{สาย\wbr{}อักขระ}  & \multicolumn{1}{c}{วิธี\wbr{}ใช้} & \multicolumn{1}{c}{ความ\wbr{}หมาย}\\
\midrule
\cmd{\bs{}a} & \cmd{\$'\bs{}a'} & alert เสียง\wbr{}กระดิ่ง.\\
\cmd{\bs{}b} & \cmd{\$'\bs{}b'} & backspace.\\
\cmd{\bs{}e} & \cmd{\$'\bs{}e'} & escape.\\
\cmd{\bs{}f} & \cmd{\$'\bs{}f'} & form feed.\\
\cmd{\bs{}n} & \cmd{\$'\bs{}n'} & new line.\\
\cmd{\bs{}r} & \cmd{\$'\bs{}r'} & carriage return.\\
\cmd{\bs{}t} & \cmd{\$'\bs{}t'} & (horizontal) tab.\\
\cmd{\bs{}v} & \cmd{\$'\bs{}v'} & vertical tab.\\
\cmd{\bs{}'} & \cmd{\$'\bs{}''} & single quote.\\
\cmd{\bs{}\textit{nnn}} & \cmd{\$'\bs{}\textit{nnn}'} & อักขระ\wbr{}แสดง\wbr{}ด้วย\wbr{}เลข\wbr{}ฐาน\wbr{}แปด \cmdit{nnn}.\\
\cmd{\bs{}x\textit{HH}} & \cmd{\$'\bs{}x\textit{HH}'} & อักขระ\wbr{}แสดง\wbr{}ด้วย\wbr{}เลข\wbr{}ฐาน\wbr{}สิบ\wbr{}หก \cmdit{HH}.\\
\cmd{\bs{}c\textit{x}} & \cmd{\$'\bs{}c\textit{x}'} & อักขระ control-\cmdit{x}.\\
\bottomrule
\end{tabular}
\end{table}

\begin{MyExample}[ใช้\wbr{}ตัว\wbr{}อักขระ\wbr{}พิเศษ\wbr{}ใน\wbr{}เชลล์สค\wbr{}ริปต์.]
\begin{MyEx}
$ \cin{cat -n tab_nl.sh}
     1  #!/bin/sh
     2  echo a$'\bs{}t'b # a<tab>b
     3  echo a$'\bs{}n'b # a<newline>b
$ \cin{./tab_nl.sh}
a       b
a
b
\end{MyEx}
\end{MyExample}


\subsection{แถว\wbr{}ลำดับ}
\emph{แถว\wbr{}ลำดับ (array)}\gindex{แถว\wbr{}ลำดับ}\gindex{array} เป็น\wbr{}ตัวแปร\wbr{}ที่\wbr{}เก็บ\wbr{}ข้อ\wbr{}มูล\wbr{}เป็น\wbr{}ลำดับ\wbr{}โดย\wbr{}ใช้\wbr{}เลข\emph{ดรรชนี (index)} ระบุ\wbr{}ตำแหน่ง\wbr{}ของ\wbr{}ข้อ\wbr{}มูล\wbr{}ที่\wbr{}ต้องการ. ดรรชนี\wbr{}ของ\wbr{}ตัวแปร\wbr{}แถว\wbr{}ลำดับ\wbr{}จะ\wbr{}เริ่ม\wbr{}ต้น\wbr{}จาก 0. การ\wbr{}สร้าง\wbr{}แถว\wbr{}ลำดับ\wbr{}ใน\wbr{}เชลล์\wbr{}จะ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง\wbr{}ภาย\wbr{}ใน \cmd{declare}\cindex{declare} ประกาศ\wbr{}ตัวแปร\wbr{}ให้\wbr{}เป็น\wbr{}ตัวแปร\wbr{}แถว\wbr{}ลำดับ.
\begin{MyVerbatim}
declare -a \textit{myArr} \mycomment{\cmd{-a} หมาย\wbr{}ถึง array}
\end{MyVerbatim}
หรือ\wbr{}จะ\wbr{}กำหนด\wbr{}ค่า\wbr{}ไป\wbr{}เลย
\begin{MyVerbatim}
\textit{myArr}[\textit{index}]=\textit{value} \mycomment{\cmdit{index} จะ\wbr{}เริ่ม\wbr{}จาก\wbr{}ตัว\wbr{}เลข\wbr{}อะไร\wbr{}ก็\wbr{}ได้}
\end{MyVerbatim}
เรา\wbr{}สามารถ\wbr{}กำหนด\wbr{}ค่า\wbr{}ของ\wbr{}สมาชิก\wbr{}ใน\wbr{}แถว\wbr{}ลำดับ\wbr{}พร้อมๆ\wbr{}กัน\wbr{}ได้\wbr{}โดย\wbr{}ใช้\wbr{}เครื่อง\wbr{}หมา\wbr{}ยวง\wbr{}เล็บ, แล้ว\wbr{}กำหนด\wbr{}ค่า\wbr{}ของ\wbr{}แถว\wbr{}ลำดับ\wbr{}แต่\wbr{}ละ\wbr{}ตำแหน่ง\wbr{}โดย\wbr{}ใช้\wbr{}ช่อง\wbr{}ว่าง\wbr{}คั่น.
\begin{MyVerbatim}
\textit{myArr}=(\textit{value1} \textit{value2} ...)
\end{MyVerbatim}

การ\wbr{}อ้าง\wbr{}อิง\wbr{}ตัวแปร\wbr{}แถว\wbr{}ลำดับ\wbr{}จะ\wbr{}ใช้\wbr{}วง\wbr{}เล็บ\wbr{}ปีก\wbr{}กาคล่\wbr{}อม\wbr{}ตัวแปร.
\begin{MyVerbatim}
$\{\textit{myArr}[\textit{index}]\}
\end{MyVerbatim}

%$
ตัว\wbr{}อย่าง\wbr{}เชลล์สค\wbr{}ริปต์\wbr{}ต่อ\wbr{}ไป\wbr{}จะ\wbr{}แสดง\wbr{}ผล\wbr{}สุ่ม\wbr{}ซึ่ง\wbr{}จะ\wbr{}ให้\wbr{}ผล\wbr{}ไม่\wbr{}เหมือน\wbr{}กัน\wbr{}แต่\wbr{}ละ\wbr{}ครั้ง\wbr{}ที่\wbr{}กระทำ\wbr{}การ.
\begin{MyExample}[การ\wbr{}ใช้\wbr{}ตัวแปร\wbr{}แถว\wbr{}ลำดับ\wbr{}ใน\wbr{}เชลล์.]
\begin{MyEx}
$ \cin{cat lucky_color.sh}
     1  #!/bin/sh
     2  color=( "red"
     3          "green"
     4          "blue"
     5          "white"
     6          "black"
     7          "yellow"
     8          "pink" )
     9  echo Your lucky color is $\{color[$(($RANDOM % 7))]\}.
$ \cin{./lucky_color.sh}
Your lucky color is blue.
$ \cin{./lucky_color.sh}
Your lucky color is pink.
\end{MyEx}
\end{MyExample}
%
เชลล์สค\wbr{}ริปต์\wbr{}นี้\wbr{}ใน\wbr{}ช่วง\wbr{}แรก\wbr{}เป็น\wbr{}การ\wbr{}สร้าง\wbr{}ตัวแปร\wbr{}แถว\wbr{}ลำดับ\wbr{}ชื่อ \cmd{color} มี\wbr{}สมาชิก 7 ตัว. การ\wbr{}แสดง\wbr{}ผล\wbr{}ใช้ \cmd{echo} แสดง\wbr{}ค่า\wbr{}ของ\wbr{}ตัวแปร\wbr{}โดย\wbr{}ที่\wbr{}ดรรชนี\wbr{}ของ\wbr{}แถว\wbr{}ลำดับ\wbr{}มา\wbr{}จาก\wbr{}ค่า\wbr{}สุ่ม\wbr{}ตัวแปร \cmd{\$RANDOM}. เนื่อง\wbr{}จาก\wbr{}เรา\wbr{}ต้องการ\wbr{}ดรรชนี\wbr{}ของ\wbr{}แถว\wbr{}ลำดับ\wbr{}ให้\wbr{}มี\wbr{}ค่า\wbr{}สุ่ม\wbr{}ตั้ง\wbr{}แต่ 0 ถึง 6 จึง\wbr{}ใช้\wbr{}การ\wbr{}หา\wbr{}เศษ\wbr{}จาก\wbr{}การ\wbr{}หาร\wbr{}ด้วย 7 เป็น\wbr{}ดรรชนี.

\subsection{การ\wbr{}ควบ\wbr{}คุม\wbr{}ขั้น\wbr{}ตอน\wbr{}คำ\wbr{}สั่ง}
ภาษา\wbr{}คอมพิวเตอร์\wbr{}ทั่ว\wbr{}ไป\wbr{}จะ\wbr{}มี\wbr{}ไวย\wbr{}กรณ์\wbr{}สำหรับ\wbr{}ควบ\wbr{}คุม\wbr{}ขั้น\wbr{}ตอน\wbr{}การ\wbr{}ทำ\wbr{}งาน. เชลล์\wbr{}ก็\wbr{}มี\wbr{}ไวย\wbr{}กรณ์\wbr{}สำหรับ\wbr{}ควบ\wbr{}คุม\wbr{}การ\wbr{}ทำ\wbr{}งาน\wbr{}เช่น\wbr{}กัน\wbr{}แต่\wbr{}จะ\wbr{}เรีย\wbr{}กว่า\wbr{}เป็น\emph{คำ\wbr{}สั่ง\wbr{}ผสม (compound command)}\gindex{คำ\wbr{}สั่ง\wbr{}ผสม}\gindex{compound commands} ไม่\wbr{}ใช่\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}พิมพ์\wbr{}หลัง\wbr{}เชลล์\wbr{}พร\wbr{}อมต์\wbr{}แล้ว\wbr{}ใช้\wbr{}งาน\wbr{}ได้\wbr{}ทัน\wbr{}ที. ต้อง\wbr{}มี\wbr{}คำ, อาร์กิวเ\wbr{}มนต์\wbr{}ส่วน\wbr{}อื่นๆ\wbr{}ประกอบ\wbr{}กัน\wbr{}จึง\wbr{}จะ\wbr{}ใช้\wbr{}ได้.
\subsubsection{เงื่อน\wbr{}ไข}
การ\wbr{}แบ่ง\wbr{}การ\wbr{}ทำ\wbr{}งาน\wbr{}โดย\wbr{}ใช้\wbr{}เงื่อน\wbr{}ไข\wbr{}ใน\wbr{}เชลล์\wbr{}จะ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{if}\cindex{if}
\begin{MyVerbatim}
if \textit{list}; then \textit{list}; [ elif \textit{list}; then \textit{list}; ] ... [ else \textit{list}; ] fi
\end{MyVerbatim}
เครื่อง\wbr{}หมาย \cmd{;} เป็น\wbr{}ตัว\wbr{}แบ่ง\wbr{}คำ\wbr{}สั่ง\wbr{}ซึ่ง\wbr{}จะ\wbr{}เป็น\wbr{}การ\wbr{}ขึ้น\wbr{}บรรทัด\wbr{}ใหม่\wbr{}ก็\wbr{}ได้. ดัง\wbr{}นั้น\wbr{}จึง\wbr{}สามารถ\wbr{}เขียน\wbr{}ให้\wbr{}เข้า\wbr{}ใจ\wbr{}ง่าย\wbr{}ขึ้น\wbr{}ดัง\wbr{}นี้.
\begin{MyVerbatim}
if \textit{list}
    then
    \textit{list}
    ...
[ elif \textit{list}
    then
    \textit{list} ]
    ...
[ else
    \textit{list} ]
    ...
fi
\end{MyVerbatim}
คำ\wbr{}สั่ง\wbr{}ที่\wbr{}อยู่\wbr{}ใน\wbr{}เครื่อง\wbr{}หมาย\wbr{}ปีก\wbr{}กา\wbr{}เหลี่ยม\wbr{}เป็น\wbr{}ตัว\wbr{}เลือก\wbr{}คือ\wbr{}จะ\wbr{}มี\wbr{}หรือ\wbr{}ไม่\wbr{}มี\wbr{}ก็\wbr{}ได้\wbr{}แล้ว\wbr{}แต่\wbr{}กรณี. เวลา\wbr{}ใช้\wbr{}งาน\wbr{}จริง\wbr{}ไม่\wbr{}ต้อง\wbr{}เขียน\wbr{}วง\wbr{}เล็บ\wbr{}เหลี่ยม. \cmdit{list} เป็น\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}ใช้\wbr{}ใน\wbr{}เชลล์.

บรรทัด \cmd{if \textit{list}} เป็น\wbr{}การ\wbr{}สร้าง\wbr{}เงื่อน\wbr{}ไข, ถ้า\wbr{}สถานะ\wbr{}จบ\wbr{}การ\wbr{}ทำ\wbr{}งาน\wbr{}ของ \cmdit{list} เป็น\wbr{}ศูนย์ (ไม่\wbr{}มี\wbr{}ข้อ\wbr{}ผิด\wbr{}พลาด) ก็\wbr{}จะ\wbr{}กระทำ\wbr{}การ\wbr{}คำ\wbr{}สั่ง \cmdit{list} ที่\wbr{}ตาม\wbr{}หลัง \cmd{then} ต่อ\wbr{}ไป. ใน\wbr{}ทาง\wbr{}กลับ\wbr{}กัน\wbr{}ถ้า\wbr{}สถานะ\wbr{}จบ\wbr{}การ\wbr{}ทำ\wbr{}งาน\wbr{}ของ \cmdit{list} ใน\wbr{}บรรทัด \cmd{if \textit{list}} ไม่\wbr{}เป็น\wbr{}ศูนย์ (มี\wbr{}ข้อ\wbr{}ผิด\wbr{}พลาด), ก็\wbr{}จะ\wbr{}กระทำ\wbr{}การ\wbr{}บรรทัด \cmd{elif} หรือ \cmd{else} ต่อ\wbr{}ไป. การ\wbr{}จบ\wbr{}คำ\wbr{}สั่ง \cmd{if} จะ\wbr{}ลง\wbr{}ท้าย\wbr{}ด้วย \cmd{fi} ซึ่ง\wbr{}เป็น\wbr{}การ\wbr{}กลับ\wbr{}ตัว\wbr{}อักษร\wbr{}ของ \cmd{if}.

\begin{MyExample}[การ\wbr{}ใช้ \cmd{if} ใน\wbr{}เชลล์สค\wbr{}ริปต์.]
\begin{MyEx}
$ \cin{cat -n if_sample.sh}
     1  #!/bin/sh
     2  if [ $UID -eq 0 ]
     3      then
     4      echo You are root.
     5  else
     6      echo You are `awk -F: "/^.*:.*:$UID:/ {print \bs\bs{}$1}" /etc/passwd`.
     7  fi
$ \cin{./if_sample.sh}
You are poonlap.
\end{MyEx}
\end{MyExample}%$

\medskip
คำ\wbr{}สั่ง\wbr{}ที่\wbr{}ใช้\wbr{}กำหนด\wbr{}เงื่อน\wbr{}ไข\wbr{}อีก\wbr{}แบบ\wbr{}คือ \cmd{case}\cindex{case}. การ\wbr{}ใช้ \cmd{case} จะ\wbr{}เป็น\wbr{}การ\wbr{}จับ\wbr{}คู่\wbr{}ระหว่าง\wbr{}คำ\wbr{}กับ\wbr{}แบบ\wbr{}อย่าง\wbr{}ที่\wbr{}กำหนด\wbr{}ไว้, สะดวก\wbr{}กว่า\wbr{}การ\wbr{}ใช้ \cmd{if} ใน\wbr{}กรณี\wbr{}ที่\wbr{}แบ่ง\wbr{}กรณี\wbr{}เน้น\wbr{}การ\wbr{}จับ\wbr{}คู่. เครื่อง\wbr{}หมาย \cmd{;;} เป็น\wbr{}การ\wbr{}บอก\wbr{}ให้\wbr{}เชลล์\wbr{}รู้\wbr{}ว่า\wbr{}จบ\wbr{}คำ\wbr{}สั่ง\wbr{}ของ\wbr{}แบบ\wbr{}อย่าง\wbr{}ที่\wbr{}จับ\wbr{}คู่\wbr{}ได้.
\begin{MyVerbatim}
case \textit{word}
in
    \textit{pattern})
    \textit{list};;
    ...
esac
\end{MyVerbatim}

ต่อ\wbr{}ไป\wbr{}นี้\wbr{}เป็น\wbr{}ตัว\wbr{}อย่าง\wbr{}การ\wbr{}ใช้ \cmd{case}\cindex{case} พิจารณา\wbr{}ค่า\wbr{}ตัวแปร\wbr{}ที่\wbr{}รับ\wbr{}มา\wbr{}จาก\wbr{}การ\wbr{}ป้อน\wbr{}ข้อ\wbr{}มูล\wbr{}ของ\wbr{}ผู้\wbr{}ใช้\wbr{}แล้ว\wbr{}แยก\wbr{}กรณี\wbr{}ตาม\wbr{}อักษร\wbr{}ที่\wbr{}รับ\wbr{}มา.
\begin{MyExample}[การ\wbr{}ใช้ \cmd{case} ใน\wbr{}เชลล์สค\wbr{}ริปต์.]
\begin{MyEx}
$ \cin{cat -n case_sample.sh}
     1  #!/bin/sh
     2  echo Please select one letter
     3  echo "a b c"
     4  while [ 1 ] \mycomment{วง\wbr{}วน\wbr{}ไม่\wbr{}รู้\wbr{}จบ}
     5  do
     6  echo -n "> "
     7  read x
     8  case $x
     9  in
    10      a)
    11      echo You selected a.
    12      break;; \mycomment{สำหรับ\wbr{}ออก\wbr{}จาก\wbr{}วง\wbr{}วน \cmd{while}}
    13      b)
    14      echo You selected b.
    15      break;;
    16      c)
    17      echo You selected c.
    18      break;;
    19      *) \mycomment{จับ\wbr{}คู่ \cmd{$x} กับ\wbr{}อะไร\wbr{}ก็\wbr{}ได้}
    20      echo Please select again.;;
    21  esac
    22  done
$ \cin{./case_sample.sh}
Please select one letter
a b c
> d
Please select again.
> a
You selected a.
\end{MyEx}
\end{MyExample}%$
ให้\wbr{}สังเกต\wbr{}ว่า\wbr{}ถ้า\wbr{}ค่า \cmd{\$x} จับ\wbr{}คู่\wbr{}กับ\wbr{}คำ\wbr{}ที่\wbr{}แบ่ง\wbr{}เงื่อน\wbr{}ไข\wbr{}เช่น \cmd{a} แล้ว\wbr{}ก็\wbr{}จะ\wbr{}กระทำ\wbr{}การ\wbr{}เฉพาะ\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}อยู่\wbr{}ใน\wbr{}ช่วง\wbr{}นั้น\wbr{}เท่า\wbr{}นั้น, จะ\wbr{}ไม่\wbr{}จับ\wbr{}คู่\wbr{}กับ \cmd{*} ซึ่ง\wbr{}อยู่\wbr{}ถัด\wbr{}ไป\wbr{}อีก.

\subsubsection{วง\wbr{}วน}
วง\wbr{}วน\wbr{}ที่\wbr{}ใช้\wbr{}ใน\wbr{}เชลล์\wbr{}มี\wbr{}หลาย\wbr{}เหมือน\wbr{}หรือ\wbr{}คล้าย\wbr{}กับ\wbr{}ภาษา\wbr{}คอมพิวเตอร์\wbr{}อื่นๆ\wbr{}ได้\wbr{}แก่ \cmd{for}, \cmd{while} และ \cmd{until}.

วง\wbr{}วน\wbr{}คำ\wbr{}สั่ง \cmd{for}\cindex{for} มี\wbr{}ไวย\wbr{}กรณ์ 2 แบบ. แบบ\wbr{}แรก\wbr{}จะ\wbr{}สร้าง\wbr{}ตัวแปร \cmdit{variable} สำหรับ\wbr{}ใช้\wbr{}ใน\wbr{}วง\wbr{}วน \cmd{for}. ใน\wbr{}แต่\wbr{}ละ\wbr{}รอบ\wbr{}ของ\wbr{}กา\wbr{}รวน\wbr{}ค่า\wbr{}ของ\wbr{}ตัวแปร \cmdit{variable} จะ\wbr{}เปลี่ยน\wbr{}ตาม\wbr{}ค่าที่\wbr{}กำหนด\wbr{}ไว้\wbr{}ใน \cmdit{list} ตาม\wbr{}ลำดับ. \cmd{list} นี้\wbr{}จะ\wbr{}เป็น\wbr{}ชุด\wbr{}ของ\wbr{}คำ\wbr{}หรือ\wbr{}ค่า\wbr{}หลาย\wbr{}ตัว\wbr{}แบ่ง\wbr{}ด้วย\wbr{}ช่อง\wbr{}ว่าง. วง\wbr{}วน \cmd{for} แบบ\wbr{}แรก\wbr{}มี\wbr{}รูป\wbr{}แบบ\wbr{}ดัง\wbr{}นี้.
\begin{MyVerbatim}
for \textit{variable} in \textit{list}
do
    \textit{command}
    ...
done
\end{MyVerbatim}

ตัว\wbr{}อย่าง\wbr{}ต่อ\wbr{}ไป\wbr{}นี้\wbr{}เป็นสค\wbr{}ริปต์\wbr{}สำหรับ\wbr{}แปลง\wbr{}ไฟล์\wbr{}รูป\wbr{}ภาพ gif%
\myvocab{g}{gif}{เป็น\wbr{}คำ\wbr{}ย่อ\wbr{}ของ Graphics Interchange Format ฟอร์แ\wbr{}มต\wbr{}ไฟล์\wbr{}รูป\wbr{}ภาพ\wbr{}บิตแมป\wbr{}สี. มี\wbr{}การ\wbr{}อัด\wbr{}บีบ\wbr{}ข้อ\wbr{}มูล, ใช้\wbr{}ดรรชนี\wbr{}สี\wbr{}แสดง\wbr{}สี\wbr{}ที่\wbr{}มี\wbr{}อยู่\wbr{}ใน\wbr{}รูป. ไฟล์\wbr{}รูป\wbr{}แบบ\wbr{}นี้\wbr{}เป็น\wbr{}นิยม\wbr{}ใช้\wbr{}ในเว็บ\wbr{}แต่\wbr{}หลัง\wbr{}จาก\wbr{}ที่\wbr{}มี\wbr{}ปัญหา\wbr{}สิทธิ\wbr{}บัตร\wbr{}เกี่ยว\wbr{}กับ\wbr{}การ\wbr{}บีบ\wbr{}อัด\wbr{}ข้อ\wbr{}มูล, ไฟล์\wbr{}รูป\wbr{}แบบ\wbr{}อื่น\wbr{}เช่น jpg และ png ก็\wbr{}เป็น\wbr{}ที่\wbr{}นิยม\wbr{}ถัด\wbr{}มา.}%
ให้\wbr{}เป็น\wbr{}ไฟล์\wbr{}รูป\wbr{}ภาพ jpg.%
\myvocab{j}{jpg}{เป็น\wbr{}คำ\wbr{}ย่อ\wbr{}ของ Joint Photographic Experts Group. รูป\wbr{}ภาพ\wbr{}แบบ\wbr{}บิตแมป\wbr{}ที่\wbr{}มี\wbr{}การ\wbr{}อัด\wbr{}บีบ\wbr{}ข้อ\wbr{}มูล\wbr{}และ\wbr{}มัก\wbr{}ใช้\wbr{}กับ\wbr{}ไฟล์\wbr{}รูป\wbr{}ภาพ\wbr{}บน\wbr{}อินเ\wbr{}ทอร์เน็ต.}%

\begin{MyExample}[ตัว\wbr{}อย่าง\wbr{}เชลล์สค\wbr{}ริปต์\wbr{}ที่\wbr{}ใช้ \cmd{for}.]\label{ex:shellconvert}
\begin{MyEx}
$ \cin{cat -n gif2jpg.sh}
     1  #!/bin/sh
     2  CONVERT=/usr/bin/convert
     3  for file in $*
     4  do
     5      echo Converting $file to jpg ...
     6      $CONVERT $file `basename $file .gif`.jpg
     7  done
$ \cin{ls -F}
gif2jpg.sh*  pic01.gif  pic02.gif
$ \cin{./gif2jpg.sh pic*gif}
Converting pic01.gif to jpg ...
Converting pic02.gif to jpg ...
$ \cin{ls -F}
gif2jpg.sh*  pic01.gif  pic01.jpg  pic02.gif  pic02.jpg
\end{MyEx}
\end{MyExample}%$


วง\wbr{}วน \cmd{for} แบบ\wbr{}ที่\wbr{}สอง\wbr{}คล้าย\wbr{}กับ\wbr{}วง\wbr{}วน \cmd{for} ใน\wbr{}ภาษา\wbr{}ซี, คือ\wbr{}จะ\wbr{}มี\wbr{}นิพจน์\wbr{}สาม\wbr{}ส่วน\wbr{}ซึ่ง\wbr{}มี\wbr{}รูป\wbr{}แบบ\wbr{}ดัง\wbr{}ต่อ\wbr{}ไป\wbr{}นี้.
%ได้\wbr{}แก่\wbr{}ส่วน\wbr{}ที่\wbr{}ตั้ง\wbr{}ค่า\wbr{}ตัวแปร\wbr{}สำหรับ\wbr{}วน\wbr{}รอบ, เงื่อน\wbr{}ไข\wbr{}สำหรับ\wbr{}จบ\wbr{}กา\wbr{}รวน, และ\wbr{}การ\wbr{}เปลี่ยน\wbr{}แปลง\wbr{}ของ\wbr{}ตัวแปร\wbr{}นั้น.

\begin{MyVerbatim}
for (( \textit{expr1} ; \textit{expr2} ; \textit{expr3} ))
do
    \textit{command}
    ...
done
\end{MyVerbatim}
นิพจน์ \cmd{expr1}, \cmd{expr2} และ \cmd{expr3} เป็น\wbr{}นิพจน์\wbr{}ที่\wbr{}เกี่ยว\wbr{}กับ\wbr{}การ\wbr{}คำนวณ\wbr{}ตัวแปร\wbr{}ใน\wbr{}แต่\wbr{}ละ\wbr{}รอบ, สามารถ\wbr{}ใช้\wbr{}ตัว\wbr{}ปฏิบัติ\wbr{}ที่\wbr{}แสดง\wbr{}ใน\wbr{}ตา\wbr{}ราง\wbr{}ที่ \ref{tab:shellop}. เมื่อ\wbr{}เข้า\wbr{}สู่\wbr{}วง\wbr{}วน \cmd{for}, เชลล์\wbr{}จะ\wbr{}ตี\wbr{}ความ \cmd{expr1} เป็น\wbr{}อันดับ\wbr{}แรก, และ\wbr{}จะ\wbr{}ตี\wbr{}ความ \cmd{expr2} เป็น\wbr{}เรื่อยๆ\wbr{}จน\wbr{}กว่า\wbr{}ค่า\wbr{}สถานะ\wbr{}จบ\wbr{}การ\wbr{}ทำ\wbr{}งาน\wbr{}ของ \cmd{expr2} เป็น\wbr{}ศูนย์, ถ้า\wbr{}ไม่\wbr{}เป็น\wbr{}ศูนย์\wbr{}ก็\wbr{}จะ\wbr{}ตี\wbr{}ความ \cmd{expr3} ต่อ\wbr{}ไป.

\begin{MyExample}[เชลล์สค\wbr{}ริปต์\wbr{}แสดง\wbr{}ลำดับ Fibonacci]\label{ex:fibonacci_shell}
\begin{MyEx}
$ \cin{cat -n fibonacci.sh}
     1  #!/bin/sh
     2  n=$1
     3  for (( i=0 ; $i < $n ; i++ ))
     4  do
     5          if [ $i = 0 ]
     6          then
     7                  echo -n "1 "
     8                  aa=0
     9                  a=1
    10          else
    11                  w=$(($aa+$a))
    12                  echo -n "$w "
    13                  aa=$a
    14                  a=$w
    15
    16          fi
    17  done
$ \cin{./fibonacci.sh 20}
1 1 2 3 5 8 13 21 34 55 89 144 233 377 610 987 1597 2584 4181 6765
\end{MyEx}
\end{MyExample}%$

เชลล์สค\wbr{}ริปต์\wbr{}ที่\wbr{}แสดง\wbr{}ใน\wbr{}ตัว\wbr{}อย่าง\wbr{}ที่ \ref{ex:fibonacci_shell} จะ\wbr{}แสดง\wbr{}ลำดับ Fibonacci\mymemo{Fibonacci เป็น\wbr{}ลำดับ\wbr{}ที่\wbr{}ค่า\wbr{}ของ\wbr{}ลำดับ\wbr{}ตัว\wbr{}สุด\wbr{}ท้าย\wbr{}จะ\wbr{}เป็น\wbr{}ผล\wbr{}บวก\wbr{}สอง\wbr{}ตัว\wbr{}ของ\wbr{}ลำดับ\wbr{}ก่อน\wbr{}หน้า\wbr{}นั้น, เช่น $5 = 3+2$.} ตาม\wbr{}จำนวน\wbr{}ที่\wbr{}ระบุ\wbr{}เป็น\wbr{}อาร์กิวเ\wbr{}มนต์\wbr{}ของสค\wbr{}ริปต์. ในสค\wbr{}ริปต์\wbr{}จะ\wbr{}ใช้\wbr{}วง\wbr{}วน \cmd{for} จะ\wbr{}เปลี่ยน\wbr{}ค่า\wbr{}ตัวแปร \cmd{i} จน\wbr{}ครบ\wbr{}ตาม\wbr{}จำนวน\wbr{}ที่\wbr{}ระบุ.

\medskip
วง\wbr{}วน \cmd{while}\cindex{while} และ \cmd{until}\cindex{until} เป็น\wbr{}วง\wbr{}วน\wbr{}ที่\wbr{}กระทำ\wbr{}การ\wbr{}ไป\wbr{}เรื่อยๆ\wbr{}จน\wbr{}กว่า\wbr{}ข้อ\wbr{}แม้\wbr{}ที่\wbr{}กำหนด\wbr{}จะ\wbr{}เป็น\wbr{}เท็จ (ค่า\wbr{}สถานะ\wbr{}จบ\wbr{}การ\wbr{}ทำ\wbr{}งาน\wbr{}ไม่\wbr{}เท่า\wbr{}กับ 0). วง\wbr{}วน \cmd{until} จะ\wbr{}คล้าย\wbr{}กับ \cmd{while} เพียง\wbr{}แต่\wbr{}ช่วง\wbr{}ที่\wbr{}ตรวจ\wbr{}สอบ\wbr{}ข้อ\wbr{}แม้\wbr{}จะ\wbr{}เป็น\wbr{}การ\wbr{}ตรวจ\wbr{}สอบ\wbr{}แบบ\wbr{}นิ\wbr{}เทส (negation).
\begin{MyVerbatim}
while \textit{condition}
do
    \textit{command}
    ...
done
\end{MyVerbatim}
\begin{MyVerbatim}
until \textit{condition}
do
    \textit{command}
    ...
done
\end{MyVerbatim}
\begin{MyExample}[การ\wbr{}ใช้ \cmd{while} ใน\wbr{}เชลล์สค\wbr{}ริปต์.]
\begin{MyEx}
$ \cin{cat -n fibonacci_while.sh}
     1  #!/bin/sh
     2  n=$1
     3  i=0 # \thtt{กำหนด\wbr{}ค่า} i \thtt{ก่อน\wbr{}เข้า\wbr{}วง\wbr{}วน}
     4  while (($i < $n)) # \thtt{หรือ} [ $i -lt $n]
     5  do
     6          if (($i == 0)) # \thtt{หรือ} [ $i = 0 ]
     7          then
     8                  echo -n "1 "
     9                  aa=0
    10                  a=1
    11          else
    12                  w=$(($aa+$a))
    13                  echo -n "$w "
    14                  aa=$a
    15                  a=$w
    16
    17          fi
    18          ((i++)) # \thtt{เพิ่ม\wbr{}ค่า} i \thtt{เพื่อ\wbr{}ใช้\wbr{}ใน\wbr{}รอบ\wbr{}ต่อ\wbr{}ไป}
    19  done
    20  echo
$ \cin{./fibonacci_while.sh 20}
1 1 2 3 5 8 13 21 34 55 89 144 233 377 610 987 1597 2584 4181 6765
\end{MyEx}
\end{MyExample}%$
ตัว\wbr{}อย่าง\wbr{}ข้าง\wbr{}บน\wbr{}แสดง\wbr{}ลำดับ Fibonacci เหมือน\wbr{}กับ\wbr{}ตัว\wbr{}อย่าง\wbr{}ที่ \ref{ex:fibonacci_shell} แต่\wbr{}ใช้\wbr{}วง\wbr{}วน \cmd{while} แทน \cmd{for}.



\subsection{ฟังก์ชัน}
เรา\wbr{}สามารถ\wbr{}นิยาม\wbr{}ฟังก์ชัน\wbr{}ได้\wbr{}ด้วย\wbr{}คำ\wbr{}สั่ง \cmd{funtion} คล้าย\wbr{}กับ\wbr{}ภาษา\wbr{}คอมพิวเตอร์\wbr{}อื่นๆ.
\begin{MyVerbatim}
[ function ] \textit{name} () \{
    \textit{command}
    ...
\}
\end{MyVerbatim}
คำ\wbr{}ว่า \cmd{function}\cindex{function} เป็น\wbr{}ตัว\wbr{}เลือก\wbr{}ซึ่ง\wbr{}จะ\wbr{}เขียน\wbr{}หรือ\wbr{}ไม่\wbr{}ก็\wbr{}ได้. หลัง\wbr{}จาก\wbr{}ที่\wbr{}นิยาม\wbr{}ฟังก์ชัน\wbr{}แล้\wbr{}วจะ\wbr{}สามารถ\wbr{}ใช้\wbr{}ชื่อ\wbr{}ฟังก์ชัน\wbr{}นั้น\wbr{}ได้\wbr{}เหมือน\wbr{}กับ\wbr{}คำ\wbr{}สั่ง\wbr{}ทั่ว\wbr{}ไป. ตัวแปร \cmd{\$1}, \cmd{\$2}, ... เป็น\wbr{}ตัวแปร\wbr{}ที่\wbr{}ใช้\wbr{}ใน\wbr{}การ\wbr{}อ้าง\wbr{}อิง\wbr{}ค่า\wbr{}ของ\wbr{}อาร์กิวเ\wbr{}มนต์\wbr{}ของ\wbr{}ฟังก์ชัน.

\begin{MyExample}[การ\wbr{}นิยาม\wbr{}ฟังก์ชัน\wbr{}ใน\wbr{}เชลล์.]
\begin{MyEx}
$ \cin{cat -n fibonacci_function.sh}
     1  #!/bin/sh
     2  function fibonacci () \{
     3      local n=$1
     4      local i=0
     5      local aa a w
     6
     7      while (($i < $n))
     8        do
     9        if (($i == 0))
    10            then
    11            echo -n "1 "
    12            aa=0
    13            a=1
    14        else
    15            w=$(($aa+$a))
    16            echo -n "$w "
    17            aa=$a
    18            a=$w
    19
    20        fi
    21        ((i++))
    22      done
    23      echo
    24  \}
    25
    26  fibonacci $1
$ \cin{./fibonacci_function.sh 20}
1 1 2 3 5 8 13 21 34 55 89 144 233 377 610 987 1597 2584 4181 6765
\end{MyEx}
\end{MyExample}%$

จาก\wbr{}ตัว\wbr{}อย่าง\wbr{}ข้าง\wbr{}บน\wbr{}มี\wbr{}การ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{local}\cindex{local} เป็น\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}ระบุ\wbr{}ตัวแปร\wbr{}ที่\wbr{}ใช้\wbr{}ว่า\wbr{}เป็น\emph{ตัวแปร\wbr{}เฉพาะ\wbr{}ที่ (local variable)} ใช้\wbr{}ใน\wbr{}ฟังก์ชัน\wbr{}เท่า\wbr{}นั้น. ตัวแปร\wbr{}ที่\wbr{}ประกาศ\wbr{}ด้วย\wbr{}คำ\wbr{}สั่ง \cmd{local} จะ\wbr{}ไม่\wbr{}สามารถ\wbr{}อ้าง\wbr{}อิง, ตั้ง\wbr{}ค่า\wbr{}ใหม่\wbr{}นอก\wbr{}ฟังก์ชัน. ถ้า\wbr{}ไม่\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{local} ช่วย\wbr{}นิยาม\wbr{}ตัวแปร, ตัวแปร\wbr{}นั้น\wbr{}จะ\wbr{}เป็น\emph{ตัวแปร\wbr{}ส่วน\wbr{}กลาง (global variable)} คือ\wbr{}ใช้\wbr{}อ้าง\wbr{}อิง, ตั้ง\wbr{}ค่า\wbr{}จาก\wbr{}ที่\wbr{}ไหน\wbr{}ก็\wbr{}ได้\wbr{}ในสค\wbr{}ริปต์.

นอก\wbr{}จาก\wbr{}การ\wbr{}นิยาม\wbr{}ฟังก์ชัน\wbr{}ใน\wbr{}เชลล์สค\wbr{}ริปต์\wbr{}แล้ว, เรา\wbr{}ยัง\wbr{}สามารถ\wbr{}นิยาม\wbr{}ฟังก์ชัน\wbr{}ใน\wbr{}ไฟล์\wbr{}ตั้ง\wbr{}ค่า\wbr{}เริ่ม\wbr{}ต้น\wbr{}ของ\wbr{}เชลล์\wbr{}เช่น\wbr{}ใน\wbr{}ไฟล์ \cmd{.bash\_profile} เพื่อ\wbr{}สร้าง\wbr{}คำ\wbr{}สั่ง\wbr{}เฉพาะ\wbr{}ตาม\wbr{}ที่\wbr{}ต้องการ\wbr{}ได้\wbr{}ด้วย.

\subsection{เรียน\wbr{}รู้\wbr{}เชลล์สค\wbr{}ริปต์\wbr{}จาก\wbr{}ตัว\wbr{}อย่าง}
วิธี\wbr{}เรียน\wbr{}การ\wbr{}เขียน\wbr{}เชลล์สค\wbr{}ริปต์\wbr{}ที่\wbr{}ดี\wbr{}อย่าง\wbr{}หนึ่ง\wbr{}คือ\wbr{}อ่าน\wbr{}เชลล์สค\wbr{}ริปต์\wbr{}ที่\wbr{}มี\wbr{}อยู่\wbr{}แล้ว\wbr{}และ\wbr{}ทำ\wbr{}ความ\wbr{}เข้า\wbr{}ใจ. ตัว\wbr{}อย่าง\wbr{}ต่อ\wbr{}ไป\wbr{}นี้\wbr{}เป็น\wbr{}การ\wbr{}รวม\wbr{}คำ\wbr{}สั่ง\wbr{}ต่างๆ\wbr{}ที่\wbr{}ได้\wbr{}แนะ\wbr{}นำ\wbr{}ไป\wbr{}แล้ว\wbr{}มา\wbr{}รวม\wbr{}กัน\wbr{}เขียน\wbr{}เป็น\wbr{}เชลล์สค\wbr{}ริปต์. เชลล์สค\wbr{}ริปต์\wbr{}นี้\wbr{}จะ\wbr{}แสดงโล\wbr{}โก\wbr{}ของ X วิน\wbr{}โดว์\wbr{}วินาที\wbr{}ละ\wbr{}หนึ่ง\wbr{}หน้า\wbr{}ต่าง\wbr{}ด้วย\wbr{}การ\wbr{}รัน\wbr{}โปรแกรม \cmd{xlogo}. ถ้า\wbr{}มี\wbr{}หน้า\wbr{}ต่าง \cmd{xlogo} มาก\wbr{}กว่า 5 หน้า\wbr{}ต่าง\wbr{}โดย\wbr{}ปริยาย\wbr{}จะ\wbr{}ปิด\wbr{}หน้า\wbr{}ต่าง\wbr{}แรก\wbr{}ที่\wbr{}แสดง\wbr{}ตาม\wbr{}ลำดับ\wbr{}แล้ว\wbr{}สร้าง\wbr{}หน้า\wbr{}ต่าง \cmd{xlogo} ใหม่\wbr{}ทด\wbr{}แทน\wbr{}ไป\wbr{}เรื่อยๆ. จำนวน\wbr{}หน้า\wbr{}ต่าง\wbr{}ที่\wbr{}ต้องการ\wbr{}แสดง\wbr{}สามารถ\wbr{}ระบุ\wbr{}ได้\wbr{}จาก\wbr{}อาร์กิวเ\wbr{}มนต์\wbr{}ของสค\wbr{}ริปต์\wbr{}ด้วย.

การ\wbr{}แสดง\wbr{}หน้า\wbr{}ต่าง \cmd{xlogo} จะ\wbr{}ใช้\wbr{}สี\wbr{}ฉาก\wbr{}หน้า\wbr{}และ\wbr{}ฉาก\wbr{}หลัง\wbr{}ด้วย\wbr{}การ\wbr{}สุ่ม\wbr{}เลือก\wbr{}สี, และ\wbr{}สุ่ม\wbr{}เลือก\wbr{}ตำแหน่ง\wbr{}ที่\wbr{}แสดง\wbr{}ให้\wbr{}อยู่\wbr{}ใน\wbr{}บริเวณ\wbr{}หน้า\wbr{}จอ. รูป\wbr{}ที่ \ref{fig:xlogo_sh} แสดง\wbr{}หน้า\wbr{}จอ\wbr{}การ\wbr{}ทำ\wbr{}งาน\wbr{}ของ\wbr{}เชลล์สค\wbr{}ริปต์.

\begin{figure}[!htb]
\plfigure{.35}{xlogo_sh.eps}{ผล\wbr{}ของ\wbr{}เชลล์สค\wbr{}ริปต์\wbr{}ใน\wbr{}ตัว\wbr{}อย่าง\wbr{}ที่ \ref{ex:xlogo_sh}.}{xlogo_sh}
\end{figure}

ใน\wbr{}เชลล์สค\wbr{}ริปต์\wbr{}ที่\wbr{}จะ\wbr{}อธิบาย\wbr{}ต่อ\wbr{}ไป\wbr{}นี้\wbr{}มี\wbr{}การ\wbr{}เรียก\wbr{}ใช้\wbr{}โปรแกรม\wbr{}ที่\wbr{}ต้อง\wbr{}แนะ\wbr{}นำ\wbr{}ก่อน\wbr{}ได้\wbr{}แก่\wbr{}โปรแกรม \cmd{showrgb}, \cmd{xdpyinfo}, \cmd{xlogo}, \cmd{pgrep} และ \cmd{kill}.

\subsubsection{\cmd{showrgb}}
โปรแกรม \cmd{showrgb}\cindex{showrgb} เป็น\wbr{}โปรแกรม\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}แสดง\wbr{}ค่า \emph{RGB}\gindex{rgb@RGB} %
\myvocab{r}{RGB}{เป็น\wbr{}วิธี\wbr{}การ\wbr{}แสดง\wbr{}สี\wbr{}ต่าง\wbr{}ด้วย\wbr{}แสง\wbr{}โดย\wbr{}ใช้\wbr{}แม่\wbr{}สี\wbr{}ได้\wbr{}แก่\wbr{}สี\wbr{}แดง (Red), สี\wbr{}เขียว (Green) และ\wbr{}สี\wbr{}น้ำ\wbr{}เงิน (Blue). จะ\wbr{}ใช้\wbr{}ค่า\wbr{}แปด\wbr{}บิต\wbr{}ซึ่ง\wbr{}มี\wbr{}ค่า\wbr{}ตั้ง\wbr{}แต่ 0 ถึง 255 แทน\wbr{}ความ\wbr{}เข้ม\wbr{}ของ\wbr{}แม่\wbr{}สี. เช่น\wbr{}สี\wbr{}แดง\wbr{}มี\wbr{}ค่า\wbr{}เป็น 255 0 0, สี\wbr{}เขียว\wbr{}มี\wbr{}ค่า\wbr{}เป็น 0 255 0, และ\wbr{}สี\wbr{}น้ำ\wbr{}เงิน\wbr{}มี\wbr{}ค่า\wbr{}เป็น 0 0 255. ใน\wbr{}ทฤษฎี\wbr{}แสง, ถ้า\wbr{}นำ\wbr{}แม่\wbr{}สี\wbr{}เหล่า\wbr{}นี้\wbr{}มา\wbr{}ผสม\wbr{}กัน\wbr{}จะ\wbr{}ได้\wbr{}สี\wbr{}ขาว.}%
ของ\wbr{}สี\wbr{}แสดง\wbr{}และ\wbr{}ชื่อ\wbr{}ของ\wbr{}สี\wbr{}นั้นๆ. แม่\wbr{}สี\wbr{}ที่\wbr{}ใช้\wbr{}ได้\wbr{}แก่\wbr{}แสง\wbr{}สี\wbr{}แดง\wbr{}จะ\wbr{}มี\wbr{}ค่า\wbr{}เป็น 255 0 0, แสง\wbr{}สี\wbr{}เขียว\wbr{}มี\wbr{}ค่า\wbr{}เป็น 0 255 0 และ\wbr{}แสง\wbr{}สี\wbr{}น้ำ\wbr{}เงิน\wbr{}มี\wbr{}ค่า\wbr{}เป็น 0 0 255. ค่า\wbr{}เหล่า\wbr{}นี้\wbr{}จะ\wbr{}แสดง\wbr{}ด้วย\wbr{}บิต\wbr{}แปด\wbr{}ตัว\wbr{}ซึ่ง\wbr{}มี\wbr{}ค่า\wbr{}ต่ำ\wbr{}สุด\wbr{}เป็น 0 และ\wbr{}ค่า\wbr{}สูง\wbr{}สุด\wbr{}เป็น 255. การ\wbr{}สร้าง\wbr{}สี\wbr{}อื่น\wbr{}โดย\wbr{}ใช้\wbr{}แม่\wbr{}สี\wbr{}สามารถ\wbr{}ทำ\wbr{}ได้\wbr{}โดย\wbr{}นำ\wbr{}แม่\wbr{}สี\wbr{}ความ\wbr{}เข้ม\wbr{}ต่างๆ\wbr{}มา\wbr{}ผสม\wbr{}กัน. เช่น\wbr{}สี\wbr{}ขา\wbr{}วจะ\wbr{}มี\wbr{}ค่า\wbr{}เป็น 255 255 255, สี\wbr{}ดำ\wbr{}จะ\wbr{}มี\wbr{}ค่า\wbr{}เป็น 0 0 0.
\begin{MyExample}[แสดง\wbr{}ค่า\wbr{}และ\wbr{}ชื่อ\wbr{}สี\wbr{}ต่างๆ\wbr{}ที่\wbr{}กำหนด\wbr{}ไว้\wbr{}ใน X วิน\wbr{}โดว์.]\label{ex:showrgb}
\begin{MyEx}
$ \cin{showrgb}
255 250 250             snow
248 248 255             ghost white
248 248 255             GhostWhite
245 245 245             white smoke
245 245 245             WhiteSmoke
...
\end{MyEx}
\end{MyExample}%$

จริงๆ\wbr{}แล้ว\wbr{}คำ\wbr{}สั่ง \cmd{showrgb} เป็น\wbr{}เพียง\wbr{}โปรแกรม\wbr{}ที่\wbr{}แสดง\wbr{}ข้อ\wbr{}มูล\wbr{}ที่\wbr{}อยู่\wbr{}ใน\wbr{}ไฟล์ \cmd{/usr/\wbr{}X11R6/\wbr{}lib/X11/rgb.txt} ซึ่ง\wbr{}มี\wbr{}เนื้อ\wbr{}หา\wbr{}เหมือน\wbr{}กับ\wbr{}ผล\wbr{}ลัพธ์\wbr{}ของ\wbr{}คำ\wbr{}สั่ง \cmd{showrgb}. ใน\wbr{}ระบบ X วิน\wbr{}โดว์\wbr{}จะ\wbr{}รับ\wbr{}รู้\wbr{}ชื่อ\wbr{}สี\wbr{}กำหนด\wbr{}ไว้\wbr{}ใน\wbr{}ไฟล์\wbr{}นี้. ให้สัง\wbr{}เกตุ\wbr{}ว่า\wbr{}ชื่อ\wbr{}สี\wbr{}บาง\wbr{}ชื่อ\wbr{}ซ้ำ\wbr{}กัน\wbr{}เช่น ``ghost white'' ชื่อ\wbr{}ซ้ำ\wbr{}กับ GhostWhite เป็นต้น.

\subsubsection{xdpyinfo}
\cmd{xdpyinfo}\cindex{xdpyinfo} เป็น\wbr{}โปรแกรม\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}แสดง\wbr{}ข้อ\wbr{}มูล\wbr{}ของ display ของ X วิน\wbr{}โดว์. คำ\wbr{}สั่ง\wbr{}นี้\wbr{}จะ\wbr{}แสดง\wbr{}ค่า\wbr{}ต่างๆ\wbr{}ของ X เ\wbr{}ซิฟร์\wbr{}เวอร์\wbr{}เช่น\wbr{}ความ\wbr{}สามารถ, ขนาด\wbr{}ของ\wbr{}หน้า\wbr{}จอ, ความ\wbr{}ละเอียด\wbr{}ของ\wbr{}สี เป็นต้น.

\begin{MyExample}[สำรวจ\wbr{}คุณสมบัติ\wbr{}และ\wbr{}ค่า\wbr{}เฉพาะ\wbr{}ต่าง\wbr{}ของ X เ\wbr{}ซิฟร์\wbr{}เวอร์.]
\begin{MyEx}
$ \cin{xdpyinfo}
...
    XKEYBOARD
    XTEST
    XVideo
default screen number:    0
number of screens:    1

screen #0:
  dimensions:    1280x1024 pixels (382x313 millimeters)
  resolution:    85x83 dots per inch
  depths (7):    24, 1, 4, 8, 15, 16, 32
  root window id:    0x40
  depth of root window:    24 planes
...
\end{MyEx}
\end{MyExample}%$

ในสค\wbr{}ริปต์\wbr{}จะ\wbr{}ตรวจ\wbr{}สอบ\wbr{}ขนาด\wbr{}ของ\wbr{}หน้า\wbr{}จอ\wbr{}ใน\wbr{}หน่วย \emph{พิก\wbr{}เซล (pixel)} %
\myvocab{p}{pixel}{หมาย\wbr{}ถึง\wbr{}จุด\wbr{}ที่\wbr{}ประกอบ\wbr{}กัน\wbr{}เป็น\wbr{}รูป\wbr{}หรือ\wbr{}หน่วย\wbr{}ที่\wbr{}บอก\wbr{}ขนาด\wbr{}ของ\wbr{}รูป. ขนาด\wbr{}ของ\wbr{}จุด\wbr{}ไม่\wbr{}มี\wbr{}ขนาด\wbr{}สัมบูรณ์\wbr{}ขึ้น\wbr{}อยู่\wbr{}กับ\wbr{}อุปกรณ์\wbr{}ที่\wbr{}ใช้\wbr{}แสดง. เพราะ\wbr{}ฉะนั้น\wbr{}ถ้า\wbr{}พูด\wbr{}ถึง\wbr{}รูป\wbr{}ขนาด 16x16 พิก\wbr{}เซล\wbr{}จะ\wbr{}มี\wbr{}ขนาด\wbr{}ต่าง\wbr{}กัน\wbr{}เมื่อ\wbr{}พิมพ์\wbr{}ออก\wbr{}ทาง\wbr{}เครื่อง\wbr{}พิมพ์\wbr{}เทียบ\wbr{}กับ\wbr{}หน้า\wbr{}จอ.}%
เพื่อ\wbr{}คำนวณ\wbr{}ตำแหน่ง\wbr{}ที่\wbr{}แสดง\wbr{}หน้า\wbr{}จอ \cmd{xlogo} ไม่\wbr{}ให้\wbr{}อยู่\wbr{}นอก\wbr{}หน้า\wbr{}จอ.

\subsubsection{xlogo}
\cmd{xlogo} เป็น\wbr{}โปรแกรม X วิน\wbr{}โดว์\wbr{}มาตร\wbr{}ฐาน\wbr{}ที่\wbr{}แสดงโล\wbr{}โก\wbr{}บน\wbr{}หน้า\wbr{}จอ. โปรแกรม X วิน\wbr{}โดว์\wbr{}มาตร\wbr{}ฐาน\wbr{}จะ\wbr{}มี\wbr{}ตัว\wbr{}เลือก\wbr{}เหมือนๆ\wbr{}กัน\wbr{}เช่น
\begin{itemize}
\item \cmd{-fg} หรือ \cmd{--foreground} ระบุ\wbr{}สี\wbr{}ของ\wbr{}ฉาก\wbr{}หน้า (foreground) ของ\wbr{}รูป\wbr{}หรือ\wbr{}วัตถุ\wbr{}ที่\wbr{}แสดง.
\item \cmd{-bg} หรือ \cmd{--background} ระบุ\wbr{}สี\wbr{}ของ\wbr{}ฉาก\wbr{}หลัง (background) ของ\wbr{}รูป\wbr{}หรือ\wbr{}วัตถุ\wbr{}ที่\wbr{}แสดง.
\item \cmd{-geometry +\textit{x}+\textit{y}} ระบุ\wbr{}ตำแหน่ง\wbr{}หน้า\wbr{}ต่าง\wbr{}พิกัด x และ y ใน\wbr{}หน่วยพิก\wbr{}เซล\wbr{}โดย\wbr{}ที่\wbr{}จุด (0, 0) อยู่\wbr{}ที่\wbr{}มุม\wbr{}ซ้าย\wbr{}บน\wbr{}ของ\wbr{}หน้า\wbr{}จอ.
\end{itemize}

\begin{figure}[!htb]
\plfigure{.40}{x_coordinate.eps}{ระบบ\wbr{}พิกัด\wbr{}ใน X วิน\wbr{}โดว์.}{x_coordinate}
\end{figure}


\medskip
คำ\wbr{}สั่ง \cmd{pgrep} ไว้\wbr{}ใช้\wbr{}หา\wbr{}หมาย\wbr{}เลข\wbr{}โปร\wbr{}เซส\wbr{}โดย\wbr{}ระบุ\wbr{}ชื่อ\wbr{}คำ\wbr{}สั่ง\wbr{}แบบ regular expression. และ\wbr{}คำ\wbr{}สั่ง \cmd{kill} ใช้\wbr{}สำหรับ\wbr{}จบ\wbr{}การ\wbr{}ทำ\wbr{}งาน\wbr{}ของ\wbr{}โปร\wbr{}เซส\wbr{}โดย\wbr{}ระบุ\wbr{}หมาย\wbr{}เลข\wbr{}โปร\wbr{}เซส\wbr{}ที่\wbr{}ต้องการ. ราย\wbr{}ละเอียด\wbr{}ของ\wbr{}คำ\wbr{}สั่ง \cmd{pgrep} และ \cmd{kill} จะ\wbr{}อยู่\wbr{}ใน\wbr{}บท\wbr{}ถัด\wbr{}ไป.

ตอน\wbr{}นี้\wbr{}เรา\wbr{}มา\wbr{}ดู\wbr{}เชลล์สค\wbr{}ริปต์\wbr{}ชื่อ \cmd{xlogo.sh} ใน\wbr{}ตัว\wbr{}อย่าง\wbr{}ที่ \ref{ex:xlogo_sh}.
\begin{MyExample}[ตัว\wbr{}อย่าง\wbr{}เชลล์สค\wbr{}ริปต์\wbr{}แสดง\wbr{}และ\wbr{}ควบ\wbr{}คุม\wbr{}จำนวน \cmd{xlogo}.]\label{ex:xlogo_sh}
\begin{MyEx}
$ \cin{cat -n xlogo.sh}
     1  #!/bin/sh
     2  #
     3  #  File name: xlogo.sh
     4  #  Description: Show one xlogo window per second. If there are more than
     5  #  5 windows (default), it will kill the first one and keep the number of
     6  #  window to 5.
     7  #
     8  #  Location and color of xlogo are random.
     9
    10  if [ -z $1 ]
    11  then
    12      N=5
    13  else
    14      N=$1
    15  fi
    16
    17  SHOWRGB=/usr/X11R6/bin/showrgb
    18  XDPYINFO=/usr/X11R6/bin/xdpyinfo
    19  XLOGO=/usr/X11R6/bin/xlogo
    20  PGREP=/usr/bin/pgrep
    21  KILL=/bin/kill
    22  HEAD=/bin/head
    23
    24  # get screen width and height
    25  width=`$XDPYINFO | awk '/dimensions/ \{print $2\}' | awk -F x '\{print $1\}'`
    26  height=`$XDPYINFO | awk '/dimensions/ \{print $2\}' | awk -F x '\{print $2\}'`
    27
    28  # put color names in array 'colors'
    29  colors=(`$SHOWRGB | sed -r 's/[[:digit:][:blank:]]+//' | grep -v ' '`)
    30  NC=$\{#colors[*]\} # size of array
    31
    32
    33  while [ 1 ]
    34    do
    35    fg=$\{colors[$(($RANDOM % $NC))]\}
    36    bg=$\{colors[$(($RANDOM % $NC))]\}
    37    x=$(($RANDOM % $width))
    38    y=$(($RANDOM % $height))
    39    echo Foreground color: $fg
    40    echo Background color: $bg
    41    echo x position: $x
    42    echo y position: $y
    43    $XLOGO -fg $fg  -bg $bg -geometry +$x+$y &
    44    echo
    45    if ((`$PGREP 'xlogo$' | wc -l` > $N ))
    46        then
    47        # kill first xlogo process in the list
    48        $KILL `pgrep 'xlogo$' | $HEAD -n 1`
    49    fi
    50    sleep 1
    51  done
\end{MyEx}
\end{MyExample}%$

บรรทัด\wbr{}ที่ 2 ถึง 8 เป็น\wbr{}หมาย\wbr{}เหตุ\wbr{}เขียน\wbr{}อธิบาย\wbr{}การ\wbr{}ทำ\wbr{}งาน\wbr{}เกี่ยว\wbr{}กับ\wbr{}เชลล์สค\wbr{}ริปต์\wbr{}ว่า\wbr{}ทำ\wbr{}อะไร\wbr{}บ้าง. บรรทัด\wbr{}ที่ 10 ถึง 15 ตรวจ\wbr{}สอบ\wbr{}ดู\wbr{}ว่า\wbr{}มี\wbr{}อาร์กิวเ\wbr{}มนต์\wbr{}เวลา\wbr{}รัน\wbr{}เชลล์สค\wbr{}ริปต์\wbr{}นี้\wbr{}หรือ\wbr{}ไม่. ถ้า\wbr{}ไม่\wbr{}มี\wbr{}อาร์กิวเ\wbr{}มนต์\wbr{}จะ\wbr{}ตั้ง\wbr{}ค่า \cmd{N} ซึ่ง\wbr{}คือ\wbr{}จำนวน\wbr{}หน้า\wbr{}ต่าง \cmd{xlogo} ไว้\wbr{}ที่ 5 บาน. ถ้า\wbr{}มี\wbr{}อาร์กิวเ\wbr{}มนต์\wbr{}จะ\wbr{}สมมติ\wbr{}ว่า\wbr{}เป็น\wbr{}ตัว\wbr{}เลข\wbr{}แล้ว\wbr{}ใช้\wbr{}ตัว\wbr{}เลข\wbr{}นั้น\wbr{}ตั้ง\wbr{}ค่า\wbr{}จำนวน\wbr{}หน้า\wbr{}ต่าง \cmd{xlogo} ที่\wbr{}จะ\wbr{}แสดง.

บรรทัด\wbr{}ที่ 17 ถึง 21 เป็น\wbr{}การ\wbr{}บันทึก\wbr{}โปรแกรม\wbr{}หรือ\wbr{}คำ\wbr{}สั่ง\wbr{}ต่างๆ\wbr{}เก็บ\wbr{}ไว้\wbr{}ใน\wbr{}ตัวแปร\wbr{}ให้\wbr{}เป็น\wbr{}ระเบียบ\wbr{}เรียบ\wbr{}ร้อย. วิธี\wbr{}แบบ\wbr{}นี้\wbr{}มี\wbr{}ประโยชน์\wbr{}ตอน\wbr{}แก้\wbr{}ไขสค\wbr{}ริปต์, คือ\wbr{}ถ้า\wbr{}ใน\wbr{}ระบบ\wbr{}มี\wbr{}โปรแกรม\wbr{}อยู่\wbr{}ใน\wbr{}ไดเ\wbr{}รก\wbr{}ทอ\wbr{}รี\wbr{}ที่\wbr{}ไม่\wbr{}เหมือน\wbr{}กัน\wbr{}ก็\wbr{}แก้\wbr{}ไข\wbr{}ได้\wbr{}ใน\wbr{}ช่วง\wbr{}นี้. ไม่\wbr{}ต้อง\wbr{}ไป\wbr{}หา\wbr{}ในสค\wbr{}ริปต์\wbr{}ว่า\wbr{}เขียน\wbr{}ไว้\wbr{}อยู่\wbr{}ตรง\wbr{}ไหน.

บรรทัด\wbr{}ที่ 25, 26 ใช้\wbr{}คำ\wbr{}สั่ง \cmd{xdpyinfo} ร่วม\wbr{}กับ\wbr{}คำ\wbr{}สั่ง \cmd{awk} ตั้ง\wbr{}ค่า\wbr{}ตัวแปร \cmd{width} และ \cmd{height} เก็บ\wbr{}ความ\wbr{}กว้าง\wbr{}และ\wbr{}ความ\wbr{}สูง\wbr{}ของ\wbr{}หน้า\wbr{}จอ\wbr{}เป็น\wbr{}หน่วยพิก\wbr{}เซล. คำ\wbr{}สั่ง \cmd{xdpyinfo} จะ\wbr{}แสดง\wbr{}ข้อ\wbr{}มูล\wbr{}ต่างๆ\wbr{}ของ X เ\wbr{}ซิฟร์\wbr{}เวอร์\wbr{}และ\wbr{}ค่า\wbr{}ต่างๆ\wbr{}ของ\wbr{}หน้า\wbr{}จอ. เรา\wbr{}รู้\wbr{}ว่า\wbr{}ผล\wbr{}ลัพธ์\wbr{}ของ\wbr{}คำ\wbr{}สั่ง \cmd{xdpyinfo} จะ\wbr{}มี\wbr{}บรรทัด\wbr{}ที่\wbr{}บอก\wbr{}ข้อ\wbr{}มูล\wbr{}เกี่ยว\wbr{}กับ\wbr{}ความ\wbr{}กว้าง\wbr{}และ\wbr{}สูง\wbr{}ของ\wbr{}หน้า\wbr{}จอ\wbr{}ได้\wbr{}แก่

\medskip
\begin{MyEx}
  dimensions:    1280x1024 pixels (382x313 millimeters)
\end{MyEx}
\medskip

เพื่อ\wbr{}ที่\wbr{}จะ\wbr{}สกัด\wbr{}เอา\wbr{}ค่า\wbr{}ความ\wbr{}กว้าง (1280) และ\wbr{}ความ\wbr{}สูง (1024) จาก\wbr{}บรรทัด\wbr{}นี้, จึง\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{awk} สกัด\wbr{}คอลัมน์\wbr{}ที่ 2 ซึ่ง\wbr{}ได้\wbr{}แก่ \cmd{1280x1024} ออก\wbr{}มา\wbr{}ด้วย\wbr{}คำ\wbr{}สั่ง


\medskip
\begin{MyEx}
awk '/dimensions/ \{print $2\}'
\end{MyEx}
%$
\medskip

เมื่อ\wbr{}ได้\wbr{}สาย\wbr{}อักขระ \cmd{1280x1024} มา\wbr{}แล้ว\wbr{}ต้อง\wbr{}แยก\wbr{}ให้\wbr{}ออก\wbr{}จาก\wbr{}กัน\wbr{}โดย\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{awk} อี\wbr{}กรอบ\wbr{}โดย\wbr{}ให้\wbr{}ตัว\wbr{}แบ่ง\wbr{}คอลัมน์\wbr{}เป็น \cmd{x} และ\wbr{}สกัด\wbr{}คอลัมน์\wbr{}ที่ 1 เก็บ\wbr{}ไว้\wbr{}ใน\wbr{}ตัวแปร \cmd{width} และ\wbr{}สกัด\wbr{}คอลัมน์\wbr{}ที่ 2 เก็บ\wbr{}ไว้\wbr{}ใน\wbr{}ตัวแปร \cmd{height}.

\medskip
\begin{MyEx}
awk -F x '\{print ...\}'
\end{MyEx}
%$
\medskip

บรรทัด\wbr{}ที่ 29 เป็น\wbr{}การ\wbr{}สร้าง\wbr{}ตัวแปร\wbr{}แถว\wbr{}ลำดับ\wbr{}ชื่อ \cmd{colors} ไว้\wbr{}เก็บ\wbr{}ชื่อ\wbr{}สี\wbr{}ต่างๆ\wbr{}จาก\wbr{}ผล\wbr{}ลัพธ์\wbr{}ของ\wbr{}คำ\wbr{}สั่ง \cmd{showrgb}. ผล\wbr{}ลัพธ์\wbr{}ของ\wbr{}คำ\wbr{}สั่ง \cmd{showrgb} จะ\wbr{}แสดง\wbr{}ค่า RGB และ\wbr{}ชื่อ\wbr{}ของ\wbr{}สี\wbr{}ใน\wbr{}ตัว\wbr{}อย่าง\wbr{}ที่ \ref{ex:showrgb}. ใน\wbr{}เชลล์สค\wbr{}ริปต์\wbr{}นี้\wbr{}จะ\wbr{}สกัด\wbr{}เอา\wbr{}ส่วน\wbr{}ที่\wbr{}เป็น\wbr{}ชื่อ\wbr{}สี\wbr{}โดย\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{sed}.

\medskip
\begin{MyEx}
sed -r 's/[[:digit:][:blank:]]+//'
\end{MyEx}
\medskip

คำ\wbr{}สั่ง\wbr{}นี้\wbr{}ใช้\wbr{}จะ\wbr{}ลบ\wbr{}ส่วน\wbr{}ที่\wbr{}เป็น\wbr{}ตัว\wbr{}เลข\wbr{}หรือ\wbr{}ช่อง\wbr{}ว่า\wbr{}ออก\wbr{}จาก\wbr{}บรรทัด\wbr{}ทุก\wbr{}บรรทัด. ผล\wbr{}ของ\wbr{}คำ\wbr{}สั่ง\wbr{}นี้\wbr{}จะ\wbr{}ได้\wbr{}ชื่อ\wbr{}สี\wbr{}บรรทัด\wbr{}ต่อ\wbr{}บรรทัด. แต่\wbr{}เรา\wbr{}ทราบ\wbr{}แล้ว\wbr{}ว่า\wbr{}มี\wbr{}กรณี\wbr{}ชื่อ\wbr{}สี\wbr{}ซ้ำ\wbr{}อยู่\wbr{}ด้วย\wbr{}เช่น ``ghost white'' จะ\wbr{}เหมือน\wbr{}กับ GhostWhite. ใน\wbr{}กรณี\wbr{}นี้\wbr{}จะ\wbr{}ใช้ \cmd{grep} คัด\wbr{}เอา\wbr{}คำ\wbr{}ที่\wbr{}มี\wbr{}ช่อง\wbr{}ไฟ\wbr{}ออก\wbr{}ด้วย\wbr{}คำ\wbr{}สั่ง \cmd{grep -v ' '}.

บรรทัด\wbr{}ที่ 30 เป็น\wbr{}การ\wbr{}หา\wbr{}จำนวน\wbr{}สมาชิก\wbr{}ที่\wbr{}อยู่\wbr{}ใน\wbr{}ตัวแปร\wbr{}แถว\wbr{}ลำดับ\wbr{}และ\wbr{}เก็บ\wbr{}ไว้\wbr{}ใน\wbr{}ตัวแปร \cmd{NC}. บรรทัด\wbr{}ที่ 33 เริ่ม\wbr{}ต้น\wbr{}วง\wbr{}วน\wbr{}ไม่\wbr{}รู้\wbr{}จบ. ใน\wbr{}แต่\wbr{}ละ\wbr{}รอบ\wbr{}ขอ\wbr{}งวง\wbr{}วน\wbr{}จะ\wbr{}ตั้ง\wbr{}ค่า\wbr{}ตัวแปร \cmd{fg} และ \cmd{bg} โดย\wbr{}ใช้\wbr{}ชื่อ\wbr{}สี\wbr{}ที่\wbr{}บันทึก\wbr{}อยู่\wbr{}ใน\wbr{}ตัวแปร\wbr{}แถว\wbr{}ลำดับ \cmd{colors}. การ\wbr{}สุ่ม\wbr{}ดรรชนี\wbr{}เพื่อ\wbr{}ระบุ\wbr{}ชื่อ\wbr{}สี\wbr{}จะ\wbr{}ใช้\wbr{}วิธี\wbr{}หา\wbr{}เศษ\wbr{}การ\wbr{}หาร\wbr{}ค่า\wbr{}ตัวแปร\wbr{}พิเศษ \cmd{\$RANDOM} กับ \cmd{NC} ทำ\wbr{}ให้\wbr{}ดรรชนี\wbr{}ที่\wbr{}ได้\wbr{}อยู่\wbr{}ใน\wbr{}ช่วง\wbr{}จำนวน\wbr{}ของ\wbr{}สี\wbr{}ทั้ง\wbr{}หมด\wbr{}ที่\wbr{}มี\wbr{}อยู่\wbr{}เสมอ (บรรทัด\wbr{}ที่ 35, 36). ใน\wbr{}ทำนอง\wbr{}เดียว\wbr{}กัน, บรรทัด\wbr{}ที่ 37, 38 ตั้ง\wbr{}ค่า\wbr{}พิกัด x, y โดย\wbr{}สุ่ม\wbr{}ให้\wbr{}อยู่\wbr{}ใน\wbr{}กรอบ\wbr{}ของ\wbr{}หน้า\wbr{}จอ.

บรรทัด\wbr{}ที่ 39 ถึง 42 แสดง\wbr{}ค่า\wbr{}ของ\wbr{}ตัวแปร \cmd{fg}, \cmd{bg}, \cmd{x} และ \cmd{y} ทางเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล. หลัง\wbr{}จาก\wbr{}นั้น\wbr{}จะ\wbr{}รัน\wbr{}โปรแกรม \cmd{xlogo} ด้วย\wbr{}ตัว\wbr{}เลือก\wbr{}และ\wbr{}ค่าที่\wbr{}ตั้ง\wbr{}ไว้\wbr{}ใน\wbr{}บรรทัด\wbr{}ที่ 43. และ\wbr{}บรรทัด\wbr{}ที่ 44 แสดง\wbr{}บรรทัด\wbr{}ว่าง\wbr{}เปล่า\wbr{}หนึ่ง\wbr{}บรรทัด\wbr{}เพื่อ\wbr{}ให้\wbr{}อ่าน\wbr{}ข้อ\wbr{}มูล\wbr{}ที่\wbr{}แสดง\wbr{}ทางเ\wbr{}ทอร์\wbr{}มิ\wbr{}นอล\wbr{}ได้\wbr{}สะดวก\wbr{}ขึ้น.

บรรทัด\wbr{}ที่ 45 จะ\wbr{}ใช้ \cmd{if} ตรวจ\wbr{}สอบ\wbr{}ดู\wbr{}ว่า\wbr{}มี\wbr{}จำนวน\wbr{}โปร\wbr{}เซส\wbr{}ที่\wbr{}ชื่อ \cmd{xlogo} เท่า\wbr{}ไร, แล้ว\wbr{}เทียบ\wbr{}กับ\wbr{}ค่า \cmd{N} ว่า\wbr{}มี\wbr{}มาก\wbr{}กว่า\wbr{}จำนวน\wbr{}ที่\wbr{}ตั้ง\wbr{}ไว้\wbr{}หรือ\wbr{}ไม่. อาร์กิวเ\wbr{}มนต์\wbr{}ของ\wbr{}คำ\wbr{}สั่ง \cmd{pgrep} คือ \cmd{xlogo\$} ระบุ\wbr{}ด้วย regular expression. หมาย\wbr{}ถึง\wbr{}โปร\wbr{}เซส\wbr{}ที่\wbr{}ชื่อ \cmd{xlogo}, จะ\wbr{}ไม่\wbr{}รวม\wbr{}ถึง \cmd{xlogo.sh} เพราะ\wbr{}มี\wbr{}เครื่อง\wbr{}หมาย \cmd{\$} แสดง\wbr{}ว่า\wbr{}ไม่\wbr{}มี\wbr{}คำ\wbr{}ใดๆ\wbr{}ต่อ\wbr{}ถัด\wbr{}จาก \cmd{xlogo}. แล้ว\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง \cmd{wc -l} เพื่อ\wbr{}นับ\wbr{}จำนวน\wbr{}โปร\wbr{}เซส \cmd{xlogo}. ถ้า\wbr{}จำนวน\wbr{}โปร\wbr{}เซ\wbr{}สมา\wbr{}กก\wbr{}ว่า\wbr{}ค่า \cmd{N} ก็\wbr{}จะ\wbr{}สั่ง\wbr{}คำ\wbr{}สั่ง

\medskip
\begin{MyEx}
       $KILL `pgrep 'xlogo$' | $HEAD -n 1`
\end{MyEx}
\medskip
%$

อาร์กิวเ\wbr{}มนต์\wbr{}ของ\wbr{}คำ\wbr{}สั่ง \cmd{kill} เป็น\wbr{}หมาย\wbr{}เลข\wbr{}โปร\wbr{}เซส\wbr{}ที่\wbr{}ได้\wbr{}จาก\wbr{}คำ\wbr{}สั่ง \cmd{pgrep 'xlogo\$' | \$HEAD -n 1} ซึ่ง\wbr{}คือ\wbr{}หมาย\wbr{}เลข\wbr{}โปร\wbr{}เซส\wbr{}ตัว\wbr{}แรก\wbr{}ของ\wbr{}คำ\wbr{}สั่ง \cmd{pgrep} อีก\wbr{}ที.

บรรทัด\wbr{}ที่ 50 จะ\wbr{}หยุด\wbr{}การ\wbr{}ทำ\wbr{}งาน 1 วินาที\wbr{}เพื่อ\wbr{}ไม่\wbr{}ให้\wbr{}กา\wbr{}รวน\wbr{}รอบ\wbr{}เร็ว\wbr{}เกิน\wbr{}ไป, หลัง\wbr{}จาก\wbr{}นั้น\wbr{}ก็\wbr{}เป็น\wbr{}การ\wbr{}ซ้ำ\wbr{}วง\wbr{}วน \cmd{while} ไป\wbr{}เรื่อยๆ\wbr{}ใน\wbr{}บรรทัด\wbr{}สุด\wbr{}ท้าย. ถ้า\wbr{}ต้องการ\wbr{}หยุด\wbr{}การ\wbr{}ทำ\wbr{}งาน\wbr{}ของ\wbr{}เชลล์สค\wbr{}ริปต์\wbr{}นี้\wbr{}ให้\wbr{}กด \cmd{C-c}.





\medskip
สำหรับ\wbr{}ผู้\wbr{}ที่\wbr{}สน\wbr{}ใจ\wbr{}การ\wbr{}เขียน\wbr{}เชลล์สค\wbr{}ริปต์\wbr{}อย่าง\wbr{}จริง\wbr{}จัง, ควร\wbr{}จะ\wbr{}อ่าน\wbr{}หนังสือ\wbr{}ที่\wbr{}เกี่ยว\wbr{}กับ\wbr{}การ\wbr{}ใช้\wbr{}เชลล์\wbr{}และ\wbr{}เขียน\wbr{}เชลล์สค\wbr{}ริปต์\wbr{}โดย\wbr{}เฉพาะ. หรือ\wbr{}อ่าน\wbr{}เอก\wbr{}สาร\wbr{}จาก The Linux Document Project เช่น Bash Guide for Beginners \cite{bashguide} และ Advanced Bash-Scripting Guide \cite{abs}.

\section{สรุป\wbr{}ท้าย\wbr{}บท}
\begin{itemize}
\item คำ\wbr{}สั่ง\wbr{}พื้น\wbr{}ฐาน\wbr{}ใน\wbr{}ลิ\wbr{}นุกซ์\wbr{}มัก\wbr{}จะ\wbr{}หมาย\wbr{}ถึง\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}สืบ\wbr{}ทอด\wbr{}มา\wbr{}จาก\wbr{}ระบบ\wbr{}ปฏิบัติ\wbr{}การ\wbr{}ยู\wbr{}นิกซ์\wbr{}เช่น คำ\wbr{}สั่ง\wbr{}สำหรับ\wbr{}จัด\wbr{}การ\wbr{}ระบบ\wbr{}ไฟล์, คำ\wbr{}สั่ง\wbr{}ประมวล\wbr{}ผล\wbr{}ข้อ\wbr{}มูลเท็กซ์ และ\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}ใช้\wbr{}ประกอบ\wbr{}กับ\wbr{}เชลล์ เป็นต้น.
\item ใน\wbr{}กรณี\wbr{}ทั่ว\wbr{}ไป, อาร์กิวเ\wbr{}มนต์\wbr{}ของ\wbr{}คำ\wbr{}สั่ง\wbr{}มัก\wbr{}จะ\wbr{}เป็น\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}และ\wbr{}รับ\wbr{}ข้อ\wbr{}มูล\wbr{}เข้า\wbr{}จาก\wbr{}ไฟล์\wbr{}นั้น\wbr{}และ\wbr{}แสดง\wbr{}ผล\wbr{}ทาง stdout. ถ้า\wbr{}ไม่\wbr{}มี\wbr{}การ\wbr{}ระบุ\wbr{}ชื่อ\wbr{}ไฟล์\wbr{}ก็\wbr{}มัก\wbr{}จะ\wbr{}รับ\wbr{}ข้อ\wbr{}มูล\wbr{}จาก stdin โดย\wbr{}ปริยาย.
\item ให้\wbr{}ใช้\wbr{}ไปป์\wbr{}และ\wbr{}รี\wbr{}ไดเ\wbr{}รก\wbr{}ชัน\wbr{}ช่วย\wbr{}สำหรับ\wbr{}การ\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง\wbr{}หลายๆ\wbr{}คำ\wbr{}สั่ง\wbr{}ด้วย\wbr{}กัน.
\item สร้าง\wbr{}และ\wbr{}ใช้\wbr{}เชลล์สค\wbr{}ริปต์\wbr{}เมื่อ\wbr{}ต้องการ\wbr{}ทำ\wbr{}งาน\wbr{}ตาม\wbr{}ขั้น\wbr{}ตอน\wbr{}ที่\wbr{}กำหนด\wbr{}ไว้\wbr{}แล้ว\wbr{}โดย\wbr{}อัตโนมัติ. หรือ\wbr{}เมื่อ\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}มี\wbr{}อยู่\wbr{}ใน\wbr{}ระบบ\wbr{}ไม่\wbr{}สามารถ\wbr{}แก้\wbr{}ไข\wbr{}ปัญหา\wbr{}งาน\wbr{}ที่\wbr{}ต้องการ\wbr{}กระทำ.
\end{itemize}


%\section{แบบ\wbr{}ฝึก\wbr{}หัด\wbr{}และ\wbr{}คำ\wbr{}ถาม\wbr{}ทบ\wbr{}ทวน\wbr{}ความ\wbr{}เข้า\wbr{}ใจ}
%\begin{description}
%\myprac ให้\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง\wbr{}ที่\wbr{}ไม่\wbr{}ใช่ \cmd{install} ทำ\wbr{}การ\wbr{}ให้\wbr{}ได้\wbr{}ผล\wbr{}เหมือน\wbr{}ตัว\wbr{}อย่าง\wbr{}ที่ \ref{ex:install} (คำ\wbr{}ตอบ\wbr{}หน้า \pageref{q_4_1})
%\myprac คำ\wbr{}สั่ง \cmd{mknod} และ \cmd{mkfifo} เหมือน\wbr{}กัน\wbr{}หรือ\wbr{}มี\wbr{}ความ\wbr{}แตก\wbr{}ต่าง\wbr{}กัน\wbr{}อย่าง\wbr{}ไร. (คำ\wbr{}ตอบ\wbr{}หน้า \pageref{q_4_2})
%\myprac ให้\wbr{}สำหรับ\wbr{}ว่า\wbr{}คำ\wbr{}สั่ง \cmd{test} เป็น\wbr{}คำ\wbr{}สั่ง\wbr{}ประเภท\wbr{}อะไร? ใน\wbr{}กรณี\wbr{}ที่ \cmd{test} เป็น\wbr{}โปรแกรม\wbr{}คำ\wbr{}สั่ง, ไฟล์\wbr{}โปรแกรม\wbr{}อยู่\wbr{}ที่\wbr{}ไหน? เวลา\wbr{}เรา\wbr{}รัน\wbr{}สั่ง\wbr{}คำ\wbr{}สั่ง \cmd{test} พิมพ์\wbr{}ใน\wbr{}พร\wbr{}อมต์, เชลล์\wbr{}จะ\wbr{}ตี\wbr{}ความ\wbr{}ว่า\wbr{}เป็น\wbr{}คำ\wbr{}สั่ง\wbr{}ประเภท\wbr{}ใด? (คำ\wbr{}ตอบ\wbr{}หน้า \pageref{q_4_3})
%\myprac จง\wbr{}เขียน\wbr{}บรรทัด\wbr{}คำ\wbr{}สั่ง\wbr{}โดย\wbr{}ใช้\wbr{}คำ\wbr{}สั่ง\wbr{}หลายๆ\wbr{}ตัว\wbr{}รวม\wbr{}กัน\wbr{}ให้\wbr{}ได้\wbr{}ผล\wbr{}เหมือน\wbr{}กับ\wbr{}คำ\wbr{}สั่ง \cmd{tac} คือ\wbr{}แสดง\wbr{}บรรทัด\wbr{}สุด\wbr{}ท้าย\wbr{}ของ\wbr{}ไฟล์\wbr{}แล้ว\wbr{}ไล่\wbr{}ไป\wbr{}เรื่อยๆ\wbr{}จน\wbr{}ถึง\wbr{}บรรทัด\wbr{}แรก. (คำ\wbr{}ตอบ\wbr{}หน้า \pageref{q_4_4})
%\end{description}




